"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[8516],{8516:(e,s,t)=>{t.r(s),t.d(s,{default:()=>O});var r=t(89379),a=t(65043),n=t(96446),l=t(81637),i=t(67254),o=t(68903),c=t(12110),d=t(26494),x=t(81045),A=t(85865),h=t(63336),j=t(11906),p=t(35721),m=t(24628),y=t(2050),u=t(48734),b=t(43845),g=t(8266),v=t(77739),C=t(17392),f=t(79958),w=t(29013),S=t(24056),T=t(71991),k=t(33390),M=t(66734),E=t(70579);const I=(0,M.A)((0,E.jsx)("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"}),"Apple");var z=t(47225),D=t(91082),R=t(59893),W=t(84770),L=t(41209),N=t(98606),_=t(42796),H=t(13479),P=t(32069),B=t(58558),U=t(8411);const O=()=>{const[e,s]=(0,a.useState)([]),[t,M]=(0,a.useState)([]),[O,V]=(0,a.useState)(!0),[F,G]=(0,a.useState)(null),[q,J]=(0,a.useState)(0),[K,Q]=(0,a.useState)(null),[X,Y]=(0,a.useState)(!1),[Z,$]=(0,a.useState)({}),[ee,se]=(0,a.useState)(null);(0,a.useEffect)(()=>{te()},[]);const te=async()=>{try{V(!0);const[e,t,r]=await Promise.all([U.A.getCalendars(),U.A.getAllEvents(),U.A.getCalendarAnalytics()]);s(e.data),M(t.data),se(r.data)}catch(e){G("Failed to load calendar data"),console.error("Error loading calendar data:",e)}finally{V(!1)}},re=async e=>{try{await U.A.connectCalendar(e,{name:"".concat(e," Calendar")}),await te()}catch(s){console.error("Error connecting calendar:",s)}},ae=e=>{switch(e){case"google":return(0,E.jsx)(T.A,{});case"outlook":return(0,E.jsx)(k.A,{});case"apple":return(0,E.jsx)(I,{});default:return(0,E.jsx)(z.A,{})}},ne=e=>{switch(e){case"google":return"#4285f4";case"outlook":return"#0078d4";case"apple":return"#34c759";default:return"#666"}},le=e=>{switch(e){case"property_viewing":return(0,E.jsx)(D.A,{});case"client_meeting":return(0,E.jsx)(R.A,{});case"team_meeting":case"property_inspection":return(0,E.jsx)(W.A,{});default:return(0,E.jsx)(L.A,{})}},ie=e=>new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),oe=()=>{const e=new Date,s=new Date(e.getTime()+6048e5);return t.filter(t=>{const r=new Date(t.start);return r>=e&&r<=s}).sort((e,s)=>new Date(e.start)-new Date(s.start)).slice(0,5)},ce={totalCalendars:e.length,connectedCalendars:e.filter(e=>e.isConnected).length,totalEvents:t.length,upcomingEvents:oe().length};if(O)return(0,E.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px"},children:(0,E.jsx)(l.A,{})});if(F)return(0,E.jsx)(i.A,{severity:"error",sx:{m:2},children:F});const de=[{label:"Calendars",component:(0,E.jsxs)(n.A,{children:[(0,E.jsxs)(o.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,E.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,E.jsx)(c.A,{children:(0,E.jsxs)(d.A,{children:[(0,E.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,E.jsx)(x.A,{sx:{bgcolor:"primary.main",mr:2},children:(0,E.jsx)(z.A,{})}),(0,E.jsx)(A.A,{variant:"h6",sx:{fontWeight:"bold"},children:ce.totalCalendars})]}),(0,E.jsx)(A.A,{variant:"body2",color:"text.secondary",children:"Total Calendars"})]})})}),(0,E.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,E.jsx)(c.A,{children:(0,E.jsxs)(d.A,{children:[(0,E.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,E.jsx)(x.A,{sx:{bgcolor:"success.main",mr:2},children:(0,E.jsx)(N.A,{})}),(0,E.jsx)(A.A,{variant:"h6",sx:{fontWeight:"bold"},children:ce.connectedCalendars})]}),(0,E.jsx)(A.A,{variant:"body2",color:"text.secondary",children:"Connected"})]})})}),(0,E.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,E.jsx)(c.A,{children:(0,E.jsxs)(d.A,{children:[(0,E.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,E.jsx)(x.A,{sx:{bgcolor:"info.main",mr:2},children:(0,E.jsx)(L.A,{})}),(0,E.jsx)(A.A,{variant:"h6",sx:{fontWeight:"bold"},children:ce.totalEvents})]}),(0,E.jsx)(A.A,{variant:"body2",color:"text.secondary",children:"Total Events"})]})})}),(0,E.jsx)(o.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,E.jsx)(c.A,{children:(0,E.jsxs)(d.A,{children:[(0,E.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,E.jsx)(x.A,{sx:{bgcolor:"warning.main",mr:2},children:(0,E.jsx)(_.A,{})}),(0,E.jsx)(A.A,{variant:"h6",sx:{fontWeight:"bold"},children:ce.upcomingEvents})]}),(0,E.jsx)(A.A,{variant:"body2",color:"text.secondary",children:"This Week"})]})})})]}),(0,E.jsxs)(h.A,{elevation:1,sx:{p:2,mb:3},children:[(0,E.jsx)(A.A,{variant:"h6",gutterBottom:!0,children:"Connect New Calendar"}),(0,E.jsxs)(n.A,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[(0,E.jsx)(j.A,{variant:"outlined",startIcon:(0,E.jsx)(T.A,{}),onClick:()=>re("google"),sx:{color:"#4285f4",borderColor:"#4285f4"},children:"Google Calendar"}),(0,E.jsx)(j.A,{variant:"outlined",startIcon:(0,E.jsx)(k.A,{}),onClick:()=>re("outlook"),sx:{color:"#0078d4",borderColor:"#0078d4"},children:"Outlook Calendar"}),(0,E.jsx)(j.A,{variant:"outlined",startIcon:(0,E.jsx)(I,{}),onClick:()=>re("apple"),sx:{color:"#34c759",borderColor:"#34c759"},children:"Apple Calendar"})]})]}),(0,E.jsx)(p.A,{children:e.map(e=>(0,E.jsxs)(m.Ay,{sx:{border:1,borderColor:"divider",borderRadius:1,mb:1},children:[(0,E.jsx)(y.A,{children:(0,E.jsx)(x.A,{sx:{bgcolor:ne(e.type)},children:ae(e.type)})}),(0,E.jsx)(u.A,{primary:(0,E.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,E.jsx)(A.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:e.name}),e.isPrimary&&(0,E.jsx)(b.A,{label:"Primary",size:"small",color:"primary"}),(0,E.jsx)(b.A,{label:e.isConnected?"Connected":"Disconnected",color:e.isConnected?"success":"error",size:"small"})]}),secondary:(0,E.jsxs)(n.A,{children:[(0,E.jsxs)(A.A,{variant:"body2",color:"text.secondary",children:[e.type.charAt(0).toUpperCase()+e.type.slice(1)," Calendar"]}),e.lastSync&&(0,E.jsxs)(A.A,{variant:"caption",color:"text.secondary",children:["Last synced: ",new Date(e.lastSync).toLocaleString()]})]})}),(0,E.jsx)(g.A,{children:(0,E.jsxs)(n.A,{sx:{display:"flex",gap:1},children:[(0,E.jsx)(v.A,{title:"Sync Calendar",children:(0,E.jsx)(C.A,{size:"small",onClick:()=>(async e=>{try{$(s=>(0,r.A)((0,r.A)({},s),{},{[e]:!0})),await U.A.syncCalendar(e),await te()}catch(s){console.error("Error syncing calendar:",s)}finally{$(s=>(0,r.A)((0,r.A)({},s),{},{[e]:!1}))}})(e.id),disabled:Z[e.id],children:Z[e.id]?(0,E.jsx)(l.A,{size:16}):(0,E.jsx)(H.A,{})})}),(0,E.jsx)(C.A,{size:"small",children:(0,E.jsx)(P.A,{})})]})})]},e.id))})]})},{label:"Upcoming Events",component:(0,E.jsxs)(n.A,{children:[(0,E.jsx)(A.A,{variant:"h6",gutterBottom:!0,children:"This Week's Events"}),(0,E.jsx)(p.A,{children:oe().map(e=>{return(0,E.jsxs)(m.Ay,{sx:{border:1,borderColor:"divider",borderRadius:1,mb:1},children:[(0,E.jsx)(y.A,{children:(0,E.jsx)(x.A,{sx:{bgcolor:"primary.main"},children:le(e.type)})}),(0,E.jsx)(u.A,{primary:(0,E.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,E.jsx)(A.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:e.title}),(0,E.jsx)(b.A,{label:e.status,color:"confirmed"===e.status?"success":"warning",size:"small"})]}),secondary:(0,E.jsxs)(n.A,{children:[(0,E.jsxs)(A.A,{variant:"body2",color:"text.secondary",children:[(s=e.start,new Date(s).toLocaleDateString())," at ",ie(e.start)]}),e.location&&(0,E.jsxs)(A.A,{variant:"body2",color:"text.secondary",children:["\ud83d\udccd ",e.location]}),e.description&&(0,E.jsx)(A.A,{variant:"body2",color:"text.secondary",children:e.description})]})}),(0,E.jsx)(g.A,{children:(0,E.jsx)(C.A,{size:"small",children:(0,E.jsx)(B.A,{})})})]},e.id);var s})})]})},{label:"Analytics",component:(0,E.jsx)(n.A,{children:ee&&(0,E.jsxs)(o.Ay,{container:!0,spacing:3,children:[(0,E.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,E.jsxs)(c.A,{children:[(0,E.jsx)(f.A,{title:"Events by Type"}),(0,E.jsx)(d.A,{children:Object.entries(ee.byType).map(e=>{let[s,t]=e;return(0,E.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,E.jsx)(A.A,{variant:"body2",children:s.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,E.jsx)(b.A,{label:t,size:"small"})]},s)})})]})}),(0,E.jsx)(o.Ay,{item:!0,xs:12,md:6,children:(0,E.jsxs)(c.A,{children:[(0,E.jsx)(f.A,{title:"Events by Status"}),(0,E.jsx)(d.A,{children:Object.entries(ee.byStatus).map(e=>{let[s,t]=e;return(0,E.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,E.jsx)(A.A,{variant:"body2",children:s.charAt(0).toUpperCase()+s.slice(1)}),(0,E.jsx)(b.A,{label:t,size:"small",color:"confirmed"===s?"success":"warning"})]},s)})})]})})]})})}];return(0,E.jsxs)(n.A,{sx:{p:3},children:[(0,E.jsx)(A.A,{variant:"h4",sx:{fontWeight:"bold",mb:3},children:"Calendar Integration"}),(0,E.jsxs)(h.A,{elevation:1,children:[(0,E.jsx)(w.A,{value:q,onChange:(e,s)=>{J(s)},variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},children:de.map((e,s)=>(0,E.jsx)(S.A,{label:e.label},s))}),(0,E.jsx)(n.A,{sx:{p:3},children:de[q].component})]})]})}},13479:(e,s,t)=>{t.d(s,{A:()=>n});var r=t(66734),a=t(70579);const n=(0,r.A)((0,a.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync")},41209:(e,s,t)=>{t.d(s,{A:()=>n});var r=t(66734),a=t(70579);const n=(0,r.A)([(0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,a.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},42796:(e,s,t)=>{t.d(s,{A:()=>n});var r=t(66734),a=t(70579);const n=(0,r.A)((0,a.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp")},58558:(e,s,t)=>{t.d(s,{A:()=>n});var r=t(66734),a=t(70579);const n=(0,r.A)((0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},79958:(e,s,t)=>{t.d(s,{A:()=>v});var r=t(98587),a=t(58168),n=t(65043),l=t(58387),i=t(98610),o=t(85865),c=t(98206),d=t(34535),x=t(92532),A=t(72372);function h(e){return(0,A.Ay)("MuiCardHeader",e)}const j=(0,x.A)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);var p=t(70579);const m=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],y=(0,d.Ay)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,s)=>(0,a.A)({["& .".concat(j.title)]:s.title,["& .".concat(j.subheader)]:s.subheader},s.root)})({display:"flex",alignItems:"center",padding:16}),u=(0,d.Ay)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,s)=>s.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),b=(0,d.Ay)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,s)=>s.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),g=(0,d.Ay)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,s)=>s.content})({flex:"1 1 auto"}),v=n.forwardRef(function(e,s){const t=(0,c.b)({props:e,name:"MuiCardHeader"}),{action:n,avatar:d,className:x,component:A="div",disableTypography:j=!1,subheader:v,subheaderTypographyProps:C,title:f,titleTypographyProps:w}=t,S=(0,r.A)(t,m),T=(0,a.A)({},t,{component:A,disableTypography:j}),k=(e=>{const{classes:s}=e;return(0,i.A)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},h,s)})(T);let M=f;null==M||M.type===o.A||j||(M=(0,p.jsx)(o.A,(0,a.A)({variant:d?"body2":"h5",className:k.title,component:"span",display:"block"},w,{children:M})));let E=v;return null==E||E.type===o.A||j||(E=(0,p.jsx)(o.A,(0,a.A)({variant:d?"body2":"body1",className:k.subheader,color:"text.secondary",component:"span",display:"block"},C,{children:E}))),(0,p.jsxs)(y,(0,a.A)({className:(0,l.A)(k.root,x),as:A,ref:s,ownerState:T},S,{children:[d&&(0,p.jsx)(u,{className:k.avatar,ownerState:T,children:d}),(0,p.jsxs)(g,{className:k.content,ownerState:T,children:[M,E]}),n&&(0,p.jsx)(b,{className:k.action,ownerState:T,children:n})]}))})},91082:(e,s,t)=>{t.d(s,{A:()=>n});var r=t(66734),a=t(70579);const n=(0,r.A)((0,a.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn")}}]);
//# sourceMappingURL=8516.f9b1ae14.chunk.js.map