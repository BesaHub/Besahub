"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[5680],{18942:(a,e,t)=>{t.d(e,{A:()=>n});var s=t(66734),r=t(70579);const n=(0,s.A)((0,r.jsx)("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorder")},19252:(a,e,t)=>{t.d(e,{A:()=>v});var s=t(98587),r=t(58168),n=t(65043),o=t(58387),d=t(72372),i=t(98610),l=t(67598),c=t(52900),h=t(46060),x=t(18280),u=t(70579);const m=["className","component","disableGutters","fixed","maxWidth","classes"],p=(0,x.A)(),A=(0,h.A)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,e)=>{const{ownerState:t}=a;return[e.root,e["maxWidth".concat((0,l.A)(String(t.maxWidth)))],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),b=a=>(0,c.A)({props:a,name:"MuiContainer",defaultTheme:p});var y=t(6803),g=t(34535),f=t(98206);const j=function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{createStyledComponent:e=A,useThemeProps:t=b,componentName:c="MuiContainer"}=a,h=e(a=>{let{theme:e,ownerState:t}=a;return(0,r.A)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}})},a=>{let{theme:e,ownerState:t}=a;return t.fixed&&Object.keys(e.breakpoints.values).reduce((a,t)=>{const s=t,r=e.breakpoints.values[s];return 0!==r&&(a[e.breakpoints.up(s)]={maxWidth:"".concat(r).concat(e.breakpoints.unit)}),a},{})},a=>{let{theme:e,ownerState:t}=a;return(0,r.A)({},"xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:"".concat(e.breakpoints.values[t.maxWidth]).concat(e.breakpoints.unit)}})}),x=n.forwardRef(function(a,e){const n=t(a),{className:x,component:p="div",disableGutters:A=!1,fixed:b=!1,maxWidth:y="lg"}=n,g=(0,s.A)(n,m),f=(0,r.A)({},n,{component:p,disableGutters:A,fixed:b,maxWidth:y}),j=((a,e)=>{const{classes:t,fixed:s,disableGutters:r,maxWidth:n}=a,o={root:["root",n&&"maxWidth".concat((0,l.A)(String(n))),s&&"fixed",r&&"disableGutters"]};return(0,i.A)(o,a=>(0,d.Ay)(e,a),t)})(f,c);return(0,u.jsx)(h,(0,r.A)({as:p,ownerState:f,className:(0,o.A)(j.root,x),ref:e},g))});return x}({createStyledComponent:(0,g.Ay)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(a,e)=>{const{ownerState:t}=a;return[e.root,e["maxWidth".concat((0,y.A)(String(t.maxWidth)))],t.fixed&&e.fixed,t.disableGutters&&e.disableGutters]}}),useThemeProps:a=>(0,f.b)({props:a,name:"MuiContainer"})}),v=j},25680:(a,e,t)=>{t.r(e),t.d(e,{default:()=>z});var s=t(65043),r=t(73216),n=t(12110),o=t(26494),d=t(96446),i=t(85865),l=t(17392),c=t(43845),h=t(19252),x=t(11906),u=t(67254),m=t(67784),p=t(51787),A=t(68903),b=t(72437),y=t(32143),g=t(70141),f=t(58602),j=t(51387),v=t(58558),w=t(79484),S=t(43817),C=t(69320),W=t(18942),k=t(59529),M=t(32242),L=t(70579);const z=()=>{const a=(0,r.Zp)(),[e,t]=(0,s.useState)(!0),[z,D]=(0,s.useState)([]),[G,I]=(0,s.useState)([]),[R,N]=(0,s.useState)(""),[_,E]=(0,s.useState)(null),[B,P]=(0,s.useState)(null),[T,F]=(0,s.useState)(null);(0,s.useEffect)(()=>{H()},[]);const H=async()=>{try{t(!0),F(null);const a=await(0,k.MA)();a.success&&(D(a.data.myDashboards||[]),I(a.data.sharedDashboards||[]))}catch(s){var a,e;console.error("Error fetching dashboards:",s),F((null===(a=s.response)||void 0===a||null===(e=a.data)||void 0===e?void 0:e.message)||"Failed to load dashboards")}finally{t(!1)}},V=e=>{a("/dashboards/".concat(e))},Z=()=>{E(null),P(null)},q=a=>{if(!R)return a;const e=R.toLowerCase();return a.filter(a=>{var t,s;return(null===(t=a.name)||void 0===t?void 0:t.toLowerCase().includes(e))||(null===(s=a.description)||void 0===s?void 0:s.toLowerCase().includes(e))})},K=a=>{var e,t,s;let{dashboard:r,isShared:h=!1}=a;return(0,L.jsx)(n.A,{sx:{height:"100%",cursor:"pointer","&:hover":{boxShadow:6}},onClick:()=>V(r.id),children:(0,L.jsxs)(o.A,{children:[(0,L.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,L.jsxs)(d.A,{display:"flex",alignItems:"center",gap:1,flex:1,children:[(0,L.jsx)(f.A,{color:"primary"}),(0,L.jsx)(i.A,{variant:"h6",noWrap:!0,children:r.name}),r.isDefault&&(0,L.jsx)(C.A,{color:"warning",fontSize:"small"})]}),(0,L.jsx)(l.A,{size:"small",onClick:a=>((a,e)=>{a.stopPropagation(),E(a.currentTarget),P(e)})(a,r),children:(0,L.jsx)(v.A,{})})]}),r.description&&(0,L.jsx)(i.A,{variant:"body2",color:"text.secondary",sx:{mt:1,mb:2},noWrap:!0,children:r.description}),(0,L.jsxs)(d.A,{display:"flex",gap:1,flexWrap:"wrap",children:[(0,L.jsx)(c.A,{label:"".concat((null===(e=r.widgets)||void 0===e?void 0:e.length)||0," widgets"),size:"small",variant:"outlined"}),h&&(0,L.jsx)(c.A,{label:"Shared by ".concat(null===(t=r.user)||void 0===t?void 0:t.firstName," ").concat(null===(s=r.user)||void 0===s?void 0:s.lastName),size:"small",color:"secondary",variant:"outlined",icon:(0,L.jsx)(S.A,{})})]}),(0,L.jsxs)(i.A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Updated ",new Date(r.updatedAt).toLocaleDateString()]})]})})};return e?(0,L.jsx)(M.kt,{}):(0,L.jsxs)(h.A,{maxWidth:"xl",sx:{py:3},children:[(0,L.jsxs)(d.A,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,L.jsx)(i.A,{variant:"h4",fontWeight:"bold",children:"Dashboards"}),(0,L.jsx)(x.A,{variant:"contained",startIcon:(0,L.jsx)(g.A,{}),onClick:()=>{a("/dashboards/new")},children:"Create Dashboard"})]}),T&&(0,L.jsx)(u.A,{severity:"error",sx:{mb:2},onClose:()=>F(null),children:T}),(0,L.jsx)(m.A,{fullWidth:!0,variant:"outlined",placeholder:"Search dashboards...",value:R,onChange:a=>N(a.target.value),sx:{mb:3},InputProps:{startAdornment:(0,L.jsx)(p.A,{position:"start",children:(0,L.jsx)(w.A,{})})}}),(0,L.jsxs)(d.A,{mb:4,children:[(0,L.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"My Dashboards"}),0===q(z).length?(0,L.jsx)(n.A,{children:(0,L.jsx)(o.A,{children:(0,L.jsx)(i.A,{color:"text.secondary",align:"center",children:"No dashboards found. Create your first dashboard to get started."})})}):(0,L.jsx)(A.Ay,{container:!0,spacing:2,children:q(z).map(a=>(0,L.jsx)(A.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,L.jsx)(K,{dashboard:a})},a.id))})]}),G.length>0&&(0,L.jsxs)(d.A,{children:[(0,L.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"Shared With Me"}),(0,L.jsx)(A.Ay,{container:!0,spacing:2,children:q(G).map(a=>(0,L.jsx)(A.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,L.jsx)(K,{dashboard:a,isShared:!0})},a.id))})]}),(0,L.jsxs)(b.A,{anchorEl:_,open:Boolean(_),onClose:Z,children:[(0,L.jsx)(y.A,{onClick:()=>{V(null===B||void 0===B?void 0:B.id),Z()},children:"View Dashboard"}),B&&!B.isDefault&&(0,L.jsxs)(y.A,{onClick:async()=>{try{await(0,k.Md)(B.id),Z(),H()}catch(a){console.error("Error setting default dashboard:",a),F("Failed to set default dashboard")}},children:[(0,L.jsx)(W.A,{fontSize:"small",sx:{mr:1}}),"Set as Default"]}),(0,L.jsxs)(y.A,{onClick:async()=>{if(window.confirm("Are you sure you want to delete this dashboard?"))try{await(0,k.A_)(B.id),Z(),H()}catch(a){console.error("Error deleting dashboard:",a),F("Failed to delete dashboard")}},sx:{color:"error.main"},children:[(0,L.jsx)(j.A,{fontSize:"small",sx:{mr:1}}),"Delete"]})]})]})}},32242:(a,e,t)=>{t.d(e,{kt:()=>d});t(65043);var s=t(96446),r=t(81637),n=t(85865),o=t(70579);const d=a=>{let{message:e="Loading...",size:t=40,fullscreen:d=!1}=a;const i=(0,o.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[(0,o.jsx)(r.A,{size:t}),e&&(0,o.jsx)(n.A,{variant:"body2",color:"text.secondary",children:e})]});return d?(0,o.jsx)(s.A,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(255, 255, 255, 0.9)",zIndex:9999},children:i}):(0,o.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:200,width:"100%"},children:i})}},43817:(a,e,t)=>{t.d(e,{A:()=>n});var s=t(66734),r=t(70579);const n=(0,s.A)((0,r.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share")},51387:(a,e,t)=>{t.d(e,{A:()=>n});var s=t(66734),r=t(70579);const n=(0,s.A)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},58558:(a,e,t)=>{t.d(e,{A:()=>n});var s=t(66734),r=t(70579);const n=(0,s.A)((0,r.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},59529:(a,e,t)=>{t.d(e,{A_:()=>i,MA:()=>r,Md:()=>c,WK:()=>x,ZW:()=>o,ct:()=>l,eW:()=>m,i:()=>p,jn:()=>h,mQ:()=>d,n6:()=>n,uv:()=>u});var s=t(94505);const r=async()=>(await s.Ay.get("/dashboards")).data,n=async a=>(await s.Ay.post("/dashboards",a)).data,o=async a=>(await s.Ay.get("/dashboards/".concat(a))).data,d=async(a,e)=>(await s.Ay.put("/dashboards/".concat(a),e)).data,i=async a=>(await s.Ay.delete("/dashboards/".concat(a))).data,l=async(a,e)=>(await s.Ay.post("/dashboards/".concat(a,"/share"),e)).data,c=async a=>(await s.Ay.post("/dashboards/".concat(a,"/default"))).data,h=async(a,e)=>(await s.Ay.post("/dashboards/".concat(a,"/widgets"),e)).data,x=async(a,e)=>(await s.Ay.put("/dashboards/widgets/".concat(a),e)).data,u=async a=>(await s.Ay.delete("/dashboards/widgets/".concat(a))).data,m=async a=>(await s.Ay.post("/dashboards/widgets/query",a)).data,p=async a=>(await s.Ay.post("/dashboards/widgets/".concat(a,"/refresh"))).data},69320:(a,e,t)=>{t.d(e,{A:()=>n});var s=t(66734),r=t(70579);const n=(0,s.A)((0,r.jsx)("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star")},79484:(a,e,t)=>{t.d(e,{A:()=>n});var s=t(66734),r=t(70579);const n=(0,s.A)((0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")}}]);
//# sourceMappingURL=5680.e0ec868a.chunk.js.map