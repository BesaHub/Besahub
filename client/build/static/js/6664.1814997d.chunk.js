"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[6664],{13985:(e,t,a)=>{a.d(t,{L:()=>n});var r=a(94505);const n={getOverview:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d";return r.Ay.get("/analytics/overview?timeframe=".concat(e))},getSalesAnalytics:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"12m";return r.Ay.get("/analytics/sales?timeframe=".concat(e))},getPropertyAnalytics:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"12m";return r.Ay.get("/analytics/properties?timeframe=".concat(e))},getLeadAnalytics:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d";return r.Ay.get("/analytics/leads?timeframe=".concat(e))},getMarketingAnalytics:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"30d";return r.Ay.get("/analytics/marketing?timeframe=".concat(e))},getFinancialAnalytics:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"12m";return r.Ay.get("/analytics/financial?timeframe=".concat(e))},getKPIs:()=>r.Ay.get("/analytics/kpis"),getCustomAnalytics:(e,t,a)=>{const n=new URLSearchParams;return e&&n.append("metrics",e.join(",")),t&&n.append("timeframe",t),a&&n.append("filters",JSON.stringify(a)),r.Ay.get("/analytics/custom?".concat(n.toString()))},exportAnalytics:(e,t,a)=>r.Ay.post("/analytics/export",{format:e,data:t,filename:a}),getDashboard:e=>r.Ay.get("/analytics/dashboard/".concat(e)),saveDashboard:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r.Ay.post("/analytics/dashboard",{name:e,widgets:t,isPublic:a})},updateDashboard:(e,t,a,n)=>r.Ay.put("/analytics/dashboard/".concat(e),{name:t,widgets:a,isPublic:n}),deleteDashboard:e=>r.Ay.delete("/analytics/dashboard/".concat(e)),getRealTimeMetrics:()=>r.Ay.get("/analytics/realtime"),getComparativeAnalytics:(e,t,a)=>r.Ay.post("/analytics/compare",{period1:e,period2:t,metrics:a}),getForecasts:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return r.Ay.get("/analytics/forecast?metric=".concat(e,"&periods=").concat(t))}}},15896:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(66734),n=a(70579);const s=(0,r.A)((0,n.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline")},36664:(e,t,a)=>{a.r(t),a.d(t,{default:()=>U});var r=a(89379),n=a(65043),s=a(96446),i=a(85865),o=a(17392),c=a(74605),l=a(19042),d=a(11906),h=a(83462),m=a(26600),g=a(35316),u=a(68903),x=a(63336),p=a(29347),A=a(67784),y=a(73158),f=a(67254),v=a(42796),b=a(95846),j=a(75155),w=a(56487),S=a(66734),C=a(70579);const k=(0,S.A)((0,C.jsx)("path",{d:"M11 2v20c-5.07-.5-9-4.79-9-10s3.93-9.5 9-10m2.03 0v8.99H22c-.47-4.74-4.24-8.52-8.97-8.99m0 11.01V22c4.74-.47 8.5-4.25 8.97-8.99z"}),"PieChart");var T=a(48262),P=a(59275),M=a(67957),z=a(51387),D=a(70141),L=a(37141),O=a(399);var E=a(13985),R=a(45801),W=a(81702);const I=new class{constructor(){this.metrics=new Map,this.observers=new Map}startTiming(e){this.metrics.set(e,{startTime:performance.now(),endTime:null,duration:null})}endTiming(e){const t=this.metrics.get(e);return t?(t.endTime=performance.now(),t.duration=t.endTime-t.startTime,t.duration):null}measureRender(e,t){this.startTiming("".concat(e,"-render"));const a=t();return this.endTiming("".concat(e,"-render")),a}getMemoryUsage(){return performance.memory?{used:Math.round(performance.memory.usedJSHeapSize/1048576),total:Math.round(performance.memory.totalJSHeapSize/1048576),limit:Math.round(performance.memory.jsHeapSizeLimit/1048576)}:null}observeLongTasks(e){if("PerformanceObserver"in window){const t=new PerformanceObserver(t=>{for(const a of t.getEntries())a.duration>50&&e(a)});t.observe({entryTypes:["longtask"]}),this.observers.set("longtask",t)}}observeLayoutShifts(e){if("PerformanceObserver"in window){const t=new PerformanceObserver(t=>{for(const a of t.getEntries())a.value>.1&&e(a)});t.observe({entryTypes:["layout-shift"]}),this.observers.set("layout-shift",t)}}observeFirstContentfulPaint(e){if("PerformanceObserver"in window){const t=new PerformanceObserver(t=>{for(const a of t.getEntries())"first-contentful-paint"===a.name&&e(a)});t.observe({entryTypes:["paint"]}),this.observers.set("first-contentful-paint",t)}}getMetrics(){const e={};for(const[t,a]of this.metrics)e[t]=a;return e}clearMetrics(){this.metrics.clear()}disconnect(){for(const e of this.observers.values())e.disconnect();this.observers.clear()}getReport(){return{memory:this.getMemoryUsage(),metrics:this.getMetrics(),timestamp:(new Date).toISOString()}}},F=(0,O.WidthProvider)(O.Responsive),H={"revenue-chart":{name:"Revenue Chart",icon:(0,C.jsx)(v.A,{}),defaultSize:{w:6,h:4},description:"Shows revenue trends over time"},"kpi-summary":{name:"KPI Summary",icon:(0,C.jsx)(b.A,{}),defaultSize:{w:6,h:4},description:"Key performance indicators overview"},"top-performers":{name:"Top Performers",icon:(0,C.jsx)(j.A,{}),defaultSize:{w:6,h:4},description:"Top performing team members"},"market-trends":{name:"Market Trends",icon:(0,C.jsx)(w.A,{}),defaultSize:{w:6,h:4},description:"Market trends and analysis"},"lead-sources":{name:"Lead Sources",icon:(0,C.jsx)(k,{}),defaultSize:{w:4,h:4},description:"Lead source distribution"},"conversion-funnel":{name:"Conversion Funnel",icon:(0,C.jsx)(b.A,{}),defaultSize:{w:8,h:4},description:"Lead conversion funnel"},"email-campaigns":{name:"Email Campaigns",icon:(0,C.jsx)(T.A,{}),defaultSize:{w:6,h:4},description:"Email campaign performance"},"property-types":{name:"Property Types",icon:(0,C.jsx)(P.A,{}),defaultSize:{w:4,h:4},description:"Property type distribution"},"financial-overview":{name:"Financial Overview",icon:(0,C.jsx)(M.A,{}),defaultSize:{w:6,h:4},description:"Financial performance overview"},"website-traffic":{name:"Website Traffic",icon:(0,C.jsx)(v.A,{}),defaultSize:{w:6,h:4},description:"Website traffic analytics"}},U=()=>{const{startRender:e,endRender:t,measureAsync:a}=(v="DashboardBuilder",{startRender:()=>{I.startTiming("".concat(v,"-render"))},endRender:()=>{I.endTiming("".concat(v,"-render"))},measureAsync:async(e,t)=>{I.startTiming("".concat(v,"-").concat(e));try{const a=await t();return I.endTiming("".concat(v,"-").concat(e)),a}catch(O){throw I.endTiming("".concat(v,"-").concat(e)),O}},getMemoryUsage:()=>I.getMemoryUsage(),getReport:()=>I.getReport()});var v;const[b,j]=(0,n.useState)({id:null,name:"",widgets:[],isPublic:!1}),[w,S]=(0,n.useState)({}),[k,T]=(0,n.useState)(!0),[P,M]=(0,n.useState)(!1),[O,U]=(0,n.useState)(null),[_,B]=(0,n.useState)({open:!1,message:"",severity:"success"}),[J,K]=(0,n.useState)(!1),[N,V]=(0,n.useState)(!1),[q,G]=(0,n.useState)(!1),[Q,X]=(0,n.useState)(null),[Y,Z]=(0,n.useState)({lg:[]});(0,n.useEffect)(()=>{e(),Promise.all([$(),ee()]).finally(()=>{t()})},[e,t]);const $=async()=>{try{T(!0);const[e,t,a,r,n]=await Promise.all([E.L.getOverview(),E.L.getSalesAnalytics(),E.L.getLeadAnalytics(),E.L.getMarketingAnalytics(),E.L.getFinancialAnalytics()]);S({overview:e.data.data,sales:t.data.data,leads:a.data.data,marketing:r.data.data,financial:n.data.data})}catch(e){U("Failed to fetch analytics data"),console.error("Error fetching analytics data:",e)}finally{T(!1)}},ee=async()=>{try{const e=(await E.L.getDashboard("executive")).data.data;j(e),Z({lg:e.widgets})}catch(e){console.error("Error loading default dashboard:",e)}},te=(0,n.useCallback)(e=>{const t=H[e],a=(0,r.A)((0,r.A)({i:"widget-".concat(Date.now()),type:e,title:t.name},t.defaultSize),{},{x:0,y:0}),n=[...b.widgets,a],s={lg:[...Y.lg,a]};j(e=>(0,r.A)((0,r.A)({},e),{},{widgets:n})),Z(s),K(!1)},[b.widgets,Y.lg]),ae=(0,n.useCallback)(e=>{Z({lg:e});const t=b.widgets.map(t=>{const a=e.find(e=>e.i===t.i);return a?(0,r.A)((0,r.A)({},t),a):t});j(e=>(0,r.A)((0,r.A)({},e),{},{widgets:t}))},[b.widgets]),re=(0,n.useCallback)(()=>{B(e=>(0,r.A)((0,r.A)({},e),{},{open:!1}))},[]),ne=(0,n.useCallback)(e=>{var t;const a=null===(t=H[e.type])||void 0===t?void 0:t.component;return a?(0,C.jsxs)(s.A,{sx:{height:"100%",width:"100%"},children:[(0,C.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,C.jsx)(i.A,{variant:"h6",sx:{fontWeight:"bold"},children:e.title}),(0,C.jsx)(o.A,{size:"small",onClick:()=>(e=>{const t=b.widgets.filter(t=>t.i!==e),a={lg:Y.lg.filter(t=>t.i!==e)};j((0,r.A)((0,r.A)({},b),{},{widgets:t})),Z(a)})(e.i),sx:{color:"error.main"},children:(0,C.jsx)(z.A,{})})]}),(0,C.jsx)(a,(0,r.A)({data:w[e.type]||[],height:200},e.config))]},e.i):null},[w]);return k?(0,C.jsx)(R.O2,{}):(0,C.jsx)(W.A,{children:(0,C.jsxs)(s.A,{sx:{p:3},children:[(0,C.jsxs)(s.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,C.jsx)(i.A,{variant:"h4",sx:{fontWeight:"bold"},children:"Dashboard Builder"}),(0,C.jsxs)(s.A,{sx:{display:"flex",gap:2},children:[(0,C.jsx)(c.A,{control:(0,C.jsx)(l.A,{checked:q,onChange:e=>G(e.target.checked),color:"primary"}),label:"Edit Mode"}),(0,C.jsx)(d.A,{variant:"outlined",startIcon:(0,C.jsx)(D.A,{}),onClick:()=>K(!0),disabled:!q,children:"Add Widget"}),(0,C.jsx)(d.A,{variant:"contained",startIcon:(0,C.jsx)(L.A,{}),onClick:()=>V(!0),disabled:!q,children:"Save Dashboard"})]})]}),(0,C.jsx)(F,{className:"layout",layouts:Y,onLayoutChange:ae,breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},rowHeight:60,isDraggable:q,isResizable:q,margin:[16,16],children:b.widgets.map(e=>(0,C.jsx)(s.A,{children:ne(e)},e.i))}),(0,C.jsxs)(h.A,{open:J,onClose:()=>K(!1),maxWidth:"md",fullWidth:!0,children:[(0,C.jsx)(m.A,{children:"Add Widget"}),(0,C.jsx)(g.A,{children:(0,C.jsx)(u.Ay,{container:!0,spacing:2,sx:{mt:1},children:Object.entries(H).map(e=>{let[t,a]=e;return(0,C.jsx)(u.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,C.jsxs)(x.A,{elevation:2,sx:{p:2,cursor:"pointer",border:"1px solid transparent","&:hover":{elevation:4,borderColor:"primary.main"}},onClick:()=>te(t),children:[(0,C.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[a.icon,(0,C.jsx)(i.A,{variant:"subtitle1",sx:{ml:1,fontWeight:"bold"},children:a.name})]}),(0,C.jsx)(i.A,{variant:"body2",color:"text.secondary",children:a.description})]})},t)})})}),(0,C.jsx)(p.A,{children:(0,C.jsx)(d.A,{onClick:()=>K(!1),children:"Cancel"})})]}),(0,C.jsxs)(h.A,{open:N,onClose:()=>V(!1),maxWidth:"sm",fullWidth:!0,children:[(0,C.jsx)(m.A,{children:"Save Dashboard"}),(0,C.jsxs)(g.A,{children:[(0,C.jsx)(A.A,{autoFocus:!0,margin:"dense",label:"Dashboard Name",fullWidth:!0,value:b.name,onChange:e=>j((0,r.A)((0,r.A)({},b),{},{name:e.target.value})),sx:{mb:2}}),(0,C.jsx)(c.A,{control:(0,C.jsx)(l.A,{checked:b.isPublic,onChange:e=>j((0,r.A)((0,r.A)({},b),{},{isPublic:e.target.checked}))}),label:"Make this dashboard public"})]}),(0,C.jsxs)(p.A,{children:[(0,C.jsx)(d.A,{onClick:()=>V(!1),children:"Cancel"}),(0,C.jsx)(d.A,{onClick:async()=>{try{M(!0);const e=Y.lg.map(e=>{var t;return{type:(null===(t=b.widgets.find(t=>t.i===e.i))||void 0===t?void 0:t.type)||"revenue-chart",position:{x:e.x,y:e.y,w:e.w,h:e.h}}});await E.L.saveDashboard(b.name,e,b.isPublic),B({open:!0,message:"Dashboard saved successfully!",severity:"success"}),V(!1)}catch(e){B({open:!0,message:"Failed to save dashboard",severity:"error"}),console.error("Error saving dashboard:",e)}finally{M(!1)}},variant:"contained",disabled:P||!b.name,children:P?"Saving...":"Save"})]})]}),(0,C.jsx)(y.A,{open:_.open,autoHideDuration:6e3,onClose:re,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,C.jsx)(f.A,{onClose:re,severity:_.severity,sx:{width:"100%"},children:_.message})})]})})}},45801:(e,t,a)=>{a.d(t,{MH:()=>d,O2:()=>l,OR:()=>c});a(65043);var r=a(63336),n=a(78185),s=a(96446),i=a(70579);const o=e=>{let{height:t=300}=e;return(0,i.jsxs)(r.A,{elevation:2,sx:{p:2,height:t+60},children:[(0,i.jsx)(n.A,{variant:"text",width:"60%",height:32,sx:{mb:2}}),(0,i.jsx)(n.A,{variant:"rectangular",width:"100%",height:t})]})},c=()=>(0,i.jsxs)(s.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,i.jsx)(n.A,{variant:"text",width:"40%",height:24}),(0,i.jsx)(n.A,{variant:"rectangular",width:"100%",height:120}),(0,i.jsx)(n.A,{variant:"text",width:"60%",height:20})]}),l=()=>(0,i.jsxs)(s.A,{sx:{p:3},children:[(0,i.jsx)(n.A,{variant:"text",width:"30%",height:40,sx:{mb:3}}),(0,i.jsxs)(s.A,{sx:{display:"flex",gap:2,mb:3},children:[(0,i.jsx)(n.A,{variant:"rectangular",width:200,height:40}),(0,i.jsx)(n.A,{variant:"rectangular",width:150,height:40})]}),(0,i.jsx)(s.A,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:3},children:[1,2,3,4].map(e=>(0,i.jsx)(o,{height:250},e))})]}),d=()=>(0,i.jsxs)(s.A,{sx:{p:3},children:[(0,i.jsx)(n.A,{variant:"text",width:"25%",height:40,sx:{mb:3}}),(0,i.jsx)(s.A,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:3},children:[1,2,3].map(e=>(0,i.jsxs)(r.A,{elevation:2,sx:{p:2},children:[(0,i.jsx)(n.A,{variant:"text",width:"60%",height:24,sx:{mb:2}}),(0,i.jsx)(n.A,{variant:"text",width:"100%",height:16,sx:{mb:1}}),(0,i.jsx)(n.A,{variant:"text",width:"80%",height:16,sx:{mb:2}}),(0,i.jsx)(n.A,{variant:"rectangular",width:"100%",height:100})]},e))})]})},81702:(e,t,a)=>{a.d(t,{A:()=>m});var r=a(65043),n=a(63336),s=a(96446),i=a(85865),o=a(11906),c=a(15896),l=a(47805),d=a(70579);class h extends r.Component{constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?(0,d.jsx)(n.A,{elevation:2,sx:{p:4,m:2},children:(0,d.jsxs)(s.A,{sx:{textAlign:"center"},children:[(0,d.jsx)(c.A,{sx:{fontSize:64,color:"error.main",mb:2}}),(0,d.jsx)(i.A,{variant:"h5",gutterBottom:!0,color:"error",children:"Something went wrong"}),(0,d.jsx)(i.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"We encountered an error while loading the analytics data. Please try again."}),!1,(0,d.jsx)(o.A,{variant:"contained",startIcon:(0,d.jsx)(l.A,{}),onClick:this.handleRetry,sx:{mt:2},children:"Try Again"})]})}):this.props.children}}const m=h}}]);
//# sourceMappingURL=6664.1814997d.chunk.js.map