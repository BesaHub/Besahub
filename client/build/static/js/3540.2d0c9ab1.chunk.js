"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[3540],{16597:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(65043);const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{threshold:t=.1,rootMargin:a="0px",triggerOnce:o=!0,initialVisible:i=!1}=e,s=(0,n.useRef)(null),[r,c]=(0,n.useState)(i);return(0,n.useEffect)(()=>{const e=new IntersectionObserver(t=>{let[a]=t;a.isIntersecting?(c(!0),o&&s.current&&e.unobserve(s.current)):o||c(!1)},{threshold:t,rootMargin:a}),n=s.current;return n&&e.observe(n),()=>{n&&e.unobserve(n)}},[t,a,o]),[s,r]}},39705:(e,t,a)=>{a.d(t,{TP:()=>o});var n=a(94505);const o={getContacts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(e).toString(),a="/contacts".concat(t?"?".concat(t):"");return(await n.Ay.get(a)).data}catch(t){throw console.error("Error fetching contacts:",t),t}},getContact:async e=>{try{return(await n.Ay.get("/contacts/".concat(e))).data}catch(t){throw console.error("Error fetching contact:",t),t}},createContact:async e=>{try{return(await n.Ay.post("/contacts",e)).data}catch(t){throw console.error("Error creating contact:",t),t}},updateContact:async(e,t)=>{try{return(await n.Ay.put("/contacts/".concat(e),t)).data}catch(a){throw console.error("Error updating contact:",a),a}},deleteContact:async e=>{try{return(await n.Ay.delete("/contacts/".concat(e))).data}catch(t){throw console.error("Error deleting contact:",t),t}}}},48309:(e,t,a)=>{a.d(t,{A:()=>c});a(65043);var n=a(96446),o=a(85865),i=a(11906),s=a(26240),r=a(70579);const c=e=>{let{icon:t,title:a,message:c,actionLabel:l,onAction:d}=e;const x=(0,s.A)();return(0,r.jsxs)(n.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:{xs:"300px",sm:"400px",md:"500px"},padding:x.spacing(4),textAlign:"center",animation:"fadeIn 0.6s ease-out","@keyframes fadeIn":{from:{opacity:0,transform:"translateY(20px)"},to:{opacity:1,transform:"translateY(0)"}}},children:[(0,r.jsx)(n.A,{sx:{position:"relative",mb:x.spacing(4),animation:"scaleIn 0.5s ease-out",animationDelay:"0.2s",animationFillMode:"both","@keyframes scaleIn":{from:{transform:"scale(0.8)",opacity:0},to:{transform:"scale(1)",opacity:1}}},children:(0,r.jsx)(n.A,{sx:{width:{xs:80,sm:100,md:120},height:{xs:80,sm:100,md:120},borderRadius:"50%",background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative","&::before":{content:'""',position:"absolute",top:-2,left:-2,right:-2,bottom:-2,background:x.palette.gradient.primary,borderRadius:"50%",zIndex:-1,opacity:.2}},children:t&&(0,r.jsx)(n.A,{sx:{background:x.palette.gradient.primary,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(t,{sx:{fontSize:{xs:40,sm:50,md:60},opacity:1,filter:"drop-shadow(0 2px 4px rgba(102, 126, 234, 0.2))"}})})})}),(0,r.jsxs)(n.A,{sx:{maxWidth:{xs:"100%",sm:500,md:600},mb:x.spacing(2),animation:"fadeInUp 0.6s ease-out",animationDelay:"0.3s",animationFillMode:"both","@keyframes fadeInUp":{from:{opacity:0,transform:"translateY(20px)"},to:{opacity:1,transform:"translateY(0)"}}},children:[(0,r.jsx)(o.A,{variant:"h4",sx:{fontWeight:700,mb:x.spacing(2),background:x.palette.gradient.primary,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontSize:{xs:"1.5rem",sm:"1.875rem",md:"2.125rem"},letterSpacing:"-0.01em"},children:a}),(0,r.jsx)(o.A,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.875rem",sm:"1rem"},lineHeight:1.6,px:{xs:2,sm:0}},children:c})]}),l&&d&&(0,r.jsx)(n.A,{sx:{animation:"fadeInUp 0.6s ease-out",animationDelay:"0.4s",animationFillMode:"both"},children:(0,r.jsx)(i.A,{variant:"contained",onClick:d,sx:{background:x.palette.gradient.primary,color:"white",padding:{xs:"10px 24px",sm:"12px 32px"},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:600,borderRadius:3,textTransform:"none",boxShadow:"0 8px 24px rgba(102, 126, 234, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{background:"linear-gradient(135deg, #5568d3 0%, #653a8b 100%)",boxShadow:"0 12px 32px rgba(102, 126, 234, 0.4)",transform:"translateY(-2px)"},"&:active":{transform:"translateY(0)",boxShadow:"0 6px 16px rgba(102, 126, 234, 0.3)"}},children:l})})]})}},53831:(e,t,a)=>{a.d(t,{Qv:()=>h,x_:()=>x});a(65043);var n=a(28076),o=a(10039),i=a(78185),s=a(96446),r=a(68903),c=a(12110),l=a(26494),d=a(70579);const x=e=>{let{rows:t=5}=e;return(0,d.jsx)(d.Fragment,{children:[...Array(t)].map((e,t)=>(0,d.jsxs)(n.A,{children:[(0,d.jsx)(o.A,{children:(0,d.jsx)(i.A,{variant:"text",width:"80%",height:24,animation:"wave"})}),(0,d.jsx)(o.A,{children:(0,d.jsx)(i.A,{variant:"text",width:"90%",height:24,animation:"wave"})}),(0,d.jsx)(o.A,{children:(0,d.jsx)(i.A,{variant:"text",width:"70%",height:24,animation:"wave"})}),(0,d.jsx)(o.A,{children:(0,d.jsx)(i.A,{variant:"text",width:"60%",height:24,animation:"wave"})}),(0,d.jsx)(o.A,{align:"right",children:(0,d.jsxs)(s.A,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[(0,d.jsx)(i.A,{variant:"circular",width:32,height:32,animation:"wave"}),(0,d.jsx)(i.A,{variant:"circular",width:32,height:32,animation:"wave"})]})})]},t))})},h=e=>{let{count:t=6}=e;return(0,d.jsx)(r.Ay,{container:!0,spacing:3,children:[...Array(t)].map((e,t)=>(0,d.jsx)(r.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,d.jsx)(c.A,{sx:{height:"100%",borderRadius:3,boxShadow:"0 4px 6px rgba(0,0,0,0.07)"},children:(0,d.jsxs)(l.A,{sx:{p:3},children:[(0,d.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,d.jsx)(i.A,{variant:"circular",width:48,height:48,animation:"wave",sx:{mr:2}}),(0,d.jsxs)(s.A,{sx:{flex:1},children:[(0,d.jsx)(i.A,{variant:"text",width:"70%",height:28,animation:"wave",sx:{mb:.5}}),(0,d.jsx)(i.A,{variant:"text",width:"50%",height:20,animation:"wave"})]})]}),(0,d.jsxs)(s.A,{sx:{mb:2},children:[(0,d.jsx)(i.A,{variant:"text",width:"100%",height:20,animation:"wave",sx:{mb:1}}),(0,d.jsx)(i.A,{variant:"text",width:"90%",height:20,animation:"wave",sx:{mb:1}}),(0,d.jsx)(i.A,{variant:"text",width:"80%",height:20,animation:"wave"})]}),(0,d.jsxs)(s.A,{sx:{display:"flex",gap:1,mb:2},children:[(0,d.jsx)(i.A,{variant:"rounded",width:80,height:28,animation:"wave",sx:{borderRadius:2}}),(0,d.jsx)(i.A,{variant:"rounded",width:70,height:28,animation:"wave",sx:{borderRadius:2}})]}),(0,d.jsxs)(s.A,{sx:{display:"flex",gap:1.5,pt:2,mt:2,borderTop:1,borderColor:"divider"},children:[(0,d.jsx)(i.A,{variant:"rounded",width:"48%",height:40,animation:"wave",sx:{borderRadius:2.5}}),(0,d.jsx)(i.A,{variant:"rounded",width:"48%",height:40,animation:"wave",sx:{borderRadius:2.5}})]})]})})},t))})}},73540:(e,t,a)=>{a.r(t),a.d(t,{default:()=>de});var n=a(89379),o=a(65043),i=a(26240),s=a(19252),r=a(96446),c=a(85865),l=a(43845),d=a(11906),x=a(63336),h=a(68903),m=a(67784),p=a(51787),u=a(53193),g=a(18356),A=a(72221),f=a(32143),y=a(33691),b=a(83462),j=a(26600),v=a(35316),w=a(29347),C=a(73158),S=a(67254),k=a(98045),z=a(15223),I=a(51387),D=a(5793),N=a(47805),W=a(44973),M=a(70141),R=a(79484),F=a(34190),E=a(15626),L=a(59893),P=a(73216),B=a(12110),T=a(93933),U=a(81045),O=a(26494),Y=a(77739),H=a(17392),V=a(10990),_=a(30839),$=a(1706),q=a(69320),Q=a(42796),X=a(67957),G=a(48132),K=a(84770),Z=a(18942),J=a(48262),ee=a(69974),te=a(91082),ae=a(3632),ne=a(70579);const oe=e=>{let{contact:t,onClick:a,onEmail:n,onCall:o,onAddToDeal:s,onViewDetails:d}=e;const x=(0,i.A)(),h=(e,t)=>{const a=e=>e>=1e6?"$".concat((e/1e6).toFixed(1),"M"):e>=1e3?"$".concat((e/1e3).toFixed(0),"K"):"$".concat(e);return e||t?e&&t?"".concat(a(e)," - ").concat(a(t)):t?"Up to ".concat(a(t)):e?"From ".concat(a(e)):null:null},m=e=>{const t=["#1976d2","#d32f2f","#388e3c","#f57c00","#7b1fa2","#0288d1","#c2185b","#00796b"];return t[(e.firstName||e.lastName||e.companyName||"").charCodeAt(0)%t.length]},p="company"===t.type?t.companyName:"".concat(t.firstName||""," ").concat(t.lastName||"").trim(),u="individual"===t.type&&t.companyName?t.companyName:t.title,g=(e=>{let t=0;"hot"===e.leadStatus?t+=30:"warm"===e.leadStatus?t+=20:"qualified"===e.leadStatus?t+=25:"converted"===e.leadStatus?t+=40:"cold"===e.leadStatus&&(t+=10),e.budgetMax&&e.budgetMax>5e6?t+=20:e.budgetMax&&e.budgetMax>1e6?t+=15:e.budgetMax&&(t+=10),"investor"===e.contactRole?t+=15:"buyer"===e.contactRole&&(t+=10),e.primaryEmail&&(t+=5),e.primaryPhone&&(t+=5);const a=e.lastContactDate?Math.floor((new Date-new Date(e.lastContactDate))/864e5):999;return a<7?t+=15:a<30?t+=10:a<90&&(t+=5),Math.min(Math.max(t,0),100)})(t),A=(f=g)>=80?{grade:"A",color:"#2e7d32",stars:5}:f>=60?{grade:"B",color:"#1976d2",stars:4}:f>=40?{grade:"C",color:"#ed6c02",stars:3}:{grade:"D",color:"#d32f2f",stars:2};var f;const y=(e=>{const t={hot:{gradient:x.palette.gradient.warning,icon:(0,ne.jsx)(V.A,{sx:{fontSize:12,color:"white"}}),label:"Hot Lead"},warm:{gradient:x.palette.gradient.info,icon:(0,ne.jsx)(_.A,{sx:{fontSize:12,color:"white"}}),label:"Warm Lead"},cold:{gradient:x.palette.gradient.secondary,icon:(0,ne.jsx)($.A,{sx:{fontSize:12,color:"white"}}),label:"Cold Lead"},qualified:{gradient:x.palette.gradient.success,icon:(0,ne.jsx)(q.A,{sx:{fontSize:12,color:"white"}}),label:"Qualified"},converted:{gradient:x.palette.gradient.secondary,icon:(0,ne.jsx)(Q.A,{sx:{fontSize:12,color:"white"}}),label:"Converted"},inactive:{gradient:x.palette.gradient.secondary,icon:null,label:"Inactive"},lost:{gradient:x.palette.gradient.secondary,icon:null,label:"Lost"}};return t[e]||t.cold})(t.leadStatus),b=(j=t.contactRole,{investor:{color:"secondary",icon:(0,ne.jsx)(X.A,{sx:{fontSize:11}}),label:"Investor"},tenant:{color:"primary",icon:(0,ne.jsx)(L.A,{sx:{fontSize:11}}),label:"Tenant"},landlord:{color:"success",icon:(0,ne.jsx)(G.A,{sx:{fontSize:11}}),label:"Landlord"},buyer:{color:"info",icon:(0,ne.jsx)(L.A,{sx:{fontSize:11}}),label:"Buyer"},seller:{color:"warning",icon:(0,ne.jsx)(K.A,{sx:{fontSize:11}}),label:"Seller"},broker:{color:"default",icon:(0,ne.jsx)(K.A,{sx:{fontSize:11}}),label:"Broker"},attorney:{color:"default",icon:(0,ne.jsx)(L.A,{sx:{fontSize:11}}),label:"Attorney"}}[j]||{color:"default",icon:(0,ne.jsx)(L.A,{sx:{fontSize:11}}),label:j});var j;return(0,ne.jsxs)(B.A,{onClick:()=>{a&&a(t)},sx:{display:"flex",flexDirection:"row",height:70,borderRadius:0,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",position:"relative",boxShadow:3,"&:hover":{transform:"translateY(-4px)",boxShadow:6,"& .quick-actions":{opacity:1,transform:"translateX(0)"}}},children:[(0,ne.jsx)(r.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:85,minWidth:85,background:"linear-gradient(135deg, ".concat(m(t),"15 0%, ").concat(m(t),"05 100%)"),borderRight:"3px solid ".concat(m(t),"30")},children:(0,ne.jsx)(T.A,{badgeContent:A.grade,sx:{"& .MuiBadge-badge":{backgroundColor:A.color,color:"white",fontWeight:700,fontSize:"0.65rem",minWidth:18,height:18,borderRadius:"50%"}},children:(0,ne.jsx)(U.A,{sx:{width:44,height:44,bgcolor:m(t),fontSize:"1rem",fontWeight:600,boxShadow:3},children:t.avatar?(0,ne.jsx)("img",{src:t.avatar,alt:p,style:{width:"100%",height:"100%",objectFit:"cover"}}):(v=t.firstName,w=t.lastName,C=t.companyName,v&&w?"".concat(v.charAt(0)).concat(w.charAt(0)).toUpperCase():C?C.split(" ").map(e=>e.charAt(0)).join("").substring(0,2).toUpperCase():"C")})})}),(0,ne.jsxs)(O.A,{sx:{p:1,flex:1,display:"flex",flexDirection:"column",justifyContent:"center","&:last-child":{pb:1}},children:[(0,ne.jsxs)(r.A,{sx:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",mb:.2},children:[(0,ne.jsxs)(r.A,{sx:{flex:1,minWidth:0},children:[(0,ne.jsx)(c.A,{variant:"subtitle2",sx:{fontWeight:600,fontSize:"0.875rem",lineHeight:1.2,mb:.2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p||"Unnamed Contact"}),u&&(0,ne.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:.3,mb:.2},children:[(0,ne.jsx)(K.A,{sx:{fontSize:11,color:"text.secondary"}}),(0,ne.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:u})]})]}),(0,ne.jsx)(r.A,{sx:{display:"flex",alignItems:"center",gap:.2,ml:1},children:(e=>{const t=[];for(let a=0;a<5;a++)a<e?t.push((0,ne.jsx)(q.A,{sx:{fontSize:10,color:"#ffc107"}},a)):t.push((0,ne.jsx)(Z.A,{sx:{fontSize:10,color:"#e0e0e0"}},a));return t})(A.stars)})]}),(0,ne.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1.5,flexWrap:"wrap",mb:.4},children:[t.primaryEmail&&(0,ne.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:.3},children:[(0,ne.jsx)(J.A,{sx:{fontSize:12,color:"text.secondary"}}),(0,ne.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:160},children:t.primaryEmail})]}),t.primaryPhone&&(0,ne.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:.3},children:[(0,ne.jsx)(ee.A,{sx:{fontSize:12,color:"text.secondary"}}),(0,ne.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem"},children:t.primaryPhone})]}),(t.mailingCity||t.mailingState)&&(0,ne.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:.3},children:[(0,ne.jsx)(te.A,{sx:{fontSize:12,color:"text.secondary"}}),(0,ne.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.mailingCity&&t.mailingState?"".concat(t.mailingCity,", ").concat(t.mailingState):t.mailingCity||t.mailingState})]}),h(t.budgetMin,t.budgetMax)&&(0,ne.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:.3},children:[(0,ne.jsx)(X.A,{sx:{fontSize:12,color:"text.secondary"}}),(0,ne.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",fontWeight:600},children:h(t.budgetMin,t.budgetMax)})]})]}),(0,ne.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:.5,flexWrap:"wrap"},children:[(0,ne.jsx)(l.A,{icon:b.icon,label:b.label,size:"small",color:b.color,sx:{fontWeight:600,fontSize:"0.65rem",height:16,"& .MuiChip-icon":{fontSize:10}}}),t.leadStatus&&(0,ne.jsx)(l.A,{icon:y.icon,label:y.label,size:"small",sx:{background:y.gradient,color:"white",fontWeight:700,fontSize:"0.65rem",backdropFilter:"blur(10px)",boxShadow:"0 4px 12px rgba(0,0,0,0.2)",height:16,"& .MuiChip-icon":{fontSize:10}}}),t.lastContactDate&&(0,ne.jsxs)(c.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.65rem",ml:"auto"},children:["Last contact: ",new Date(t.lastContactDate).toLocaleDateString()]})]})]}),(0,ne.jsxs)(r.A,{className:"quick-actions",sx:{position:"absolute",top:"50%",right:12,transform:"translateY(-50%) translateX(8px)",display:"flex",flexDirection:"column",gap:1,opacity:0,transition:"opacity 200ms cubic-bezier(0.4, 0, 0.2, 1), transform 200ms cubic-bezier(0.4, 0, 0.2, 1)",zIndex:2},children:[(0,ne.jsx)(Y.A,{title:"Send Email",placement:"left",children:(0,ne.jsx)(H.A,{size:"small",onClick:e=>{e.stopPropagation(),n?n(t):t.primaryEmail&&(window.location.href="mailto:".concat(t.primaryEmail))},disabled:!t.primaryEmail,sx:{background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)","&:hover":{background:"white",transform:"scale(1.1)"},"&:disabled":{background:"rgba(200,200,200,0.5)"}},children:(0,ne.jsx)(J.A,{fontSize:"small"})})}),(0,ne.jsx)(Y.A,{title:"Call",placement:"left",children:(0,ne.jsx)(H.A,{size:"small",onClick:e=>{e.stopPropagation(),o?o(t):t.primaryPhone&&(window.location.href="tel:".concat(t.primaryPhone))},disabled:!t.primaryPhone,sx:{background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)","&:hover":{background:"white",transform:"scale(1.1)"},"&:disabled":{background:"rgba(200,200,200,0.5)"}},children:(0,ne.jsx)(ee.A,{fontSize:"small"})})}),(0,ne.jsx)(Y.A,{title:"Add to Deal",placement:"left",children:(0,ne.jsx)(H.A,{size:"small",onClick:e=>{e.stopPropagation(),s&&s(t)},sx:{background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)","&:hover":{background:"white",transform:"scale(1.1)"}},children:(0,ne.jsx)(E.A,{fontSize:"small"})})}),(0,ne.jsx)(Y.A,{title:"View Details",placement:"left",children:(0,ne.jsx)(H.A,{size:"small",onClick:e=>{e.stopPropagation(),d?d(t):a&&a(t)},sx:{background:"rgba(255,255,255,0.9)",backdropFilter:"blur(10px)","&:hover":{background:"white",transform:"scale(1.1)"}},children:(0,ne.jsx)(ae.A,{fontSize:"small"})})})]})]});var v,w,C},ie=o.memo(oe);var se=a(53831),re=a(48309),ce=a(39705),le=a(16597);const de=()=>{var e,t,a;const B=(0,i.A)(),T=(0,P.Zp)(),[U,O]=(0,le.A)({threshold:.05,initialVisible:!0}),[Y,H]=(0,o.useState)([]),[V,_]=(0,o.useState)(!0),[$,q]=(0,o.useState)(""),[Q,X]=(0,o.useState)(""),[G,K]=(0,o.useState)(""),[Z,J]=(0,o.useState)(""),[ee,te]=(0,o.useState)(""),[ae,oe]=(0,o.useState)("lastContactDate"),[de,xe]=(0,o.useState)("desc"),[he,me]=(0,o.useState)({min:"",max:""}),[pe,ue]=(0,o.useState)(!1),[ge,Ae]=(0,o.useState)([]),[fe,ye]=(0,o.useState)(!1),[be,je]=(0,o.useState)({open:!1,contact:null}),[ve,we]=(0,o.useState)({open:!1,action:"",contacts:[]}),[Ce,Se]=(0,o.useState)({open:!1,message:"",severity:"success"}),[ke,ze]=(0,o.useState)(1),Ie=12;(0,o.useEffect)(()=>{(async()=>{try{_(!0);const e=await ce.TP.getContacts({page:1,limit:100});H(e.contacts||[])}catch(e){console.error("Failed to fetch contacts:",e),H([]),Se({open:!0,message:"Failed to load contacts. Please try again.",severity:"error"})}finally{_(!1)}})()},[]);const De=(0,o.useMemo)(()=>{let e=Y.filter(e=>{var t,a,n,o,i,s,r;const c=!$||(null===(t=e.firstName)||void 0===t?void 0:t.toLowerCase().includes($.toLowerCase()))||(null===(a=e.lastName)||void 0===a?void 0:a.toLowerCase().includes($.toLowerCase()))||(null===(n=e.companyName)||void 0===n?void 0:n.toLowerCase().includes($.toLowerCase()))||(null===(o=e.primaryEmail)||void 0===o?void 0:o.toLowerCase().includes($.toLowerCase()))||(null===(i=e.title)||void 0===i?void 0:i.toLowerCase().includes($.toLowerCase()))||(null===(s=e.primaryPhone)||void 0===s?void 0:s.includes($)),l=!Q||e.contactRole===Q,d=!G||e.leadStatus===G,x=!Z||(null===(r=e.mailingCity)||void 0===r?void 0:r.toLowerCase().includes(Z.toLowerCase())),h=!ee||e.mailingState===ee;let m=!0;if(he.min||he.max){const t=e.budgetMax||0,a=e.budgetMin||0,n=he.min?parseFloat(he.min):0,o=he.max?parseFloat(he.max):1/0;m=t>=n&&a<=o}return c&&l&&d&&x&&h&&m});return e.sort((e,t)=>{let a,n;switch(ae){case"name":a="".concat(e.firstName||""," ").concat(e.lastName||"").trim(),n="".concat(t.firstName||""," ").concat(t.lastName||"").trim();break;case"company":a=e.companyName||"",n=t.companyName||"";break;case"lastContactDate":a=new Date(e.lastContactDate||0),n=new Date(t.lastContactDate||0);break;case"budget":a=e.budgetMax||0,n=t.budgetMax||0;break;case"status":a=e.leadStatus||"",n=t.leadStatus||"";break;default:return 0}return a<n?"asc"===de?-1:1:a>n?"asc"===de?1:-1:0}),e},[Y,$,Q,G,Z,ee,he,ae,de]),Ne=(0,o.useMemo)(()=>{const e=(ke-1)*Ie,t=e+Ie;return De.slice(e,t)},[De,ke,Ie]),We=Math.ceil(De.length/Ie),Me=0===De.length?0:(ke-1)*Ie+1,Re=Math.min(ke*Ie,De.length);(0,o.useEffect)(()=>{ke>We&&We>0&&ze(1)},[ke,We]);const Fe=(0,o.useCallback)(e=>{T("/contacts/".concat(e.id))},[T]),Ee=(0,o.useCallback)(()=>{T("/contacts/new")},[T]),Le=(0,o.useCallback)(()=>{T("/contacts/import")},[T]),Pe=(0,o.useCallback)((e,t)=>{ze(t),window.scrollTo({top:0,behavior:"smooth"})},[]),Be=()=>{ye(!fe),Ae([])},Te=e=>{const t=Y.filter(e=>ge.includes(e.id));we({open:!0,action:e,contacts:t})},Ue=e=>{if(!e)return"";const t=String(e);return/^[=+\-@]/.test(t)?"'".concat(t):t},Oe=e=>[["Name","Company","Email","Phone","Role","Status","City","State","Budget Max"],...e.map(e=>[Ue("".concat(e.firstName||""," ").concat(e.lastName||"").trim()),Ue(e.companyName||""),Ue(e.primaryEmail||""),Ue(e.primaryPhone||""),Ue(e.contactRole||""),Ue(e.leadStatus||""),Ue(e.mailingCity||""),Ue(e.mailingState||""),Ue(e.budgetMax||"")])].map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n"),Ye=(e,t)=>{const a=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a");n.href=URL.createObjectURL(a),n.download=t,n.click()},He=()=>{q(""),X(""),K(""),J(""),te(""),me({min:"",max:""}),oe("lastContactDate"),xe("desc")},Ve=[$,Q,G,Z,ee,he.min,he.max].filter(Boolean).length,_e=[...new Set(Y.map(e=>e.mailingState).filter(Boolean))].sort(),$e=[...new Set(Y.map(e=>e.contactRole).filter(Boolean))].sort(),qe=[...new Set(Y.map(e=>e.leadStatus).filter(Boolean))].sort(),Qe=e=>{e.primaryEmail&&(window.location.href="mailto:".concat(e.primaryEmail))},Xe=e=>{e.primaryPhone&&(window.location.href="tel:".concat(e.primaryPhone))},Ge=e=>{Se({open:!0,message:"Adding ".concat(e.firstName||e.companyName," to a deal..."),severity:"info"}),T("/deals/new",{state:{contact:e}})};return(0,ne.jsxs)(s.A,{maxWidth:"xl",sx:{py:B.spacing(2)},children:[(0,ne.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:B.spacing(2),animation:"fadeInScale 0.6s ease-out"},children:[(0,ne.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:B.spacing(1.5)},children:[(0,ne.jsxs)(r.A,{children:[(0,ne.jsx)(c.A,{variant:"h5",sx:{fontWeight:700,mb:0},children:"Contacts & Leads"}),(0,ne.jsxs)(c.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem"},children:[Y.length," total contacts"]})]}),fe&&ge.length>0&&(0,ne.jsx)(l.A,{label:"".concat(ge.length," selected"),color:"primary",size:"small"})]}),(0,ne.jsx)(r.A,{sx:{display:"flex",gap:B.spacing(1)},children:fe?(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(d.A,{variant:"outlined",startIcon:(0,ne.jsx)(k.A,{}),onClick:()=>{ge.length===De.length?Ae([]):Ae(De.map(e=>e.id))},disabled:0===De.length,children:ge.length===De.length?"Deselect All":"Select All"}),(0,ne.jsxs)(d.A,{variant:"outlined",startIcon:(0,ne.jsx)(z.A,{}),onClick:()=>Te("export"),disabled:0===ge.length,children:["Export (",ge.length,")"]}),(0,ne.jsxs)(d.A,{variant:"outlined",color:"error",startIcon:(0,ne.jsx)(I.A,{}),onClick:()=>Te("delete"),disabled:0===ge.length,children:["Delete (",ge.length,")"]}),(0,ne.jsx)(d.A,{variant:"text",onClick:Be,children:"Cancel"})]}):(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(d.A,{variant:"outlined",startIcon:(0,ne.jsx)(D.A,{}),onClick:Be,sx:{borderRadius:3},children:"Select"}),(0,ne.jsx)(d.A,{variant:"outlined",onClick:async()=>{_(!0);try{const e=await ce.TP.getContacts({page:1,limit:100});H(e.contacts||[]),Se({open:!0,message:"Contacts updated successfully",severity:"success"})}catch(e){console.error("Failed to refresh contacts:",e),H([]),Se({open:!0,message:"Failed to refresh contacts. Please try again.",severity:"error"})}finally{_(!1)}},disabled:V,sx:{borderRadius:3},startIcon:(0,ne.jsx)(N.A,{className:"icon-spin-hover"}),children:"Refresh"}),(0,ne.jsx)(d.A,{variant:"outlined",startIcon:(0,ne.jsx)(W.A,{}),onClick:Le,sx:{borderRadius:3},children:"Import"}),(0,ne.jsx)(d.A,{variant:"contained",startIcon:(0,ne.jsx)(M.A,{}),onClick:Ee,sx:{borderRadius:3},children:"Add Contact"})]})})]}),(0,ne.jsxs)(x.A,{elevation:2,sx:{py:1,px:1.5,mb:B.spacing(2),borderRadius:3},children:[(0,ne.jsxs)(h.Ay,{container:!0,spacing:1,alignItems:"center",sx:{mb:1},children:[(0,ne.jsx)(h.Ay,{item:!0,xs:12,md:3,children:(0,ne.jsx)(m.A,{fullWidth:!0,size:"small",placeholder:"Search contacts...",value:$,onChange:e=>q(e.target.value),InputProps:{startAdornment:(0,ne.jsx)(p.A,{position:"start",children:(0,ne.jsx)(R.A,{})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3,"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderWidth:"2px",borderImage:"".concat(B.palette.gradient.primary," 1")}}}})}),(0,ne.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ne.jsxs)(u.A,{fullWidth:!0,size:"small",children:[(0,ne.jsx)(g.A,{children:"Role"}),(0,ne.jsxs)(A.A,{value:Q,label:"Role",onChange:e=>X(e.target.value),sx:{borderRadius:3},children:[(0,ne.jsx)(f.A,{value:"",children:"All Roles"}),$e.map(e=>(0,ne.jsx)(f.A,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]})}),(0,ne.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ne.jsxs)(u.A,{fullWidth:!0,size:"small",children:[(0,ne.jsx)(g.A,{children:"Status"}),(0,ne.jsxs)(A.A,{value:G,label:"Status",onChange:e=>K(e.target.value),sx:{borderRadius:3},children:[(0,ne.jsx)(f.A,{value:"",children:"All Status"}),qe.map(e=>(0,ne.jsx)(f.A,{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))]})]})}),(0,ne.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ne.jsxs)(u.A,{fullWidth:!0,size:"small",children:[(0,ne.jsx)(g.A,{children:"Sort By"}),(0,ne.jsxs)(A.A,{value:ae,label:"Sort By",onChange:e=>oe(e.target.value),sx:{borderRadius:3},children:[(0,ne.jsx)(f.A,{value:"lastContactDate",children:"Last Contact"}),(0,ne.jsx)(f.A,{value:"name",children:"Name"}),(0,ne.jsx)(f.A,{value:"company",children:"Company"}),(0,ne.jsx)(f.A,{value:"budget",children:"Budget"}),(0,ne.jsx)(f.A,{value:"status",children:"Status"})]})]})}),(0,ne.jsx)(h.Ay,{item:!0,xs:12,md:1,children:(0,ne.jsx)(d.A,{variant:"outlined",onClick:()=>xe("asc"===de?"desc":"asc"),size:"large",sx:{minWidth:"auto",px:1},children:"asc"===de?"\u2191":"\u2193"})}),(0,ne.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ne.jsx)(d.A,{variant:pe?"contained":"outlined",startIcon:(0,ne.jsx)(F.A,{}),onClick:()=>ue(!pe),fullWidth:!0,children:pe?"Hide":"Advanced"})})]}),pe&&(0,ne.jsxs)(r.A,{sx:{borderTop:"1px solid ".concat(B.palette.divider),pt:1},children:[(0,ne.jsx)(c.A,{variant:"caption",sx:{mb:1,color:"text.secondary",fontSize:"0.75rem",display:"block"},children:"Advanced Filters"}),(0,ne.jsxs)(h.Ay,{container:!0,spacing:1,alignItems:"center",children:[(0,ne.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ne.jsx)(m.A,{fullWidth:!0,size:"small",label:"City",value:Z,onChange:e=>J(e.target.value),placeholder:"Any city"})}),(0,ne.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ne.jsxs)(u.A,{fullWidth:!0,size:"small",children:[(0,ne.jsx)(g.A,{children:"State"}),(0,ne.jsxs)(A.A,{value:ee,label:"State",onChange:e=>te(e.target.value),children:[(0,ne.jsx)(f.A,{value:"",children:"All States"}),_e.map(e=>(0,ne.jsx)(f.A,{value:e,children:e},e))]})]})}),(0,ne.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ne.jsx)(m.A,{fullWidth:!0,size:"small",label:"Min Budget",type:"number",value:he.min,onChange:e=>me(t=>(0,n.A)((0,n.A)({},t),{},{min:e.target.value})),placeholder:"0",InputProps:{startAdornment:(0,ne.jsx)(p.A,{position:"start",children:"$"})}})}),(0,ne.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ne.jsx)(m.A,{fullWidth:!0,size:"small",label:"Max Budget",type:"number",value:he.max,onChange:e=>me(t=>(0,n.A)((0,n.A)({},t),{},{max:e.target.value})),placeholder:"Any",InputProps:{startAdornment:(0,ne.jsx)(p.A,{position:"start",children:"$"})}})}),(0,ne.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ne.jsxs)(d.A,{variant:"outlined",color:"error",onClick:He,disabled:0===Ve,fullWidth:!0,children:["Clear All ",Ve>0&&"(".concat(Ve,")")]})}),(0,ne.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ne.jsx)(d.A,{variant:"text",onClick:()=>ue(!1),fullWidth:!0,children:"Hide Advanced"})})]})]})]}),(0,ne.jsxs)(r.A,{sx:{mb:B.spacing(3),display:"flex",alignItems:"center",gap:B.spacing(2)},children:[(0,ne.jsx)(c.A,{variant:"h6",sx:{fontWeight:600},children:De.length>0?"Showing ".concat(Me,"-").concat(Re," of ").concat(De.length," ").concat(1===De.length?"contact":"contacts"):"No contacts found"}),Ve>0&&(0,ne.jsx)(l.A,{label:"".concat(Ve," filter").concat(Ve>1?"s":""," active"),color:"primary",size:"small",onDelete:He})]}),V?(0,ne.jsx)(se.Qv,{count:12}):0===De.length?0===Y.length?(0,ne.jsx)(re.A,{icon:E.A,title:"No contacts yet",message:"Get started by adding your first contact to your CRM",actionLabel:"Add Contact",onAction:Ee}):(0,ne.jsxs)(x.A,{elevation:2,sx:{textAlign:"center",py:B.spacing(8),px:B.spacing(3),borderRadius:2,background:B.palette.gradient.primary,color:"white"},children:[(0,ne.jsx)(L.A,{sx:{fontSize:64,mb:B.spacing(2),opacity:.8}}),(0,ne.jsx)(c.A,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600},children:"No Contacts Found"}),(0,ne.jsx)(c.A,{variant:"body1",sx:{mb:B.spacing(3),opacity:.9,fontSize:"0.875rem"},children:"Try adjusting your search or filter criteria to find contacts"}),(0,ne.jsxs)(r.A,{sx:{display:"flex",gap:B.spacing(2),justifyContent:"center",flexWrap:"wrap"},children:[(0,ne.jsx)(d.A,{variant:"contained",startIcon:(0,ne.jsx)(M.A,{}),onClick:Ee,sx:{bgcolor:"white",color:"primary.main","&:hover":{bgcolor:"grey.100"}},children:"Add Contact"}),Ve>0&&(0,ne.jsx)(d.A,{variant:"outlined",onClick:He,sx:{borderColor:"white",color:"white","&:hover":{borderColor:"white",bgcolor:"rgba(255,255,255,0.1)"}},children:"Clear Filters"})]})]}):(0,ne.jsxs)(ne.Fragment,{children:[(0,ne.jsx)(r.A,{ref:U,sx:{opacity:O?1:0,transform:O?"translateY(0)":"translateY(30px)",transition:"all 0.6s ease-out"},children:(0,ne.jsx)(h.Ay,{container:!0,spacing:1.5,children:Ne.map((e,t)=>(0,ne.jsx)(h.Ay,{item:!0,xs:12,sx:{animation:"fadeInUp 0.6s ease-out",animationDelay:"".concat(.1*t,"s"),animationFillMode:"both"},children:(0,ne.jsx)(ie,{contact:e,onClick:Fe,onEmail:Qe,onCall:Xe,onAddToDeal:Ge,onViewDetails:Fe})},e.id))})}),De.length>0&&We>1&&(0,ne.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",mt:2},children:(0,ne.jsx)(y.A,{count:We,page:ke,onChange:Pe,color:"primary",size:"medium",showFirstButton:!0,showLastButton:!0})})]}),(0,ne.jsxs)(b.A,{open:be.open,onClose:()=>je({open:!1,contact:null}),children:[(0,ne.jsx)(j.A,{children:"Delete Contact"}),(0,ne.jsx)(v.A,{children:(0,ne.jsxs)(c.A,{children:["Are you sure you want to delete ",null===(e=be.contact)||void 0===e?void 0:e.firstName," ",null===(t=be.contact)||void 0===t?void 0:t.lastName,(null===(a=be.contact)||void 0===a?void 0:a.companyName)&&" (".concat(be.contact.companyName,")"),"? This action cannot be undone."]})}),(0,ne.jsxs)(w.A,{children:[(0,ne.jsx)(d.A,{onClick:()=>je({open:!1,contact:null}),children:"Cancel"}),(0,ne.jsx)(d.A,{onClick:async()=>{try{await ce.TP.deleteContact(be.contact.id),H(e=>e.filter(e=>e.id!==be.contact.id)),Se({open:!0,message:"Contact deleted successfully",severity:"success"})}catch(e){console.error("Failed to delete contact:",e),Se({open:!0,message:"Failed to delete contact. Please try again.",severity:"error"})}je({open:!1,contact:null})},color:"error",variant:"contained",children:"Delete"})]})]}),(0,ne.jsxs)(b.A,{open:ve.open,onClose:()=>we({open:!1,action:"",contacts:[]}),maxWidth:"sm",fullWidth:!0,children:[(0,ne.jsxs)(j.A,{children:["Confirm Bulk ","delete"===ve.action?"Delete":"export"===ve.action?"Export":"Action"]}),(0,ne.jsxs)(v.A,{children:[(0,ne.jsxs)(c.A,{gutterBottom:!0,children:["delete"===ve.action&&"Are you sure you want to delete ".concat(ve.contacts.length," contact").concat(ve.contacts.length>1?"s":"","? This action cannot be undone."),"export"===ve.action&&"Export ".concat(ve.contacts.length," contact").concat(ve.contacts.length>1?"s":""," to CSV file?"),"updateStatus"===ve.action&&"Update status for ".concat(ve.contacts.length," contact").concat(ve.contacts.length>1?"s":"","?")]}),ve.contacts.length>0&&(0,ne.jsxs)(r.A,{sx:{mt:2,maxHeight:200,overflow:"auto"},children:[(0,ne.jsx)(c.A,{variant:"subtitle2",gutterBottom:!0,children:"Selected contacts:"}),ve.contacts.slice(0,5).map(e=>(0,ne.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["\u2022 ",e.firstName," ",e.lastName," ",e.companyName&&"(".concat(e.companyName,")")]},e.id)),ve.contacts.length>5&&(0,ne.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["... and ",ve.contacts.length-5," more"]})]})]}),(0,ne.jsxs)(w.A,{children:[(0,ne.jsx)(d.A,{onClick:()=>we({open:!1,action:"",contacts:[]}),children:"Cancel"}),(0,ne.jsx)(d.A,{onClick:async()=>{const{action:e,contacts:t}=ve;try{switch(e){case"delete":const e={success:[],failed:[]};for(const o of t)try{await ce.TP.deleteContact(o.id),e.success.push(o.id)}catch(a){console.error("Failed to delete contact ".concat(o.id,":"),a),e.failed.push(o.id)}e.success.length>0&&H(t=>t.filter(t=>!e.success.includes(t.id))),0===e.failed.length?Se({open:!0,message:"Successfully deleted ".concat(e.success.length," contact(s)"),severity:"success"}):0===e.success.length?Se({open:!0,message:"Failed to delete ".concat(e.failed.length," contact(s)"),severity:"error"}):Se({open:!0,message:"Deleted ".concat(e.success.length," of ").concat(t.length," contacts. ").concat(e.failed.length," failed."),severity:"warning"});break;case"updateStatus":Se({open:!0,message:"Status updated for ".concat(t.length," contacts"),severity:"success"});break;case"export":const n=Oe(t);Ye(n,"selected_contacts.csv"),Se({open:!0,message:"".concat(t.length," contacts exported successfully"),severity:"success"})}Ae([]),ye(!1)}catch(n){Se({open:!0,message:"Failed to ".concat(e," contacts"),severity:"error"})}finally{we({open:!1,action:"",contacts:[]})}},color:"delete"===ve.action?"error":"primary",variant:"contained",children:"delete"===ve.action?"Delete":"export"===ve.action?"Export":"Confirm"})]})]}),(0,ne.jsx)(C.A,{open:Ce.open,autoHideDuration:6e3,onClose:()=>Se((0,n.A)((0,n.A)({},Ce),{},{open:!1})),children:(0,ne.jsx)(S.A,{onClose:()=>Se((0,n.A)((0,n.A)({},Ce),{},{open:!1})),severity:Ce.severity,sx:{width:"100%"},children:Ce.message})})]})}}}]);
//# sourceMappingURL=3540.2d0c9ab1.chunk.js.map