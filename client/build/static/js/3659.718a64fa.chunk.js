"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[3659],{3659:(e,o,s)=>{s.r(o),s.d(o,{default:()=>b});var n=s(89379),r=s(65043),t=s(73216),a=s(35475),i=s(96446),l=s(85865),c=s(67784),d=s(67254),m=s(11906),x=s(81637),u=s(19252),p=s(63336),h=s(39336),g=s(35016),A=s(13269),y=s(70579);const b=e=>{var o,s;let{onSuccess:b,embedded:S=!1}=e;const v=(0,t.Zp)(),{login:j,loginError:f,isLoginLoading:E}=(0,g.h)(),[C,k]=(0,r.useState)({email:"admin@demo.com",password:"Admin@Demo123"}),[w,_]=(0,r.useState)(null),F=e=>{k((0,n.A)((0,n.A)({},C),{},{[e.target.name]:e.target.value}))},D=e=>{_(e)},P=()=>{_(null)},R=()=>{_(null)},T=async e=>{e.preventDefault(),console.log("\ud83d\udd10 Login form submitted with:",(0,n.A)((0,n.A)({},C),{},{password:"***"}));try{console.log("\ud83d\ude80 Calling login function...");const e=(0,n.A)({},C);w&&(e.captchaToken=w);const o=await j(e);if(console.log("\u2705 Login successful, result:",o),null!==o&&void 0!==o&&o.requiresMfa&&null!==o&&void 0!==o&&o.tempToken)return console.log("\ud83d\udd10 MFA verification required, redirecting..."),void v("/mfa/verify",{state:{tempToken:o.tempToken}});b?(console.log("\ud83d\udcde Calling onSuccess callback"),b()):console.log("\u26a0\ufe0f No onSuccess callback provided")}catch(r){var o,s;console.error("\u274c Login error in form handler:",r),console.error("\u274c Error details:",{message:r.message,response:null===(o=r.response)||void 0===o?void 0:o.data,status:null===(s=r.response)||void 0===s?void 0:s.status,stack:r.stack})}};var W,I;return S?(0,y.jsxs)(i.A,{sx:{p:4},children:[(0,y.jsxs)(i.A,{sx:{textAlign:"center",mb:4},children:[(0,y.jsxs)(l.A,{variant:"h3",component:"h1",sx:{fontWeight:700,mb:2,letterSpacing:"-0.5px"},children:[(0,y.jsx)(i.A,{component:"span",sx:{color:"#1976d2",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "SF Pro Display", Roboto, sans-serif'},children:"Besa"}),(0,y.jsx)(i.A,{component:"span",sx:{color:"#7c3aed",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "SF Pro Display", Roboto, sans-serif'},children:"Hub"})]}),(0,y.jsx)(l.A,{variant:"h6",color:"textSecondary",children:"Sign in to your account"})]}),(0,y.jsxs)("form",{onSubmit:T,children:[(0,y.jsxs)(i.A,{sx:{mb:3},children:[(0,y.jsx)(c.A,{fullWidth:!0,label:"Email Address",name:"email",type:"email",value:C.email,onChange:F,required:!0,autoComplete:"email",sx:{mb:2}}),(0,y.jsx)(c.A,{fullWidth:!0,label:"Password",name:"password",type:"password",value:C.password,onChange:F,required:!0,autoComplete:"current-password"})]}),(0,y.jsx)(A.A,{onSuccess:D,onError:P,onExpire:R}),f&&(0,y.jsx)(d.A,{severity:"error",sx:{mb:2},children:(null===(W=f.response)||void 0===W||null===(I=W.data)||void 0===I?void 0:I.error)||"Login failed. Please try again."}),(0,y.jsx)(m.A,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:E,sx:{mb:3,py:1.5,fontSize:"1.1rem"},children:E?(0,y.jsx)(x.A,{size:24}):"Sign In"})]}),(0,y.jsxs)(i.A,{sx:{mt:3,p:2,bgcolor:"grey.50",borderRadius:2},children:[(0,y.jsx)(l.A,{variant:"body2",color:"textSecondary",sx:{textAlign:"center",mb:1},children:(0,y.jsx)("strong",{children:"Demo Credentials:"})}),(0,y.jsxs)(l.A,{variant:"body2",color:"textSecondary",sx:{textAlign:"center"},children:["Email: admin@demo.com",(0,y.jsx)("br",{}),"Password: Admin@Demo123"]})]})]}):(0,y.jsx)(i.A,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",display:"flex",alignItems:"center",justifyContent:"center",py:3},children:(0,y.jsx)(u.A,{maxWidth:"sm",children:(0,y.jsxs)(p.A,{elevation:10,sx:{p:4,borderRadius:3,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)"},children:[(0,y.jsxs)(i.A,{sx:{textAlign:"center",mb:4},children:[(0,y.jsxs)(l.A,{variant:"h2",component:"h1",sx:{fontWeight:700,mb:2,letterSpacing:"-0.5px"},children:[(0,y.jsx)(i.A,{component:"span",sx:{color:"#1976d2",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "SF Pro Display", Roboto, sans-serif'},children:"Besa"}),(0,y.jsx)(i.A,{component:"span",sx:{color:"#7c3aed",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", "SF Pro Display", Roboto, sans-serif'},children:"Hub"})]}),(0,y.jsx)(l.A,{variant:"h6",color:"textSecondary",children:"Commercial Real Estate Management System"})]}),(0,y.jsxs)("form",{onSubmit:T,children:[(0,y.jsxs)(i.A,{sx:{mb:3},children:[(0,y.jsx)(c.A,{fullWidth:!0,label:"Email Address",name:"email",type:"email",value:C.email,onChange:F,required:!0,autoComplete:"email",autoFocus:!0,sx:{mb:2}}),(0,y.jsx)(c.A,{fullWidth:!0,label:"Password",name:"password",type:"password",value:C.password,onChange:F,required:!0,autoComplete:"current-password"})]}),(0,y.jsx)(A.A,{onSuccess:D,onError:P,onExpire:R}),f&&(0,y.jsx)(d.A,{severity:"error",sx:{mb:2},children:(null===(o=f.response)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.error)||"Login failed. Please try again."}),(0,y.jsx)(m.A,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:E,sx:{mb:3,py:1.5,fontSize:"1.1rem"},children:E?(0,y.jsx)(x.A,{size:24}):"Sign In"})]}),(0,y.jsx)(h.A,{sx:{my:3}}),(0,y.jsxs)(i.A,{sx:{textAlign:"center",mt:2},children:[(0,y.jsxs)(l.A,{variant:"body2",color:"textSecondary",children:["Don't have an account?"," ",(0,y.jsx)(a.N_,{to:"/register",style:{color:"#1976d2",textDecoration:"none"},children:"Sign up here"})]}),(0,y.jsx)(l.A,{variant:"body2",color:"textSecondary",sx:{mt:1},children:(0,y.jsx)(a.N_,{to:"/forgot-password",style:{color:"#1976d2",textDecoration:"none"},children:"Forgot your password?"})})]}),(0,y.jsx)(i.A,{sx:{mt:4,p:2,bgcolor:"#f5f5f5",borderRadius:2},children:(0,y.jsx)(l.A,{variant:"caption",color:"textSecondary",sx:{textAlign:"center",display:"block"},children:"Demo Credentials: admin@demo.com / Admin@Demo123"})})]})})})}},13269:(e,o,s)=>{s.d(o,{A:()=>l});var n=s(65043),r=s(94622),t=s(96446),a=s(67254),i=s(70579);const l=e=>{let{onSuccess:o,onError:s,onExpire:l}=e;const[c,d]=(0,n.useState)(null),m=(0,n.useRef)(null),x={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_TURNSTILE_SITE_KEY;return x?(0,i.jsxs)(t.A,{sx:{mb:2},children:[(0,i.jsx)(r.Xs,{ref:m,siteKey:x,onSuccess:e=>{d(null),o&&o(e)},onError:e=>{d("Captcha verification failed. Please try again."),s&&s(e)},onExpire:()=>{d("Captcha expired. Please verify again."),l&&l()},options:{theme:"light",size:"normal"}}),c&&(0,i.jsx)(a.A,{severity:"error",sx:{mt:1},children:c})]}):null}}}]);
//# sourceMappingURL=3659.718a64fa.chunk.js.map