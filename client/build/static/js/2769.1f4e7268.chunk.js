"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[2769],{16597:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(65043);const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{threshold:t=.1,rootMargin:s="0px",triggerOnce:i=!0,initialVisible:r=!1}=e,n=(0,a.useRef)(null),[l,o]=(0,a.useState)(r);return(0,a.useEffect)(()=>{const e=new IntersectionObserver(t=>{let[s]=t;s.isIntersecting?(o(!0),i&&n.current&&e.unobserve(n.current)):i||o(!1)},{threshold:t,rootMargin:s}),a=n.current;return a&&e.observe(a),()=>{a&&e.unobserve(a)}},[t,s,i]),[n,l]}},22769:(e,t,s)=>{s.r(t),s.d(t,{default:()=>ue});var a=s(89379),i=s(65043),r=s(82907),n=s(26240),l=s(19252),o=s(67254),d=s(11906),c=s(96446),x=s(85865),u=s(63336),h=s(88911),m=s(67784),p=s(51787),A=s(17392),g=s(53193),v=s(18356),j=s(72221),b=s(32143),y=s(71828),f=s(84511),k=s(79650),D=s(71806),w=s(84882),S=s(28076),C=s(10039),T=s(73460),I=s(77739),W=s(43845),z=s(83462),R=s(26600),P=s(35316),M=s(29347),F=s(73158),L=s(47805),_=s(70141),O=s(79484),U=s(30079),N=s(82236),Y=s(15337),E=s(34642),B=s(98606),Q=s(83560),H=s(51387),G=s(73216),q=s(94505),V=s(35016),Z=s(53831),J=s(48309),K=s(16597),X=s(68903),$=s(81673),ee=s(39336),te=s(81637),se=s(4694),ae=s(27795),ie=s(75275),re=s(33438),ne=s(37141),le=s(70579);const oe=[{value:"call",label:"Call"},{value:"email",label:"Email"},{value:"meeting",label:"Meeting"},{value:"follow_up",label:"Follow Up"},{value:"property_showing",label:"Property Showing"},{value:"document_review",label:"Document Review"},{value:"market_analysis",label:"Market Analysis"},{value:"site_visit",label:"Site Visit"},{value:"other",label:"Other"}],de=[{value:"pending",label:"Pending"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}],ce=[{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"urgent",label:"Urgent"}],xe=e=>{let{open:t,mode:s,task:r,onClose:l,onSuccess:c}=e;const u=(0,n.A)(),{user:h}=(0,V.h)(),[A,y]=(0,i.useState)({title:"",description:"",taskType:"other",status:"pending",priority:"medium",dueDate:"",startDate:"",reminderDate:"",notes:"",estimatedDuration:"",assignedToId:""}),[f,k]=(0,i.useState)({}),[D,w]=(0,i.useState)(!1),[S,C]=(0,i.useState)("");(0,i.useEffect)(()=>{if(t){if("edit"===s&&r){var e;const t=e=>{if(!e)return"";return new Date(e).toISOString().split("T")[0]},s=e=>{if(!e)return"";return new Date(e).toISOString().slice(0,16)};y({title:r.title||"",description:r.description||"",taskType:r.taskType||"other",status:r.status||"pending",priority:r.priority||"medium",dueDate:t(r.dueDate),startDate:t(r.startDate),reminderDate:s(r.reminderDate),notes:r.notes||"",estimatedDuration:(null===(e=r.estimatedDuration)||void 0===e?void 0:e.toString())||"",assignedToId:r.assignedToId||(null===h||void 0===h?void 0:h.id)})}else y({title:"",description:"",taskType:"other",status:"pending",priority:"medium",dueDate:"",startDate:"",reminderDate:"",notes:"",estimatedDuration:"",assignedToId:(null===h||void 0===h?void 0:h.id)||""});k({}),C("")}},[t,s,r]);const T=(e,t)=>{y(s=>(0,a.A)((0,a.A)({},s),{},{[e]:t})),f[e]&&k(t=>(0,a.A)((0,a.A)({},t),{},{[e]:""}))},I=()=>{D||l()};return(0,le.jsxs)(z.A,{open:t,onClose:I,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:u.shadows[20]}},children:[(0,le.jsxs)(R.A,{sx:{pb:2,borderBottom:"1px solid ".concat(u.palette.divider),display:"flex",alignItems:"center",gap:1},children:[(0,le.jsx)(Y.A,{sx:{color:u.palette.primary.main}}),(0,le.jsx)(x.A,{variant:"subtitle1",component:"span",sx:{fontWeight:600},children:"create"===s?"Create Task":"Edit Task"})]}),(0,le.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(A.title.trim()?A.title.length>200&&(e.title="Title must be 200 characters or less"):e.title="Title is required",A.estimatedDuration){const t=parseInt(A.estimatedDuration);(isNaN(t)||t<0)&&(e.estimatedDuration="Duration must be a positive number")}A.startDate&&A.dueDate&&new Date(A.startDate)>new Date(A.dueDate)&&(e.dueDate="Due date must be after start date");return k(e),0===Object.keys(e).length})())try{w(!0),C("");const e={title:A.title.trim(),description:A.description.trim(),taskType:A.taskType,status:A.status,priority:A.priority,dueDate:A.dueDate?new Date(A.dueDate).toISOString():null,startDate:A.startDate?new Date(A.startDate).toISOString():null,reminderDate:A.reminderDate?new Date(A.reminderDate).toISOString():null,notes:A.notes.trim(),estimatedDuration:A.estimatedDuration?parseInt(A.estimatedDuration):null,assignedToId:A.assignedToId||(null===h||void 0===h?void 0:h.id)};"create"===s?await q.WY.create(e):await q.WY.update(r.id,e),c&&c(),setTimeout(()=>{l()},300)}catch(o){var t,a,i,n;console.error("Error saving task:",o);const e=(null===(t=o.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||(null===(i=o.response)||void 0===i||null===(n=i.data)||void 0===n?void 0:n.error)||"Failed to ".concat("create"===s?"create":"update"," task");C(e)}finally{w(!1)}},children:[(0,le.jsxs)(P.A,{sx:{pt:2,pb:2},children:[S&&(0,le.jsx)(o.A,{severity:"error",sx:{mb:3},children:S}),(0,le.jsxs)(X.Ay,{container:!0,spacing:3,children:[(0,le.jsx)(X.Ay,{item:!0,xs:12,children:(0,le.jsx)(x.A,{variant:"subtitle2",sx:{fontWeight:600,mb:2,color:"text.secondary"},children:"Basic Information"})}),(0,le.jsx)(X.Ay,{item:!0,xs:12,children:(0,le.jsx)(m.A,{fullWidth:!0,label:"Title",value:A.title,onChange:e=>T("title",e.target.value),error:!!f.title,helperText:f.title||"".concat(A.title.length,"/200 characters"),required:!0,disabled:D,inputProps:{maxLength:200},placeholder:"Enter task title..."})}),(0,le.jsx)(X.Ay,{item:!0,xs:12,children:(0,le.jsx)(m.A,{fullWidth:!0,label:"Description",value:A.description,onChange:e=>T("description",e.target.value),multiline:!0,rows:4,disabled:D,placeholder:"Describe the task details..."})}),(0,le.jsx)(X.Ay,{item:!0,xs:12,sm:4,children:(0,le.jsxs)(g.A,{fullWidth:!0,size:"small",error:!!f.taskType,children:[(0,le.jsx)(v.A,{children:"Task Type"}),(0,le.jsx)(j.A,{value:A.taskType,label:"Task Type",onChange:e=>T("taskType",e.target.value),disabled:D,children:oe.map(e=>(0,le.jsx)(b.A,{value:e.value,children:e.label},e.value))}),f.taskType&&(0,le.jsx)($.A,{children:f.taskType})]})}),(0,le.jsx)(X.Ay,{item:!0,xs:12,sm:4,children:(0,le.jsxs)(g.A,{fullWidth:!0,size:"small",error:!!f.status,children:[(0,le.jsx)(v.A,{children:"Status"}),(0,le.jsx)(j.A,{value:A.status,label:"Status",onChange:e=>T("status",e.target.value),disabled:D,children:de.map(e=>(0,le.jsx)(b.A,{value:e.value,children:e.label},e.value))}),f.status&&(0,le.jsx)($.A,{children:f.status})]})}),(0,le.jsx)(X.Ay,{item:!0,xs:12,sm:4,children:(0,le.jsxs)(g.A,{fullWidth:!0,size:"small",error:!!f.priority,children:[(0,le.jsx)(v.A,{children:"Priority"}),(0,le.jsx)(j.A,{value:A.priority,label:"Priority",onChange:e=>T("priority",e.target.value),disabled:D,children:ce.map(e=>(0,le.jsx)(b.A,{value:e.value,children:e.label},e.value))}),f.priority&&(0,le.jsx)($.A,{children:f.priority})]})}),(0,le.jsxs)(X.Ay,{item:!0,xs:12,children:[(0,le.jsx)(ee.A,{sx:{my:1}}),(0,le.jsxs)(x.A,{variant:"subtitle2",sx:{fontWeight:600,mb:2,mt:2,color:"text.secondary"},children:[(0,le.jsx)(se.A,{sx:{fontSize:18,verticalAlign:"middle",mr:.5}}),"Scheduling"]})]}),(0,le.jsx)(X.Ay,{item:!0,xs:12,sm:6,children:(0,le.jsx)(m.A,{fullWidth:!0,label:"Start Date",type:"date",value:A.startDate,onChange:e=>T("startDate",e.target.value),error:!!f.startDate,helperText:f.startDate,disabled:D,InputLabelProps:{shrink:!0}})}),(0,le.jsx)(X.Ay,{item:!0,xs:12,sm:6,children:(0,le.jsx)(m.A,{fullWidth:!0,label:"Due Date",type:"date",value:A.dueDate,onChange:e=>T("dueDate",e.target.value),error:!!f.dueDate,helperText:f.dueDate,disabled:D,InputLabelProps:{shrink:!0}})}),(0,le.jsx)(X.Ay,{item:!0,xs:12,sm:6,children:(0,le.jsx)(m.A,{fullWidth:!0,label:"Reminder Date",type:"datetime-local",value:A.reminderDate,onChange:e=>T("reminderDate",e.target.value),error:!!f.reminderDate,helperText:f.reminderDate,disabled:D,InputLabelProps:{shrink:!0}})}),(0,le.jsx)(X.Ay,{item:!0,xs:12,sm:6,children:(0,le.jsx)(m.A,{fullWidth:!0,label:"Estimated Duration",type:"number",value:A.estimatedDuration,onChange:e=>T("estimatedDuration",e.target.value),error:!!f.estimatedDuration,helperText:f.estimatedDuration||"Duration in minutes",disabled:D,InputProps:{startAdornment:(0,le.jsx)(p.A,{position:"start",children:(0,le.jsx)(ae.A,{fontSize:"small"})}),inputProps:{min:0}}})}),(0,le.jsxs)(X.Ay,{item:!0,xs:12,children:[(0,le.jsx)(ee.A,{sx:{my:1}}),(0,le.jsx)(x.A,{variant:"subtitle2",sx:{fontWeight:600,mb:2,mt:2,color:"text.secondary"},children:"Assignment"})]}),(0,le.jsx)(X.Ay,{item:!0,xs:12,children:(0,le.jsx)(m.A,{fullWidth:!0,label:"Assigned To",value:h?"".concat(h.firstName||""," ").concat(h.lastName||""," (").concat(h.email,")").trim():"Current User",disabled:!0,helperText:"create"===s?"Task will be assigned to you":"Reassignment not available in this view"})}),(0,le.jsxs)(X.Ay,{item:!0,xs:12,children:[(0,le.jsx)(ee.A,{sx:{my:1}}),(0,le.jsxs)(x.A,{variant:"subtitle2",sx:{fontWeight:600,mb:2,mt:2,color:"text.secondary"},children:[(0,le.jsx)(ie.A,{sx:{fontSize:18,verticalAlign:"middle",mr:.5}}),"Additional Information"]})]}),(0,le.jsx)(X.Ay,{item:!0,xs:12,children:(0,le.jsx)(m.A,{fullWidth:!0,label:"Notes",value:A.notes,onChange:e=>T("notes",e.target.value),multiline:!0,rows:4,disabled:D,placeholder:"Add any additional notes or details..."})})]})]}),(0,le.jsxs)(M.A,{sx:{px:2,py:1.5,borderTop:"1px solid ".concat(u.palette.divider),gap:1},children:[(0,le.jsx)(d.A,{size:"small",onClick:I,disabled:D,startIcon:(0,le.jsx)(re.A,{}),sx:{borderRadius:2,textTransform:"none",px:2},children:"Cancel"}),(0,le.jsx)(d.A,{size:"small",type:"submit",variant:"contained",disabled:D,startIcon:D?(0,le.jsx)(te.A,{size:16}):(0,le.jsx)(ne.A,{}),sx:{borderRadius:2,textTransform:"none",px:2,minWidth:100},children:D?"Saving...":"create"===s?"Create Task":"Save Changes"})]})]})]})},ue=()=>{var e;const t=(0,n.A)(),s=(0,G.Zp)(),{user:X}=(0,V.h)(),$=(0,r.useQueryClient)(),[ee,te]=(0,K.A)({threshold:.05}),[se,ae]=(0,i.useState)(""),[ie,re]=(0,i.useState)("all"),[ne,oe]=(0,i.useState)(""),[de,ce]=(0,i.useState)(""),[ue,he]=(0,i.useState)("dueDate"),[me,pe]=(0,i.useState)({open:!1,task:null}),[Ae,ge]=(0,i.useState)({open:!1,message:"",severity:"success"}),[ve,je]=(0,i.useState)(!1),[be,ye]=(0,i.useState)("create"),[fe,ke]=(0,i.useState)(null),{data:De,isLoading:we,error:Se,refetch:Ce}=(0,r.useQuery)(["tasks"],async()=>(await q.WY.getAll({page:1,limit:100})).data||{tasks:[]},{retry:1,refetchOnWindowFocus:!1}),Te=(0,i.useMemo)(()=>(null===De||void 0===De?void 0:De.tasks)||[],[De]),Ie=(0,r.useMutation)(e=>q.WY.complete(e,{}),{onSuccess:()=>{$.invalidateQueries(["tasks"]),ge({open:!0,message:"Task marked as complete",severity:"success"})},onError:e=>{var t,s;ge({open:!0,message:(null===(t=e.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to complete task",severity:"error"})}}),We=(0,r.useMutation)(e=>q.WY.delete(e),{onSuccess:()=>{$.invalidateQueries(["tasks"]),ge({open:!0,message:"Task deleted successfully",severity:"success"}),pe({open:!1,task:null})},onError:e=>{var t,s;ge({open:!0,message:(null===(t=e.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Failed to delete task",severity:"error"}),pe({open:!1,task:null})}}),ze=(0,i.useCallback)(e=>{"completed"!==e.status&&Ie.mutate(e.id)},[Ie]),Re=(0,i.useCallback)(e=>{ye("edit"),ke(e),je(!0)},[]),Pe=(0,i.useCallback)(e=>{pe({open:!0,task:e})},[]),Me=(0,i.useCallback)(()=>{me.task&&We.mutate(me.task.id)},[me.task,We]),Fe=(0,i.useCallback)(()=>{ye("create"),ke(null),je(!0)},[]),Le=(0,i.useCallback)(()=>{ae(""),re("all"),oe(""),ce("")},[]),_e=(0,i.useMemo)(()=>{let e=Te.filter(e=>{var t,s;const a=!se||(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(se.toLowerCase()))||(null===(s=e.description)||void 0===s?void 0:s.toLowerCase().includes(se.toLowerCase())),i="all"===ie||("my"===ie?e.assignedToId===(null===X||void 0===X?void 0:X.id):"overdue"!==ie||new Date(e.dueDate)<new Date&&"completed"!==e.status),r=!ne||e.status===ne,n=!de||e.priority===de;return a&&i&&r&&n});return e.sort((e,t)=>{var s,a;let i,r;switch(ue){case"dueDate":i=e.dueDate?new Date(e.dueDate):new Date("2099-12-31"),r=t.dueDate?new Date(t.dueDate):new Date("2099-12-31");break;case"createdAt":i=new Date(e.createdAt||0),r=new Date(t.createdAt||0);break;case"priority":const n={urgent:0,high:1,medium:2,low:3};i=null!==(s=n[e.priority])&&void 0!==s?s:4,r=null!==(a=n[t.priority])&&void 0!==a?a:4;break;default:return 0}return i>r?1:-1}),e},[Te,se,ie,ne,de,ue,null===X||void 0===X?void 0:X.id]),Oe=(e,t)=>!(!e||"completed"===t||"cancelled"===t)&&new Date(e)<new Date,Ue=[ne,de].filter(Boolean).length;var Ne,Ye;return Se?(0,le.jsxs)(l.A,{maxWidth:"xl",sx:{py:t.spacing(3)},children:[(0,le.jsx)(o.A,{severity:"error",sx:{mb:3},children:(null===Se||void 0===Se||null===(Ne=Se.response)||void 0===Ne||null===(Ye=Ne.data)||void 0===Ye?void 0:Ye.message)||"Failed to load tasks. Please try again."}),(0,le.jsx)(d.A,{variant:"contained",startIcon:(0,le.jsx)(L.A,{}),onClick:()=>Ce(),children:"Retry"})]}):(0,le.jsxs)(l.A,{maxWidth:"xl",sx:{py:t.spacing(3)},children:[(0,le.jsxs)(c.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:t.spacing(3),animation:"fadeInScale 0.5s ease-out"},children:[(0,le.jsxs)(c.A,{children:[(0,le.jsx)(x.A,{variant:"h4",sx:{fontWeight:700,mb:t.spacing(.5)},children:"Tasks & Activities"}),(0,le.jsx)(x.A,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:_e.length>0?"".concat(_e.length," ").concat(1===_e.length?"task":"tasks"):"No tasks found"})]}),(0,le.jsxs)(c.A,{sx:{display:"flex",gap:t.spacing(1),alignItems:"center"},children:[(0,le.jsx)(d.A,{variant:"outlined",startIcon:(0,le.jsx)(L.A,{}),onClick:()=>Ce(),disabled:we,sx:{borderRadius:3,transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:t.shadows[15]},"& .MuiButton-startIcon":{transition:"transform 0.3s ease"},"&:hover .MuiButton-startIcon":{transform:"rotate(180deg)"}},children:"Refresh"}),(0,le.jsx)(d.A,{variant:"contained",startIcon:(0,le.jsx)(_.A,{}),onClick:Fe,sx:{borderRadius:3,transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:t.shadows[15]}},children:"Add Task"})]})]}),(0,le.jsx)(u.A,{elevation:2,sx:{p:t.spacing(3),mb:t.spacing(3),borderRadius:3,animation:"fadeInUp 0.6s ease-out",animationDelay:"0.1s",animationFillMode:"both"},children:(0,le.jsxs)(h.A,{spacing:2,children:[(0,le.jsxs)(c.A,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[(0,le.jsx)(m.A,{placeholder:"Search tasks...",value:se,onChange:e=>ae(e.target.value),sx:{flex:1,minWidth:{xs:"100%",sm:250},"& .MuiOutlinedInput-root":{borderRadius:2.5}},InputProps:{startAdornment:(0,le.jsx)(p.A,{position:"start",children:(0,le.jsx)(O.A,{sx:{color:"text.secondary"}})}),endAdornment:se&&(0,le.jsx)(p.A,{position:"end",children:(0,le.jsx)(A.A,{size:"small",onClick:()=>ae(""),children:(0,le.jsx)(U.A,{fontSize:"small"})})})}}),(0,le.jsxs)(g.A,{sx:{minWidth:150},children:[(0,le.jsx)(v.A,{children:"Sort By"}),(0,le.jsxs)(j.A,{value:ue,label:"Sort By",onChange:e=>he(e.target.value),startAdornment:(0,le.jsx)(N.A,{sx:{mr:1,color:"text.secondary"}}),sx:{borderRadius:2.5},children:[(0,le.jsx)(b.A,{value:"dueDate",children:"Due Date"}),(0,le.jsx)(b.A,{value:"createdAt",children:"Created Date"}),(0,le.jsx)(b.A,{value:"priority",children:"Priority"})]})]})]}),(0,le.jsxs)(c.A,{sx:{display:"flex",gap:2,alignItems:"center",flexWrap:"wrap"},children:[(0,le.jsxs)(y.A,{value:ie,exclusive:!0,onChange:(e,t)=>t&&re(t),sx:{"& .MuiToggleButton-root":{borderRadius:2,px:2,textTransform:"none",fontWeight:500}},children:[(0,le.jsx)(f.A,{value:"all",children:"All Tasks"}),(0,le.jsx)(f.A,{value:"my",children:"My Tasks"}),(0,le.jsx)(f.A,{value:"overdue",children:"Overdue"})]}),(0,le.jsxs)(g.A,{sx:{minWidth:150},children:[(0,le.jsx)(v.A,{children:"Status"}),(0,le.jsxs)(j.A,{value:ne,label:"Status",onChange:e=>oe(e.target.value),sx:{borderRadius:2.5},children:[(0,le.jsx)(b.A,{value:"",children:"All"}),(0,le.jsx)(b.A,{value:"pending",children:"Pending"}),(0,le.jsx)(b.A,{value:"in_progress",children:"In Progress"}),(0,le.jsx)(b.A,{value:"completed",children:"Completed"}),(0,le.jsx)(b.A,{value:"cancelled",children:"Cancelled"})]})]}),(0,le.jsxs)(g.A,{sx:{minWidth:150},children:[(0,le.jsx)(v.A,{children:"Priority"}),(0,le.jsxs)(j.A,{value:de,label:"Priority",onChange:e=>ce(e.target.value),sx:{borderRadius:2.5},children:[(0,le.jsx)(b.A,{value:"",children:"All"}),(0,le.jsx)(b.A,{value:"urgent",children:"Urgent"}),(0,le.jsx)(b.A,{value:"high",children:"High"}),(0,le.jsx)(b.A,{value:"medium",children:"Medium"}),(0,le.jsx)(b.A,{value:"low",children:"Low"})]})]}),(se||ne||de||"all"!==ie)&&(0,le.jsxs)(d.A,{startIcon:(0,le.jsx)(U.A,{}),onClick:Le,size:"small",sx:{borderRadius:2,textTransform:"none"},children:["Clear Filters",Ue>0&&" (".concat(Ue,")")]})]})]})}),we?(0,le.jsx)(k.A,{component:u.A,sx:{borderRadius:3,boxShadow:t.shadows[2]},children:(0,le.jsxs)(D.A,{size:"small",children:[(0,le.jsx)(w.A,{children:(0,le.jsxs)(S.A,{children:[(0,le.jsx)(C.A,{sx:{py:1,fontSize:"0.813rem"},children:"Title"}),(0,le.jsx)(C.A,{sx:{py:1,fontSize:"0.813rem"},children:"Status"}),(0,le.jsx)(C.A,{sx:{py:1,fontSize:"0.813rem"},children:"Priority"}),(0,le.jsx)(C.A,{sx:{py:1,fontSize:"0.813rem"},children:"Due Date"}),(0,le.jsx)(C.A,{sx:{py:1,fontSize:"0.813rem"},children:"Assigned To"}),(0,le.jsx)(C.A,{sx:{py:1,fontSize:"0.813rem"},children:"Type"}),(0,le.jsx)(C.A,{align:"right",sx:{py:1,fontSize:"0.813rem"},children:"Actions"})]})}),(0,le.jsx)(T.A,{children:(0,le.jsx)(Z.x_,{rows:10})})]})}):0===_e.length?(0,le.jsx)(u.A,{sx:{borderRadius:3,boxShadow:t.shadows[2]},children:(0,le.jsx)(J.A,{icon:Y.A,title:0===Te.length?"No tasks yet":"No tasks found",message:0===Te.length?"Get started by creating your first task to stay organized and on track.":"Try adjusting your filters or search criteria to find what you're looking for.",actionLabel:0===Te.length?"Create First Task":void 0,onAction:0===Te.length?Fe:void 0})}):(0,le.jsx)(k.A,{component:u.A,ref:ee,sx:{borderRadius:3,boxShadow:t.shadows[2]},children:(0,le.jsxs)(D.A,{size:"small",children:[(0,le.jsx)(w.A,{children:(0,le.jsxs)(S.A,{sx:{bgcolor:"action.hover"},children:[(0,le.jsx)(C.A,{sx:{fontWeight:600,py:1,fontSize:"0.813rem"},children:"Title"}),(0,le.jsx)(C.A,{sx:{fontWeight:600,py:1,fontSize:"0.813rem"},children:"Status"}),(0,le.jsx)(C.A,{sx:{fontWeight:600,py:1,fontSize:"0.813rem"},children:"Priority"}),(0,le.jsx)(C.A,{sx:{fontWeight:600,py:1,fontSize:"0.813rem"},children:"Due Date"}),(0,le.jsx)(C.A,{sx:{fontWeight:600,py:1,fontSize:"0.813rem"},children:"Assigned To"}),(0,le.jsx)(C.A,{sx:{fontWeight:600,py:1,fontSize:"0.813rem"},children:"Type"}),(0,le.jsx)(C.A,{align:"right",sx:{fontWeight:600,py:1,fontSize:"0.813rem"},children:"Actions"})]})}),(0,le.jsx)(T.A,{children:_e.map(e=>{var t,a,i,r,n,l;return(0,le.jsxs)(S.A,{sx:{"&:hover":{bgcolor:"action.hover",cursor:"pointer"},transition:"background-color 0.2s ease"},onClick:()=>s("/tasks/".concat(e.id)),children:[(0,le.jsx)(C.A,{sx:{py:.75},children:(0,le.jsxs)(c.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,le.jsx)(x.A,{variant:"caption",sx:{fontWeight:500,fontSize:"0.813rem"},children:e.title||"Untitled Task"}),Oe(e.dueDate,e.status)&&(0,le.jsx)(I.A,{title:"Overdue",children:(0,le.jsx)(E.A,{sx:{fontSize:14,color:"error.main"}})})]})}),(0,le.jsx)(C.A,{sx:{py:.75},children:(0,le.jsx)(W.A,{label:(null===(t=e.status)||void 0===t?void 0:t.replace("_"," ").toUpperCase())||"PENDING",color:(l=e.status,{pending:"warning",in_progress:"info",completed:"success",cancelled:"default"}[l]||"default"),size:"small",sx:{fontWeight:600,fontSize:"0.688rem",height:20,textTransform:"capitalize"}})}),(0,le.jsx)(C.A,{sx:{py:.75},children:(0,le.jsx)(W.A,{label:(null===(a=e.priority)||void 0===a?void 0:a.toUpperCase())||"MEDIUM",color:(n=e.priority,{urgent:"error",high:"error",medium:"warning",low:"success"}[n]||"default"),size:"small",sx:{fontWeight:600,fontSize:"0.688rem",height:20}})}),(0,le.jsx)(C.A,{sx:{py:.75},children:(0,le.jsx)(x.A,{variant:"caption",sx:{fontSize:"0.813rem",color:Oe(e.dueDate,e.status)?"error.main":"text.primary",fontWeight:Oe(e.dueDate,e.status)?600:400},children:(r=e.dueDate,r?new Date(r).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"N/A")})}),(0,le.jsx)(C.A,{sx:{py:.75},children:(0,le.jsx)(x.A,{variant:"caption",sx:{fontSize:"0.813rem"},children:e.assignedTo?"".concat(e.assignedTo.firstName," ").concat(e.assignedTo.lastName):"Unassigned"})}),(0,le.jsx)(C.A,{sx:{py:.75},children:(0,le.jsx)(x.A,{variant:"caption",sx:{textTransform:"capitalize",fontSize:"0.813rem"},children:(null===(i=e.taskType)||void 0===i?void 0:i.replace("_"," "))||"General"})}),(0,le.jsx)(C.A,{align:"right",sx:{py:.75},children:(0,le.jsxs)(c.A,{sx:{display:"flex",gap:.25,justifyContent:"flex-end"},children:["completed"!==e.status&&(0,le.jsx)(I.A,{title:"Mark Complete",children:(0,le.jsx)(A.A,{size:"small",onClick:t=>{t.stopPropagation(),ze(e)},sx:{color:"success.main","&:hover":{bgcolor:"success.lighter"},p:.5},children:(0,le.jsx)(B.A,{sx:{fontSize:16}})})}),(0,le.jsx)(I.A,{title:"Edit",children:(0,le.jsx)(A.A,{size:"small",onClick:t=>{t.stopPropagation(),Re(e)},sx:{color:"primary.main","&:hover":{bgcolor:"primary.lighter"},p:.5},children:(0,le.jsx)(Q.A,{sx:{fontSize:16}})})}),(0,le.jsx)(I.A,{title:"Delete",children:(0,le.jsx)(A.A,{size:"small",onClick:t=>{t.stopPropagation(),Pe(e)},sx:{color:"error.main","&:hover":{bgcolor:"error.lighter"},p:.5},children:(0,le.jsx)(H.A,{sx:{fontSize:16}})})})]})})]},e.id)})})]})}),(0,le.jsxs)(z.A,{open:me.open,onClose:()=>pe({open:!1,task:null}),maxWidth:"xs",fullWidth:!0,children:[(0,le.jsx)(R.A,{children:"Delete Task"}),(0,le.jsx)(P.A,{children:(0,le.jsxs)(x.A,{children:['Are you sure you want to delete "',null===(e=me.task)||void 0===e?void 0:e.title,'"? This action cannot be undone.']})}),(0,le.jsxs)(M.A,{children:[(0,le.jsx)(d.A,{onClick:()=>pe({open:!1,task:null}),sx:{textTransform:"none"},children:"Cancel"}),(0,le.jsx)(d.A,{onClick:Me,variant:"contained",color:"error",disabled:We.isLoading,sx:{textTransform:"none"},children:We.isLoading?"Deleting...":"Delete"})]})]}),(0,le.jsx)(F.A,{open:Ae.open,autoHideDuration:6e3,onClose:()=>ge((0,a.A)((0,a.A)({},Ae),{},{open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,le.jsx)(o.A,{onClose:()=>ge((0,a.A)((0,a.A)({},Ae),{},{open:!1})),severity:Ae.severity,sx:{width:"100%"},children:Ae.message})}),(0,le.jsx)(xe,{open:ve,mode:be,task:fe,onClose:()=>je(!1),onSuccess:()=>{$.invalidateQueries(["tasks"]),$.invalidateQueries(["dashboard"]),Ce()}})]})}},48309:(e,t,s)=>{s.d(t,{A:()=>o});s(65043);var a=s(96446),i=s(85865),r=s(11906),n=s(26240),l=s(70579);const o=e=>{let{icon:t,title:s,message:o,actionLabel:d,onAction:c}=e;const x=(0,n.A)();return(0,l.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:{xs:"300px",sm:"400px",md:"500px"},padding:x.spacing(4),textAlign:"center",animation:"fadeIn 0.6s ease-out","@keyframes fadeIn":{from:{opacity:0,transform:"translateY(20px)"},to:{opacity:1,transform:"translateY(0)"}}},children:[(0,l.jsx)(a.A,{sx:{position:"relative",mb:x.spacing(4),animation:"scaleIn 0.5s ease-out",animationDelay:"0.2s",animationFillMode:"both","@keyframes scaleIn":{from:{transform:"scale(0.8)",opacity:0},to:{transform:"scale(1)",opacity:1}}},children:(0,l.jsx)(a.A,{sx:{width:{xs:80,sm:100,md:120},height:{xs:80,sm:100,md:120},borderRadius:"50%",background:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",position:"relative","&::before":{content:'""',position:"absolute",top:-2,left:-2,right:-2,bottom:-2,background:x.palette.gradient.primary,borderRadius:"50%",zIndex:-1,opacity:.2}},children:t&&(0,l.jsx)(a.A,{sx:{background:x.palette.gradient.primary,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(t,{sx:{fontSize:{xs:40,sm:50,md:60},opacity:1,filter:"drop-shadow(0 2px 4px rgba(102, 126, 234, 0.2))"}})})})}),(0,l.jsxs)(a.A,{sx:{maxWidth:{xs:"100%",sm:500,md:600},mb:x.spacing(2),animation:"fadeInUp 0.6s ease-out",animationDelay:"0.3s",animationFillMode:"both","@keyframes fadeInUp":{from:{opacity:0,transform:"translateY(20px)"},to:{opacity:1,transform:"translateY(0)"}}},children:[(0,l.jsx)(i.A,{variant:"h4",sx:{fontWeight:700,mb:x.spacing(2),background:x.palette.gradient.primary,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",fontSize:{xs:"1.5rem",sm:"1.875rem",md:"2.125rem"},letterSpacing:"-0.01em"},children:s}),(0,l.jsx)(i.A,{variant:"body1",color:"text.secondary",sx:{fontSize:{xs:"0.875rem",sm:"1rem"},lineHeight:1.6,px:{xs:2,sm:0}},children:o})]}),d&&c&&(0,l.jsx)(a.A,{sx:{animation:"fadeInUp 0.6s ease-out",animationDelay:"0.4s",animationFillMode:"both"},children:(0,l.jsx)(r.A,{variant:"contained",onClick:c,sx:{background:x.palette.gradient.primary,color:"white",padding:{xs:"10px 24px",sm:"12px 32px"},fontSize:{xs:"0.875rem",sm:"1rem"},fontWeight:600,borderRadius:3,textTransform:"none",boxShadow:"0 8px 24px rgba(102, 126, 234, 0.3)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{background:"linear-gradient(135deg, #5568d3 0%, #653a8b 100%)",boxShadow:"0 12px 32px rgba(102, 126, 234, 0.4)",transform:"translateY(-2px)"},"&:active":{transform:"translateY(0)",boxShadow:"0 6px 16px rgba(102, 126, 234, 0.3)"}},children:d})})]})}},53831:(e,t,s)=>{s.d(t,{Qv:()=>u,x_:()=>x});s(65043);var a=s(28076),i=s(10039),r=s(78185),n=s(96446),l=s(68903),o=s(12110),d=s(26494),c=s(70579);const x=e=>{let{rows:t=5}=e;return(0,c.jsx)(c.Fragment,{children:[...Array(t)].map((e,t)=>(0,c.jsxs)(a.A,{children:[(0,c.jsx)(i.A,{children:(0,c.jsx)(r.A,{variant:"text",width:"80%",height:24,animation:"wave"})}),(0,c.jsx)(i.A,{children:(0,c.jsx)(r.A,{variant:"text",width:"90%",height:24,animation:"wave"})}),(0,c.jsx)(i.A,{children:(0,c.jsx)(r.A,{variant:"text",width:"70%",height:24,animation:"wave"})}),(0,c.jsx)(i.A,{children:(0,c.jsx)(r.A,{variant:"text",width:"60%",height:24,animation:"wave"})}),(0,c.jsx)(i.A,{align:"right",children:(0,c.jsxs)(n.A,{sx:{display:"flex",gap:1,justifyContent:"flex-end"},children:[(0,c.jsx)(r.A,{variant:"circular",width:32,height:32,animation:"wave"}),(0,c.jsx)(r.A,{variant:"circular",width:32,height:32,animation:"wave"})]})})]},t))})},u=e=>{let{count:t=6}=e;return(0,c.jsx)(l.Ay,{container:!0,spacing:3,children:[...Array(t)].map((e,t)=>(0,c.jsx)(l.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,c.jsx)(o.A,{sx:{height:"100%",borderRadius:3,boxShadow:"0 4px 6px rgba(0,0,0,0.07)"},children:(0,c.jsxs)(d.A,{sx:{p:3},children:[(0,c.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,c.jsx)(r.A,{variant:"circular",width:48,height:48,animation:"wave",sx:{mr:2}}),(0,c.jsxs)(n.A,{sx:{flex:1},children:[(0,c.jsx)(r.A,{variant:"text",width:"70%",height:28,animation:"wave",sx:{mb:.5}}),(0,c.jsx)(r.A,{variant:"text",width:"50%",height:20,animation:"wave"})]})]}),(0,c.jsxs)(n.A,{sx:{mb:2},children:[(0,c.jsx)(r.A,{variant:"text",width:"100%",height:20,animation:"wave",sx:{mb:1}}),(0,c.jsx)(r.A,{variant:"text",width:"90%",height:20,animation:"wave",sx:{mb:1}}),(0,c.jsx)(r.A,{variant:"text",width:"80%",height:20,animation:"wave"})]}),(0,c.jsxs)(n.A,{sx:{display:"flex",gap:1,mb:2},children:[(0,c.jsx)(r.A,{variant:"rounded",width:80,height:28,animation:"wave",sx:{borderRadius:2}}),(0,c.jsx)(r.A,{variant:"rounded",width:70,height:28,animation:"wave",sx:{borderRadius:2}})]}),(0,c.jsxs)(n.A,{sx:{display:"flex",gap:1.5,pt:2,mt:2,borderTop:1,borderColor:"divider"},children:[(0,c.jsx)(r.A,{variant:"rounded",width:"48%",height:40,animation:"wave",sx:{borderRadius:2.5}}),(0,c.jsx)(r.A,{variant:"rounded",width:"48%",height:40,animation:"wave",sx:{borderRadius:2.5}})]})]})})},t))})}}}]);
//# sourceMappingURL=2769.1f4e7268.chunk.js.map