# BesaHubs CRM - Environment Configuration Template
# Copy this file to .env and fill in your actual values
# NEVER commit .env file to version control

# =============================================================================
# REQUIRED SECRETS (Production)
# =============================================================================

# JWT Authentication Secrets
# IMPORTANT: Must be at least 32 characters long
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-secure-jwt-secret-min-32-chars-change-this-in-production
JWT_REFRESH_SECRET=your-secure-refresh-secret-min-32-chars-different-from-jwt-secret
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# Database Encryption Key (for PII fields)
# CRITICAL: Required for encrypting sensitive data at rest using PostgreSQL pgcrypto
# - Must be at least 32 characters long
# - Use cryptographically secure random value
# - NEVER lose this key - encrypted data cannot be recovered without it
# - Store securely in production (use secrets manager)
# - Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
ENCRYPTION_KEY=your-secure-encryption-key-min-32-chars-never-lose-this-key

# Database Configuration
# PostgreSQL connection string (REQUIRED in production)
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://user:password@localhost:5432/besahubs_crm

# =============================================================================
# ENVIRONMENT
# =============================================================================

# Node environment (development, production, test)
NODE_ENV=development

# Server port (default: 3001)
PORT=3001

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Demo Mode (ONLY for development/testing - MUST be false in production)
# Set to 'true' to enable demo credentials (admin@demo.com/admin123)
# WARNING: Demo credentials are automatically blocked in production
DEMO_MODE=false

# SSL/TLS Configuration (production only)
SSL_ENABLED=false
SSL_CERT_PATH=server/ssl/cert.pem
SSL_KEY_PATH=server/ssl/key.pem

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================

# Frontend URL (for CORS and email links)
FRONTEND_URL=http://localhost:3000
CLIENT_URL=http://localhost:3000
CORS_ORIGIN=http://localhost:3000

# =============================================================================
# OPTIONAL SECRETS (Recommended for full functionality)
# =============================================================================

# Redis Configuration (for caching and session management)
# If not set, caching will be disabled
# REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# Email Configuration (for notifications and password reset)
# SMTP settings
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
SMTP_SECURE=false
EMAIL_USER=your_email@gmail.com
EMAIL_PASS=your_email_password
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_email_password
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587

# SendGrid API (alternative to SMTP)
# SENDGRID_API_KEY=your-sendgrid-api-key

# =============================================================================
# PHASE 1 FEATURES - SENDGRID EMAIL INTEGRATION
# =============================================================================

# SendGrid Configuration
# Enable/disable SendGrid email integration (true/false)
SENDGRID_ENABLED=false

# SendGrid API Key (from SendGrid dashboard)
SENDGRID_API_KEY=your-sendgrid-api-key-here

# SendGrid "From" Email Settings
SENDGRID_FROM_EMAIL=noreply@yourdomain.com
SENDGRID_FROM_NAME=BesaHubs CRM

# SendGrid Webhook Signing Key (for webhook verification)
SENDGRID_WEBHOOK_SIGNING_KEY=your-webhook-signing-key-here

# SendGrid Email Template IDs
SENDGRID_TEMPLATE_INVITE=d-xxxxxxxxxxxxxxxxxxxxx
SENDGRID_TEMPLATE_PASSWORD_RESET=d-xxxxxxxxxxxxxxxxxxxxx
SENDGRID_TEMPLATE_PROPERTY_PROMO=d-xxxxxxxxxxxxxxxxxxxxx

# =============================================================================
# PHASE 1 FEATURES - CALENDAR INTEGRATION
# =============================================================================

# Calendar Integration Toggle
# Enable/disable calendar integration (true/false)
CALENDAR_ENABLED=false

# Google Calendar OAuth Configuration
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:3001/api/integrations/google/callback

# Microsoft 365 Calendar OAuth Configuration
MS_CLIENT_ID=your-microsoft-client-id
MS_CLIENT_SECRET=your-microsoft-client-secret
MS_REDIRECT_URI=http://localhost:3001/api/integrations/microsoft/callback
MS_TENANT_ID=common

# =============================================================================
# PHASE 1 FEATURES - ADVANCED DASHBOARDS
# =============================================================================

# Advanced Dashboards Toggle
# Enable/disable advanced dashboard features (true/false)
DASHBOARDS_ENABLED=false

# =============================================================================
# PHASE 1 FEATURES - PUBLIC URLS
# =============================================================================

# Application Base URLs (for OAuth callbacks and email links)
APP_BASE_URL=http://localhost:3000
API_BASE_URL=http://localhost:3001

# =============================================================================
# RATE LIMITING
# =============================================================================

# Rate limit window in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per window (default: 1000)
RATE_LIMIT_MAX_REQUESTS=1000

# =============================================================================
# FILE UPLOAD CONFIGURATION
# =============================================================================

# Maximum file upload size (default: 50mb)
MAX_FILE_SIZE=50mb

# Upload directory path (default: ./uploads)
UPLOAD_PATH=./uploads

# =============================================================================
# LOGGING
# =============================================================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# =============================================================================
# EXTERNAL API KEYS (Market Data Integration)
# =============================================================================

# ATTOM Data API - https://api.developer.attom.com/
ATTOM_API_KEY=your_attom_api_key_here

# Estated API - https://estated.com/developers
ESTATED_API_KEY=your_estated_api_key_here

# Alternative Property Data APIs (Optional)
# RentSpree API
RENTSPREE_API_KEY=your_rentspree_api_key_here

# PropertyRadar API
PROPERTYRADAR_API_KEY=your_propertyradar_api_key_here

# CompStak API (Commercial Real Estate Data)
COMPSTAK_API_KEY=your_compstak_api_key_here

# API Data Source Priority (comma-separated, in order of preference)
# Options: attom, estated, mock
DATA_SOURCE_PRIORITY=attom,estated,mock

# =============================================================================
# EXTERNAL INTEGRATIONS (Optional)
# =============================================================================

# Cloudinary (for image storage)
# CLOUDINARY_CLOUD_NAME=your-cloud-name
# CLOUDINARY_API_KEY=your-api-key
# CLOUDINARY_API_SECRET=your-api-secret

# Twilio (for SMS notifications)
# TWILIO_ACCOUNT_SID=your-account-sid
# TWILIO_AUTH_TOKEN=your-auth-token
# TWILIO_PHONE_NUMBER=your-twilio-phone

# Stripe (for payments)
# STRIPE_SECRET_KEY=your-stripe-secret-key
# STRIPE_PUBLISHABLE_KEY=your-stripe-publishable-key

# DocuSign (for document signing)
# DOCUSIGN_INTEGRATION_KEY=your-integration-key
# DOCUSIGN_USER_ID=your-user-id
# DOCUSIGN_ACCOUNT_ID=your-account-id
# DOCUSIGN_PRIVATE_KEY_PATH=path-to-private-key

# =============================================================================
# SECURITY BEST PRACTICES
# =============================================================================
# 
# 1. JWT Secrets:
#    - Must be at least 32 characters long
#    - Use cryptographically secure random values
#    - JWT_SECRET and JWT_REFRESH_SECRET must be different
#    - Never reuse secrets across environments
#    - Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#
# 2. Database:
#    - Use strong passwords (min 16 characters)
#    - Enable SSL/TLS for database connections in production
#    - Restrict database access by IP when possible
#    - Never use default credentials
#
# 3. Demo Mode:
#    - ONLY enable in development/testing (DEMO_MODE=true)
#    - Automatically blocked in production for security
#    - Set DEMO_MODE=false or remove entirely for production
#
# 4. HTTPS/SSL:
#    - Always use HTTPS in production (SSL_ENABLED=true)
#    - Obtain valid SSL certificates from trusted CA
#    - Keep certificates up to date
#    - HSTS is automatically enabled in production
#
# 5. Environment Files:
#    - Never commit .env to git (already in .gitignore)
#    - Keep .env.example updated without real values
#    - Use different secrets for each environment
#    - Rotate secrets regularly (at least every 90 days)
#
# 6. API Keys:
#    - Store all API keys as environment variables
#    - Never hardcode API keys in source code
#    - Use different keys for dev/staging/production
#    - Revoke unused or compromised keys immediately
#
# 7. Validation on Startup:
#    - Server validates all required secrets on startup
#    - Missing required secrets will prevent server start in production
#    - Check logs for security warnings
#
# =============================================================================