"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[2019],{3632:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(66734),n=r(70579);const i=(0,a.A)((0,n.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},41209:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(66734),n=r(70579);const i=(0,a.A)([(0,n.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,n.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},42336:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(66734),n=r(70579);const i=(0,a.A)((0,n.jsx)("path",{d:"M7.58 4.08 6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2c.15-2.65 1.51-4.97 3.55-6.42m12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43c2.02 1.45 3.39 3.77 3.54 6.42M18 11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-6 11c.14 0 .27-.01.4-.04.65-.14 1.18-.58 1.44-1.18.1-.24.15-.5.15-.78h-4c.01 1.1.9 2 2.01 2"}),"NotificationsActive")},42796:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(66734),n=r(70579);const i=(0,a.A)((0,n.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp")},51962:(e,t,r)=>{r.d(t,{A:()=>S});var a=r(98587),n=r(58168),i=r(65043),s=r(58387),c=r(98610),o=r(67266),l=r(33064),d=r(66734),h=r(70579);const p=(0,d.A)((0,h.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),x=(0,d.A)((0,h.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),m=(0,d.A)((0,h.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var A=r(6803),y=r(98206),u=r(34535),g=r(61475),j=r(92532),f=r(72372);function v(e){return(0,f.Ay)("MuiCheckbox",e)}const M=(0,j.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),w=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],C=(0,u.Ay)(l.A,{shouldForwardProp:e=>(0,g.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t["size".concat((0,A.A)(r.size))],"default"!==r.color&&t["color".concat((0,A.A)(r.color))]]}})(e=>{let{theme:t,ownerState:r}=e;return(0,n.A)({color:(t.vars||t).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===r.color?t.vars.palette.action.activeChannel:t.vars.palette[r.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,o.X4)("default"===r.color?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&{["&.".concat(M.checked,", &.").concat(M.indeterminate)]:{color:(t.vars||t).palette[r.color].main},["&.".concat(M.disabled)]:{color:(t.vars||t).palette.action.disabled}})}),k=(0,h.jsx)(x,{}),b=(0,h.jsx)(p,{}),z=(0,h.jsx)(m,{}),S=i.forwardRef(function(e,t){var r,o;const l=(0,y.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=k,color:p="primary",icon:x=b,indeterminate:m=!1,indeterminateIcon:u=z,inputProps:g,size:j="medium",className:f}=l,M=(0,a.A)(l,w),S=m?u:x,I=m?u:d,F=(0,n.A)({},l,{color:p,indeterminate:m,size:j}),R=(e=>{const{classes:t,indeterminate:r,color:a,size:i}=e,s={root:["root",r&&"indeterminate","color".concat((0,A.A)(a)),"size".concat((0,A.A)(i))]},o=(0,c.A)(s,v,t);return(0,n.A)({},t,o)})(F);return(0,h.jsx)(C,(0,n.A)({type:"checkbox",inputProps:(0,n.A)({"data-indeterminate":m},g),icon:i.cloneElement(S,{fontSize:null!=(r=S.props.fontSize)?r:j}),checkedIcon:i.cloneElement(I,{fontSize:null!=(o=I.props.fontSize)?o:j}),ownerState:F,ref:t,className:(0,s.A)(R.root,f)},M,{classes:R}))})},69413:(e,t,r)=>{r.d(t,{A:()=>g});var a=r(98587),n=r(58168),i=r(65043),s=r(58387),c=r(98610),o=r(34535),l=r(98206),d=r(92532),h=r(72372);function p(e){return(0,h.Ay)("MuiFormGroup",e)}(0,d.A)("MuiFormGroup",["root","row","error"]);var x=r(85213),m=r(74827),A=r(70579);const y=["className","row"],u=(0,o.Ay)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.row&&t.row]}})(e=>{let{ownerState:t}=e;return(0,n.A)({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})}),g=i.forwardRef(function(e,t){const r=(0,l.b)({props:e,name:"MuiFormGroup"}),{className:i,row:o=!1}=r,d=(0,a.A)(r,y),h=(0,x.A)(),g=(0,m.A)({props:r,muiFormControl:h,states:["error"]}),j=(0,n.A)({},r,{row:o,error:g.error}),f=(e=>{const{classes:t,row:r,error:a}=e,n={root:["root",r&&"row",a&&"error"]};return(0,c.A)(n,p,t)})(j);return(0,A.jsx)(u,(0,n.A)({className:(0,s.A)(f.root,i),ownerState:j,ref:t},d))})},72019:(e,t,r)=>{r.r(t),r.d(t,{default:()=>re});var a=r(65043),n=r(89379),i=r(80045),s=r(96446),c=r(81637),o=r(85865),l=r(11906),d=r(17392),h=r(68903),p=r(12110),x=r(26494),m=r(93933),A=r(63336),y=r(29013),u=r(24056),g=r(43845),j=r(19042),f=r(35721),v=r(24628),M=r(2050),w=r(81045),C=r(48734),k=r(8266),b=r(39336),z=r(83462),S=r(26600),I=r(35316),F=r(67784),R=r(38624),D=r(53193),T=r(18356),O=r(72221),P=r(32143),L=r(69413),W=r(74605),N=r(51962),_=r(29347),q=r(70141),B=r(47805),E=r(42336),$=r(75626),H=r(42796),V=r(95846),Z=r(83560),G=r(51387),K=r(41209),Q=r(98606),U=r(3632),X=r(76303),Y=r(70579);const J=["children","value","index"];function ee(e){let{children:t,value:r,index:a}=e,c=(0,i.A)(e,J);return(0,Y.jsx)("div",(0,n.A)((0,n.A)({role:"tabpanel",hidden:r!==a,id:"alerts-tabpanel-".concat(a),"aria-labelledby":"alerts-tab-".concat(a)},c),{},{children:r===a&&(0,Y.jsx)(s.A,{sx:{py:3},children:t})}))}const te=()=>{const[e,t]=(0,a.useState)(!0),[r,i]=(0,a.useState)(0),[J,te]=(0,a.useState)([]),[re,ae]=(0,a.useState)([]),[ne,ie]=(0,a.useState)({open:!1,mode:"create",alert:null}),[se,ce]=(0,a.useState)(!1),[oe,le]=(0,a.useState)(null),[de,he]=(0,a.useState)({name:"",propertyTypes:[],priceMin:"",priceMax:"",locations:[],sizeMin:"",sizeMax:"",minCapRate:"",minCashFlow:"",maxDaysOnMarket:"",keywords:[],frequency:"daily",notifications:{email:!0,sms:!1,push:!0},active:!0});(0,a.useEffect)(()=>{pe(),xe()},[]);const pe=async()=>{try{t(!0);try{const e=await X.$h.getAlerts("current_user");te(e.alerts)}catch(e){console.log("API not available, using mock data"),te(X.fr)}}catch(r){console.error("Error fetching alerts:",r)}finally{t(!1)}},xe=async()=>{try{try{const e=await X.$h.getTriggeredAlerts("current_user");ae(e.triggeredAlerts)}catch(e){console.log("API not available, using mock data"),ae(X.fQ)}}catch(t){console.error("Error fetching triggered alerts:",t)}},me=()=>{he({name:"",propertyTypes:[],priceMin:"",priceMax:"",locations:[],sizeMin:"",sizeMax:"",minCapRate:"",minCashFlow:"",maxDaysOnMarket:"",keywords:[],frequency:"daily",notifications:{email:!0,sms:!1,push:!0},active:!0}),ie({open:!0,mode:"create",alert:null})},Ae=re.filter(e=>!e.read).length;return e?(0,Y.jsxs)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:400},children:[(0,Y.jsx)(c.A,{}),(0,Y.jsx)(o.A,{sx:{ml:2},children:"Loading property alerts..."})]}):(0,Y.jsxs)(s.A,{children:[(0,Y.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[(0,Y.jsxs)(s.A,{children:[(0,Y.jsx)(o.A,{variant:"h4",sx:{fontWeight:700,mb:1},children:"Property Alerts"}),(0,Y.jsx)(o.A,{variant:"body1",color:"text.secondary",children:"Stay notified of new properties matching your investment criteria"})]}),(0,Y.jsxs)(s.A,{sx:{display:"flex",gap:1},children:[(0,Y.jsx)(l.A,{variant:"contained",startIcon:(0,Y.jsx)(q.A,{}),onClick:me,children:"Create Alert"}),(0,Y.jsx)(d.A,{onClick:pe,children:(0,Y.jsx)(B.A,{})})]})]}),(0,Y.jsxs)(h.Ay,{container:!0,spacing:3,sx:{mb:3},children:[(0,Y.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,Y.jsx)(p.A,{children:(0,Y.jsx)(x.A,{children:(0,Y.jsxs)(s.A,{sx:{display:"flex",alignItems:"center"},children:[(0,Y.jsx)(E.A,{sx:{color:"primary.main",mr:1}}),(0,Y.jsxs)(s.A,{children:[(0,Y.jsx)(o.A,{variant:"h4",sx:{fontWeight:700},children:J.filter(e=>e.active).length}),(0,Y.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Active Alerts"})]})]})})})}),(0,Y.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,Y.jsx)(p.A,{children:(0,Y.jsx)(x.A,{children:(0,Y.jsxs)(s.A,{sx:{display:"flex",alignItems:"center"},children:[(0,Y.jsx)(m.A,{badgeContent:Ae,color:"error",children:(0,Y.jsx)($.A,{sx:{color:"warning.main",mr:1}})}),(0,Y.jsxs)(s.A,{sx:{ml:1},children:[(0,Y.jsx)(o.A,{variant:"h4",sx:{fontWeight:700},children:re.length}),(0,Y.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Recent Matches"})]})]})})})}),(0,Y.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,Y.jsx)(p.A,{children:(0,Y.jsx)(x.A,{children:(0,Y.jsxs)(s.A,{sx:{display:"flex",alignItems:"center"},children:[(0,Y.jsx)(H.A,{sx:{color:"success.main",mr:1}}),(0,Y.jsxs)(s.A,{children:[(0,Y.jsx)(o.A,{variant:"h4",sx:{fontWeight:700},children:J.filter(e=>e.lastTriggered).length}),(0,Y.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Recently Triggered"})]})]})})})}),(0,Y.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,Y.jsx)(p.A,{children:(0,Y.jsx)(x.A,{children:(0,Y.jsxs)(s.A,{sx:{display:"flex",alignItems:"center"},children:[(0,Y.jsx)(V.A,{sx:{color:"info.main",mr:1}}),(0,Y.jsxs)(s.A,{children:[(0,Y.jsxs)(o.A,{variant:"h4",sx:{fontWeight:700},children:[Math.round(re.reduce((e,t)=>e+(t.matchScore||0),0)/Math.max(re.length,1)),"%"]}),(0,Y.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Avg. Match Score"})]})]})})})})]}),(0,Y.jsx)(A.A,{sx:{mb:3},children:(0,Y.jsxs)(y.A,{value:r,onChange:(e,t)=>{i(t)},sx:{borderBottom:1,borderColor:"divider"},children:[(0,Y.jsx)(u.A,{label:"My Alerts"}),(0,Y.jsx)(u.A,{label:(0,Y.jsx)(m.A,{badgeContent:Ae,color:"error",children:"Notifications"})})]})}),(0,Y.jsx)(ee,{value:r,index:0,children:(0,Y.jsx)(h.Ay,{container:!0,spacing:3,children:0===J.length?(0,Y.jsx)(h.Ay,{item:!0,xs:12,children:(0,Y.jsx)(p.A,{children:(0,Y.jsxs)(x.A,{sx:{textAlign:"center",py:4},children:[(0,Y.jsx)($.A,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,Y.jsx)(o.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No alerts created yet"}),(0,Y.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Create your first alert to get notified of new properties matching your criteria"}),(0,Y.jsx)(l.A,{variant:"contained",startIcon:(0,Y.jsx)(q.A,{}),onClick:me,children:"Create Your First Alert"})]})})}):J.map(e=>{return(0,Y.jsx)(h.Ay,{item:!0,xs:12,md:6,children:(0,Y.jsx)(p.A,{children:(0,Y.jsxs)(x.A,{children:[(0,Y.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,Y.jsx)(o.A,{variant:"h6",sx:{flex:1},children:e.name}),(0,Y.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Y.jsx)(g.A,{label:e.frequency,color:(t=e.frequency,{realtime:"error",daily:"primary",weekly:"warning",monthly:"secondary"}[t]||"default"),size:"small"}),(0,Y.jsx)(j.A,{checked:e.active,onChange:()=>(async(e,t)=>{try{const a=J.find(t=>t.id===e);if(a){try{await X.$h.updateAlert(e,(0,n.A)((0,n.A)({},a),{},{active:!t}))}catch(r){console.log("API not available, simulating toggle")}await pe()}}catch(a){console.error("Error toggling alert:",a)}})(e.id,e.active),size:"small"}),(0,Y.jsx)(d.A,{size:"small",onClick:()=>(e=>{he({name:e.name,propertyTypes:e.criteria.propertyTypes||[],priceMin:e.criteria.priceMin||"",priceMax:e.criteria.priceMax||"",locations:e.criteria.locations||[],sizeMin:e.criteria.sizeMin||"",sizeMax:e.criteria.sizeMax||"",minCapRate:e.criteria.minCapRate||"",minCashFlow:e.criteria.minCashFlow||"",maxDaysOnMarket:e.criteria.maxDaysOnMarket||"",keywords:e.criteria.keywords||[],frequency:e.frequency,notifications:e.notifications||{email:!0,sms:!1,push:!0},active:e.active}),ie({open:!0,mode:"edit",alert:e})})(e),children:(0,Y.jsx)(Z.A,{})}),(0,Y.jsx)(d.A,{size:"small",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this alert?"))try{try{await X.$h.deleteAlert(e)}catch(t){console.log("API not available, simulating delete")}await pe()}catch(r){console.error("Error deleting alert:",r)}})(e.id),children:(0,Y.jsx)(G.A,{})})]})]}),(0,Y.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:X.u0.generateAlertSummary(e.criteria)}),(0,Y.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,Y.jsxs)(s.A,{sx:{display:"flex",alignItems:"center"},children:[(0,Y.jsx)(K.A,{sx:{fontSize:16,mr:.5,color:"text.secondary"}}),(0,Y.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]}),e.lastTriggered&&(0,Y.jsxs)(s.A,{sx:{display:"flex",alignItems:"center"},children:[(0,Y.jsx)(Q.A,{sx:{fontSize:16,mr:.5,color:"success.main"}}),(0,Y.jsxs)(o.A,{variant:"body2",color:"success.main",children:["Last matched: ",new Date(e.lastTriggered).toLocaleDateString()]})]})]})]})})},e.id);var t})})}),(0,Y.jsx)(ee,{value:r,index:1,children:0===re.length?(0,Y.jsx)(p.A,{children:(0,Y.jsxs)(x.A,{sx:{textAlign:"center",py:4},children:[(0,Y.jsx)($.A,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,Y.jsx)(o.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No notifications yet"}),(0,Y.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"When properties match your alert criteria, you'll see notifications here"})]})}):(0,Y.jsx)(f.A,{children:re.map((e,t)=>{var r;return(0,Y.jsxs)(a.Fragment,{children:[(0,Y.jsxs)(v.Ay,{alignItems:"flex-start",children:[(0,Y.jsx)(M.A,{children:(0,Y.jsx)(w.A,{sx:{bgcolor:e.read?"grey.300":"primary.main"},children:(0,Y.jsx)($.A,{})})}),(0,Y.jsx)(C.A,{primary:(0,Y.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,Y.jsx)(o.A,{variant:"body1",sx:{fontWeight:e.read?400:600},children:e.propertyName}),(0,Y.jsx)(g.A,{label:"".concat(e.matchScore,"% match"),color:"success",size:"small"}),!e.read&&(0,Y.jsx)(g.A,{label:"New",color:"primary",size:"small"})]}),secondary:(0,Y.jsxs)(s.A,{sx:{mt:1},children:[(0,Y.jsxs)(o.A,{variant:"body2",color:"text.secondary",children:["Alert: ",e.alertName]}),(0,Y.jsx)(o.A,{variant:"body2",color:"text.secondary",children:new Date(e.triggeredAt).toLocaleString()}),(0,Y.jsx)(s.A,{sx:{mt:1,display:"flex",flexWrap:"wrap",gap:.5},children:null===(r=e.matchDetails)||void 0===r?void 0:r.slice(0,3).map((e,t)=>(0,Y.jsx)(g.A,{label:e.criteria.replace("_"," "),size:"small",variant:"outlined",color:e.matched?"success":"default"},t))})]})}),(0,Y.jsx)(k.A,{children:(0,Y.jsx)(d.A,{children:(0,Y.jsx)(U.A,{})})})]}),t<re.length-1&&(0,Y.jsx)(b.A,{})]},e.id)})})}),(0,Y.jsxs)(z.A,{open:ne.open,onClose:()=>ie({open:!1,mode:"create",alert:null}),maxWidth:"md",fullWidth:!0,children:[(0,Y.jsx)(S.A,{children:"create"===ne.mode?"Create New Alert":"Edit Alert"}),(0,Y.jsx)(I.A,{children:(0,Y.jsx)(s.A,{sx:{pt:2},children:(0,Y.jsxs)(h.Ay,{container:!0,spacing:2,children:[(0,Y.jsx)(h.Ay,{item:!0,xs:12,children:(0,Y.jsx)(F.A,{fullWidth:!0,label:"Alert Name",value:de.name,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{name:e.target.value})),placeholder:"e.g., Downtown Office Buildings"})}),(0,Y.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,Y.jsx)(R.A,{multiple:!0,options:["office","retail","industrial","warehouse","mixed_use","land","apartment","hotel"],value:de.propertyTypes,onChange:(e,t)=>he((0,n.A)((0,n.A)({},de),{},{propertyTypes:t})),renderInput:e=>(0,Y.jsx)(F.A,(0,n.A)((0,n.A)({},e),{},{label:"Property Types"}))})}),(0,Y.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,Y.jsx)(R.A,{multiple:!0,options:["Downtown Seattle","Bellevue","Capitol Hill","Queen Anne","SODO","Georgetown","Fremont","Ballard"],value:de.locations,onChange:(e,t)=>he((0,n.A)((0,n.A)({},de),{},{locations:t})),renderInput:e=>(0,Y.jsx)(F.A,(0,n.A)((0,n.A)({},e),{},{label:"Locations"}))})}),(0,Y.jsx)(h.Ay,{item:!0,xs:6,children:(0,Y.jsx)(F.A,{fullWidth:!0,label:"Min Price",type:"number",value:de.priceMin,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{priceMin:e.target.value})),placeholder:"500000"})}),(0,Y.jsx)(h.Ay,{item:!0,xs:6,children:(0,Y.jsx)(F.A,{fullWidth:!0,label:"Max Price",type:"number",value:de.priceMax,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{priceMax:e.target.value})),placeholder:"2000000"})}),(0,Y.jsx)(h.Ay,{item:!0,xs:6,children:(0,Y.jsx)(F.A,{fullWidth:!0,label:"Min Size (sq ft)",type:"number",value:de.sizeMin,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{sizeMin:e.target.value})),placeholder:"1000"})}),(0,Y.jsx)(h.Ay,{item:!0,xs:6,children:(0,Y.jsx)(F.A,{fullWidth:!0,label:"Max Size (sq ft)",type:"number",value:de.sizeMax,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{sizeMax:e.target.value})),placeholder:"10000"})}),(0,Y.jsx)(h.Ay,{item:!0,xs:4,children:(0,Y.jsx)(F.A,{fullWidth:!0,label:"Min Cap Rate (%)",type:"number",value:de.minCapRate,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{minCapRate:e.target.value})),placeholder:"6.0"})}),(0,Y.jsx)(h.Ay,{item:!0,xs:4,children:(0,Y.jsx)(F.A,{fullWidth:!0,label:"Min Cash Flow",type:"number",value:de.minCashFlow,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{minCashFlow:e.target.value})),placeholder:"2000"})}),(0,Y.jsx)(h.Ay,{item:!0,xs:4,children:(0,Y.jsx)(F.A,{fullWidth:!0,label:"Max Days on Market",type:"number",value:de.maxDaysOnMarket,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{maxDaysOnMarket:e.target.value})),placeholder:"90"})}),(0,Y.jsx)(h.Ay,{item:!0,xs:12,children:(0,Y.jsx)(R.A,{multiple:!0,options:["parking","elevator","loading dock","high ceiling","modern","renovated","corner unit","street level"],value:de.keywords,onChange:(e,t)=>he((0,n.A)((0,n.A)({},de),{},{keywords:t})),renderInput:e=>(0,Y.jsx)(F.A,(0,n.A)((0,n.A)({},e),{},{label:"Keywords"}))})}),(0,Y.jsx)(h.Ay,{item:!0,xs:6,children:(0,Y.jsxs)(D.A,{fullWidth:!0,children:[(0,Y.jsx)(T.A,{children:"Frequency"}),(0,Y.jsxs)(O.A,{value:de.frequency,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{frequency:e.target.value})),label:"Frequency",children:[(0,Y.jsx)(P.A,{value:"realtime",children:"Real-time"}),(0,Y.jsx)(P.A,{value:"daily",children:"Daily"}),(0,Y.jsx)(P.A,{value:"weekly",children:"Weekly"}),(0,Y.jsx)(P.A,{value:"monthly",children:"Monthly"})]})]})}),(0,Y.jsx)(h.Ay,{item:!0,xs:6,children:(0,Y.jsx)(L.A,{children:(0,Y.jsx)(W.A,{control:(0,Y.jsx)(j.A,{checked:de.active,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{active:e.target.checked}))}),label:"Active"})})}),(0,Y.jsxs)(h.Ay,{item:!0,xs:12,children:[(0,Y.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Notification Methods"}),(0,Y.jsxs)(L.A,{row:!0,children:[(0,Y.jsx)(W.A,{control:(0,Y.jsx)(N.A,{checked:de.notifications.email,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{notifications:(0,n.A)((0,n.A)({},de.notifications),{},{email:e.target.checked})}))}),label:"Email"}),(0,Y.jsx)(W.A,{control:(0,Y.jsx)(N.A,{checked:de.notifications.sms,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{notifications:(0,n.A)((0,n.A)({},de.notifications),{},{sms:e.target.checked})}))}),label:"SMS"}),(0,Y.jsx)(W.A,{control:(0,Y.jsx)(N.A,{checked:de.notifications.push,onChange:e=>he((0,n.A)((0,n.A)({},de),{},{notifications:(0,n.A)((0,n.A)({},de.notifications),{},{push:e.target.checked})}))}),label:"Push"})]})]})]})})}),(0,Y.jsxs)(_.A,{children:[(0,Y.jsx)(l.A,{onClick:()=>ie({open:!1,mode:"create",alert:null}),children:"Cancel"}),(0,Y.jsx)(l.A,{onClick:async()=>{try{const t={criteria:{propertyTypes:de.propertyTypes,priceMin:de.priceMin?parseInt(de.priceMin):null,priceMax:de.priceMax?parseInt(de.priceMax):null,locations:de.locations,sizeMin:de.sizeMin?parseInt(de.sizeMin):null,sizeMax:de.sizeMax?parseInt(de.sizeMax):null,minCapRate:de.minCapRate?parseFloat(de.minCapRate)/100:null,minCashFlow:de.minCashFlow?parseInt(de.minCashFlow):null,maxDaysOnMarket:de.maxDaysOnMarket?parseInt(de.maxDaysOnMarket):null,keywords:de.keywords}};try{const e=await X.$h.testAlert(t);le(e)}catch(e){console.log("API not available, simulating test"),le({matchingProperties:3,sampleMatches:[{name:"123 Sample Property",score:95},{name:"456 Test Building",score:88},{name:"789 Demo Space",score:82}]})}ce(!0)}catch(t){console.error("Error testing alert:",t)}},variant:"outlined",children:"Test Alert"}),(0,Y.jsx)(l.A,{onClick:async()=>{try{const t={name:de.name,criteria:{propertyTypes:de.propertyTypes,priceMin:de.priceMin?parseInt(de.priceMin):null,priceMax:de.priceMax?parseInt(de.priceMax):null,locations:de.locations,sizeMin:de.sizeMin?parseInt(de.sizeMin):null,sizeMax:de.sizeMax?parseInt(de.sizeMax):null,minCapRate:de.minCapRate?parseFloat(de.minCapRate)/100:null,minCashFlow:de.minCashFlow?parseInt(de.minCashFlow):null,maxDaysOnMarket:de.maxDaysOnMarket?parseInt(de.maxDaysOnMarket):null,keywords:de.keywords},frequency:de.frequency,notifications:de.notifications,active:de.active};if("create"===ne.mode)try{await X.$h.createAlert(t)}catch(e){console.log("API not available, simulating create")}else try{await X.$h.updateAlert(ne.alert.id,t)}catch(e){console.log("API not available, simulating update")}ie({open:!1,mode:"create",alert:null}),await pe()}catch(t){console.error("Error saving alert:",t)}},variant:"contained",children:"create"===ne.mode?"Create Alert":"Save Changes"})]})]}),(0,Y.jsxs)(z.A,{open:se,onClose:()=>ce(!1),maxWidth:"sm",fullWidth:!0,children:[(0,Y.jsx)(S.A,{children:"Alert Test Results"}),(0,Y.jsx)(I.A,{children:oe&&(0,Y.jsxs)(s.A,{children:[(0,Y.jsxs)(o.A,{variant:"h6",sx:{mb:2},children:["Found ",oe.matchingProperties," matching properties"]}),oe.sampleMatches&&oe.sampleMatches.length>0&&(0,Y.jsxs)(s.A,{children:[(0,Y.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Sample matches:"}),(0,Y.jsx)(f.A,{children:oe.sampleMatches.map((e,t)=>(0,Y.jsx)(v.Ay,{children:(0,Y.jsx)(C.A,{primary:e.name,secondary:"".concat(e.score,"% match")})},t))})]})]})}),(0,Y.jsx)(_.A,{children:(0,Y.jsx)(l.A,{onClick:()=>ce(!1),children:"Close"})})]})]})},re=()=>(0,Y.jsx)(te,{})},76303:(e,t,r)=>{r.d(t,{$h:()=>n,fQ:()=>c,fr:()=>s,u0:()=>i});var a=r(94505);const n={getAlerts:async e=>{try{return(await a.Ay.get("/property-alerts/user/".concat(e))).data}catch(t){throw console.error("Failed to fetch property alerts:",t),t}},createAlert:async e=>{try{return(await a.Ay.post("/property-alerts",e)).data}catch(t){throw console.error("Failed to create property alert:",t),t}},updateAlert:async(e,t)=>{try{return(await a.Ay.put("/property-alerts/".concat(e),t)).data}catch(r){throw console.error("Failed to update property alert:",r),r}},deleteAlert:async e=>{try{return(await a.Ay.delete("/property-alerts/".concat(e))).data}catch(t){throw console.error("Failed to delete property alert:",t),t}},getTriggeredAlerts:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{return(await a.Ay.get("/property-alerts/triggered/".concat(e),{params:{limit:t}})).data}catch(r){throw console.error("Failed to fetch triggered alerts:",r),r}},markAlertsAsRead:async e=>{try{return(await a.Ay.post("/property-alerts/mark-read",{alertIds:e})).data}catch(t){throw console.error("Failed to mark alerts as read:",t),t}},testAlert:async e=>{try{return(await a.Ay.post("/property-alerts/test",e)).data}catch(t){throw console.error("Failed to test alert:",t),t}}};class i{static evaluateProperty(e,t){const r=[];let a=!0;if(t.priceMin||t.priceMax){const n=this.checkPriceRange(e.price,t.priceMin,t.priceMax);r.push({criteria:"price_range",matched:n.matched,value:e.price,expected:"".concat(t.priceMin||0," - ").concat(t.priceMax||"\u221e"),score:n.score}),n.matched||(a=!1)}if(t.propertyTypes&&t.propertyTypes.length>0){const n=t.propertyTypes.includes(e.type);r.push({criteria:"property_type",matched:n,value:e.type,expected:t.propertyTypes.join(", "),score:n?100:0}),n||(a=!1)}if(t.locations&&t.locations.length>0){const n=this.checkLocationMatch(e.location,t.locations,t.locationRadius);r.push({criteria:"location",matched:n.matched,value:e.location,expected:t.locations.join(", "),score:n.score}),n.matched||(a=!1)}if(t.sizeMin||t.sizeMax){const n=this.checkSizeRange(e.size,t.sizeMin,t.sizeMax);r.push({criteria:"size_range",matched:n.matched,value:e.size,expected:"".concat(t.sizeMin||0," - ").concat(t.sizeMax||"\u221e"," sq ft"),score:n.score}),n.matched||(a=!1)}if(t.minCapRate){const n=e.capRate>=t.minCapRate;r.push({criteria:"cap_rate",matched:n,value:e.capRate?"".concat((100*e.capRate).toFixed(2),"%"):"N/A",expected:"\u2265 ".concat((100*t.minCapRate).toFixed(2),"%"),score:n?100:0}),n||(a=!1)}if(t.minCashFlow){const n=e.monthlyCashFlow>=t.minCashFlow;r.push({criteria:"cash_flow",matched:n,value:e.monthlyCashFlow?"$".concat(e.monthlyCashFlow.toLocaleString()):"N/A",expected:"\u2265 $".concat(t.minCashFlow.toLocaleString()),score:n?100:0}),n||(a=!1)}if(t.maxDaysOnMarket){const n=e.daysOnMarket<=t.maxDaysOnMarket;r.push({criteria:"days_on_market",matched:n,value:"".concat(e.daysOnMarket," days"),expected:"\u2264 ".concat(t.maxDaysOnMarket," days"),score:n?100:0}),n||(a=!1)}if(t.keywords&&t.keywords.length>0){const n=this.checkKeywords(e,t.keywords);r.push({criteria:"keywords",matched:n.matched,value:n.foundKeywords.join(", ")||"None found",expected:t.keywords.join(", "),score:n.score}),n.matched||(a=!1)}const n=r.reduce((e,t)=>e+t.score,0)/r.length;return{matched:a,score:Math.round(n),matchDetails:r,property:e}}static checkPriceRange(e,t,r){if(!e)return{matched:!1,score:0};const a=t||0,n=r||1/0,i=e>=a&&e<=n;let s=0;if(i)if(n===1/0)s=100;else{const t=(e-a)/(n-a);s=100-100*Math.abs(t-.5)}return{matched:i,score:Math.max(0,Math.round(s))}}static checkLocationMatch(e,t){if(!e||!t.length)return{matched:!1,score:0};const r=e.toLowerCase();for(const a of t){const e=a.toLowerCase();if(r.includes(e)||e.includes(r))return{matched:!0,score:100};const t=r.split(/[,\s]+/),n=e.split(/[,\s]+/),i=t.filter(e=>n.some(t=>e.length>2&&t.length>2&&(e.includes(t)||t.includes(e))));if(i.length>0){const e=i.length/Math.max(t.length,n.length);if(e>=.3)return{matched:!0,score:Math.round(100*e)}}}return{matched:!1,score:0}}static checkSizeRange(e,t,r){if(!e)return{matched:!1,score:0};const a=t||0,n=r||1/0,i=e>=a&&e<=n;let s=0;if(i)if(n===1/0)s=100;else{const t=(e-a)/(n-a);s=100-100*Math.abs(t-.5)}return{matched:i,score:Math.max(0,Math.round(s))}}static checkKeywords(e,t){var r,a;const n=[e.name,e.description,null===(r=e.features)||void 0===r?void 0:r.join(" "),null===(a=e.amenities)||void 0===a?void 0:a.join(" ")].filter(Boolean).join(" ").toLowerCase(),i=t.filter(e=>n.includes(e.toLowerCase())),s=i.length>0,c=s?i.length/t.length*100:0;return{matched:s,score:Math.round(c),foundKeywords:i}}static generateAlertSummary(e){var t,r;const a=[];if(e.priceMin||e.priceMax){const t=e.priceMin?"$".concat(e.priceMin.toLocaleString()):"Any",r=e.priceMax?"$".concat(e.priceMax.toLocaleString()):"Any";a.push("Price: ".concat(t," - ").concat(r))}if(null!==(t=e.propertyTypes)&&void 0!==t&&t.length&&a.push("Type: ".concat(e.propertyTypes.join(", "))),null!==(r=e.locations)&&void 0!==r&&r.length&&a.push("Location: ".concat(e.locations.join(", "))),e.sizeMin||e.sizeMax){const t=e.sizeMin?"".concat(e.sizeMin.toLocaleString()):"Any",r=e.sizeMax?"".concat(e.sizeMax.toLocaleString()):"Any";a.push("Size: ".concat(t," - ").concat(r," sq ft"))}return e.minCapRate&&a.push("Min Cap Rate: ".concat((100*e.minCapRate).toFixed(1),"%")),e.minCashFlow&&a.push("Min Cash Flow: $".concat(e.minCashFlow.toLocaleString())),a.join(" \u2022 ")}static processAlertsForProperties(e,t){const r=[];return t.forEach(t=>{if(!t.active)return;const a=[];e.forEach(e=>{const r=this.evaluateProperty(e,t.criteria);r.matched&&a.push(r)}),a.length>0&&r.push({alert:t,properties:a,triggeredAt:new Date,count:a.length})}),r}}const s=[{id:"1",name:"Downtown Office Buildings",criteria:{propertyTypes:["office"],priceMin:5e5,priceMax:2e6,locations:["Downtown Seattle","Bellevue"],minCapRate:.06,keywords:["parking","elevator"]},active:!0,createdAt:"2024-01-15T10:00:00Z",frequency:"daily",lastTriggered:"2024-01-20T08:30:00Z"},{id:"2",name:"Retail Investment Properties",criteria:{propertyTypes:["retail"],priceMax:15e5,locations:["Capitol Hill","Queen Anne"],minCashFlow:2e3,maxDaysOnMarket:60},active:!0,createdAt:"2024-01-10T14:30:00Z",frequency:"weekly",lastTriggered:null},{id:"3",name:"Industrial Warehouse Deals",criteria:{propertyTypes:["industrial","warehouse"],priceMin:8e5,sizeMin:1e4,locations:["SODO","Georgetown"],keywords:["loading dock","high ceiling"]},active:!1,createdAt:"2024-01-05T09:15:00Z",frequency:"daily",lastTriggered:"2024-01-18T16:45:00Z"}],c=[{id:"1",alertId:"1",alertName:"Downtown Office Buildings",propertyId:"prop_123",propertyName:"456 Pine Street Office Complex",triggeredAt:"2024-01-20T08:30:00Z",read:!1,matchScore:95,matchDetails:[{criteria:"property_type",matched:!0,value:"office",expected:"office",score:100},{criteria:"price_range",matched:!0,value:125e4,expected:"500000 - 2000000",score:90},{criteria:"location",matched:!0,value:"Downtown Seattle",expected:"Downtown Seattle, Bellevue",score:100}]},{id:"2",alertId:"2",alertName:"Retail Investment Properties",propertyId:"prop_456",propertyName:"Capitol Hill Retail Space",triggeredAt:"2024-01-19T14:15:00Z",read:!0,matchScore:88,matchDetails:[{criteria:"property_type",matched:!0,value:"retail",expected:"retail",score:100},{criteria:"price_range",matched:!0,value:95e4,expected:"0 - 1500000",score:85},{criteria:"cash_flow",matched:!0,value:2500,expected:"\u2265 2000",score:80}]}]},83560:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(66734),n=r(70579);const i=(0,a.A)((0,n.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")}}]);
//# sourceMappingURL=2019.84ca11c8.chunk.js.map