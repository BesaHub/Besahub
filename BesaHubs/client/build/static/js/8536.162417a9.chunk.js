"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[8536],{38536:(e,t,a)=>{a.r(t),a.d(t,{default:()=>de});var i=a(89379),o=a(65043),n=a(73216),r=a(96446),s=a(81637),l=a(85865),c=a(67254),d=a(11906),p=a(19252),m=a(63336),h=a(68903),y=a(67784),u=a(51787),x=a(53193),g=a(18356),A=a(72221),v=a(32143),f=a(43845),b=a(79650),j=a(71806),w=a(84882),C=a(28076),S=a(10039),D=a(58093),k=a(73460),T=a(10611),N=a(81045),z=a(17392),I=a(79266),L=a(72437),P=a(2050),W=a(48734),M=a(39336),E=a(83462),R=a(26600),Z=a(35316),F=a(29347),B=a(73158),U=a(26240),q=a(69131),O=a(70141),G=a(95846),H=a(98606),_=a(36910),J=a(51387),V=a(20979),K=a(83560),Y=a(34190),Q=a(66201),X=a(58823),$=a(30416),ee=a(77111),te=a(58558),ae=a(79888),ie=a(47805),oe=a(79484),ne=a(42796),re=a(3632),se=a(34642),le=a(42223),ce=a(70579);const de=()=>{var e;const t=(0,U.A)(),a=(0,n.Zp)(),[de,pe]=(0,o.useState)([]),[me,he]=(0,o.useState)(!0),[ye,ue]=(0,o.useState)(null),[xe,ge]=(0,o.useState)(""),[Ae,ve]=(0,o.useState)(""),[fe,be]=(0,o.useState)(""),[je,we]=(0,o.useState)(""),[Ce,Se]=(0,o.useState)({min:"",max:""}),[De,ke]=(0,o.useState)({min:"",max:""}),[Te,Ne]=(0,o.useState)("lastActivityDate"),[ze,Ie]=(0,o.useState)("desc"),[Le,Pe]=(0,o.useState)({open:!1,deal:null}),[We,Me]=(0,o.useState)({open:!1,message:"",severity:"success"}),[Ee,Re]=(0,o.useState)({element:null,deal:null}),[Ze,Fe]=(0,o.useState)(0),[Be,Ue]=(0,o.useState)(10),qe=(0,o.useMemo)(()=>[{id:"1",name:"Downtown Office Tower Acquisition",propertyId:"1",contactId:"1",stage:"negotiation",type:"sale",priority:"high",value:125e5,probability:80,expectedCloseDate:"2024-03-15",createdAt:"2024-01-15T10:00:00Z",lastActivityDate:"2024-01-22T14:30:00Z",assignedTo:{firstName:"John",lastName:"Smith",email:"john.smith@company.com"},property:{name:"Metropolitan Office Tower",address:"1250 Fifth Avenue, Downtown",propertyType:"office"},contact:{firstName:"David",lastName:"Park",companyName:"Park Investment Group",type:"individual"},notes:"Major institutional buyer. Due diligence in progress. Strong financing confirmed.",tags:["Hot Lead","Institutional","Pre-Approved"]},{id:"2",name:"Logistics Center Long-Term Lease",propertyId:"2",contactId:"2",stage:"proposal",type:"lease",priority:"high",value:45e4,probability:70,expectedCloseDate:"2024-02-28",createdAt:"2024-01-10T09:00:00Z",lastActivityDate:"2024-01-21T11:00:00Z",assignedTo:{firstName:"Sarah",lastName:"Johnson",email:"sarah.johnson@company.com"},property:{name:"Southeast Distribution Hub",address:"4500 Industrial Parkway",propertyType:"industrial"},contact:{companyName:"Global Logistics Solutions",type:"company"},notes:"10-year lease term requested. Needs loading dock modifications.",tags:["Corporate Client","Long Term","Modifications Required"]},{id:"3",name:"Medical Office Building Purchase",propertyId:"3",contactId:"13",stage:"closing",type:"sale",priority:"high",value:42e5,probability:95,expectedCloseDate:"2024-02-15",createdAt:"2024-12-05T15:30:00Z",lastActivityDate:"2024-01-20T16:45:00Z",assignedTo:{firstName:"Emily",lastName:"Rodriguez",email:"emily@company.com"},property:{name:"Riverside Medical Center",address:"890 Medical Plaza Drive",propertyType:"medical"},contact:{companyName:"Healthcare Partners LLC",type:"company"},notes:"Final walk-through scheduled. Closing docs in review.",tags:["Nearly Closed","Medical","Closing This Month"]},{id:"4",name:"Retail Shopping Center Sale",propertyId:"4",contactId:"4",stage:"due_diligence",type:"sale",priority:"medium",value:875e4,probability:60,expectedCloseDate:"2024-04-30",createdAt:"2024-01-08T12:00:00Z",lastActivityDate:"2024-01-19T09:30:00Z",assignedTo:{firstName:"Michael",lastName:"Chen",email:"mchen@company.com"},property:{name:"Westside Shopping Plaza",address:"1200 Commerce Way",propertyType:"retail"},contact:{firstName:"Michael",lastName:"Chen",companyName:"Chen Capital",type:"individual"},notes:"Environmental study pending. Good anchor tenant mix.",tags:["Due Diligence","Environmental Review","Strong Tenants"]},{id:"5",name:"Tech Startup Office Lease",propertyId:"5",contactId:"7",stage:"proposal",type:"lease",priority:"medium",value:24e4,probability:55,expectedCloseDate:"2024-03-31",createdAt:"2024-01-12T14:15:00Z",lastActivityDate:"2024-01-18T10:20:00Z",assignedTo:{firstName:"Lisa",lastName:"Thompson",email:"lisa@company.com"},property:{name:"Innovation District Offices",address:"500 Tech Boulevard",propertyType:"office"},contact:{companyName:"TechStart Ventures",type:"company"},notes:"5-year lease with 2 expansion options. Open floor plan required.",tags:["Tech Client","Growth Company","Expansion Options"]},{id:"6",name:"Manufacturing Facility Acquisition",propertyId:"6",contactId:"12",stage:"prospecting",type:"sale",priority:"medium",value:32e5,probability:30,expectedCloseDate:"2024-05-15",createdAt:"2024-01-18T11:45:00Z",lastActivityDate:"2024-01-19T15:30:00Z",assignedTo:{firstName:"Robert",lastName:"Williams",email:"rwilliams@company.com"},property:{name:"Northwest Manufacturing Complex",address:"750 Industrial Road",propertyType:"industrial"},contact:{firstName:"James",lastName:"Miller",companyName:"Miller Construction",type:"individual"},notes:"Owner-user purchase. Needs equipment inspection.",tags:["Owner User","Manufacturing","Equipment Included"]},{id:"7",name:"Multifamily Investment Sale",propertyId:"7",contactId:"11",stage:"negotiation",type:"sale",priority:"high",value:68e5,probability:75,expectedCloseDate:"2024-03-20",createdAt:"2024-01-02T09:00:00Z",lastActivityDate:"2024-01-21T13:15:00Z",assignedTo:{firstName:"Amanda",lastName:"Davis",email:"amanda@company.com"},property:{name:"Garden View Apartments",address:"1500 Residential Lane",propertyType:"multifamily"},contact:{firstName:"Amanda",lastName:"Davis",companyName:"Davis Capital Management",type:"individual"},notes:"84-unit apartment complex. 95% occupancy. Value-add opportunity.",tags:["Multifamily","Value Add","Strong Occupancy"]},{id:"8",name:"Hotel Portfolio Disposition",propertyId:"8",contactId:"1",stage:"marketing",type:"sale",priority:"low",value:25e6,probability:40,expectedCloseDate:"2024-06-30",createdAt:"2024-01-20T16:00:00Z",lastActivityDate:"2024-01-21T10:00:00Z",assignedTo:{firstName:"John",lastName:"Smith",email:"john.smith@company.com"},property:{name:"Regional Hotel Portfolio",address:"Multiple Locations",propertyType:"hotel"},contact:{firstName:"John",lastName:"Smith",companyName:"Smith Properties",type:"individual"},notes:"3-property hotel portfolio. Market just launched.",tags:["Portfolio Sale","Hospitality","Multiple Assets"]},{id:"9",name:"Cold Storage Lease Renewal",propertyId:"9",contactId:"2",stage:"negotiation",type:"lease",priority:"medium",value:32e4,probability:85,expectedCloseDate:"2024-02-29",createdAt:"2024-01-05T08:30:00Z",lastActivityDate:"2024-01-20T14:00:00Z",assignedTo:{firstName:"Sarah",lastName:"Johnson",email:"sarah.johnson@company.com"},property:{name:"Arctic Storage Facility",address:"200 Cold Chain Drive",propertyType:"industrial"},contact:{companyName:"ABC Development Corp",type:"company"},notes:"Existing tenant renewal. Negotiating rent increase.",tags:["Renewal","Existing Tenant","Specialized Use"]},{id:"10",name:"Mixed-Use Development Sale",propertyId:"10",contactId:"15",stage:"qualification",type:"sale",priority:"low",value:185e5,probability:25,expectedCloseDate:"2024-07-15",createdAt:"2024-01-22T12:30:00Z",lastActivityDate:"2024-01-22T12:30:00Z",assignedTo:{firstName:"Jennifer",lastName:"Lee",email:"jennifer@company.com"},property:{name:"Central Square Development",address:"1000 Main Street",propertyType:"mixed-use"},contact:{firstName:"Kevin",lastName:"Brown",companyName:"Brown Investment Fund",type:"individual"},notes:"Ground-up development opportunity. Zoning approved.",tags:["Development","Mixed Use","Zoning Approved"]},{id:"11",name:"Restaurant Space Sublease",propertyId:"11",contactId:"8",stage:"proposal",type:"sublease",priority:"low",value:96e3,probability:40,expectedCloseDate:"2024-04-01",createdAt:"2024-01-16T10:45:00Z",lastActivityDate:"2024-01-17T16:20:00Z",assignedTo:{firstName:"Robert",lastName:"Williams",email:"rwilliams@company.com"},property:{name:"Downtown Culinary District",address:"350 Food Court Plaza",propertyType:"retail"},contact:{firstName:"Lisa",lastName:"Thompson",companyName:"Thompson & Associates",type:"individual"},notes:"Restaurant space with existing kitchen. Short-term sublease.",tags:["Sublease","Restaurant","Existing Kitchen"]},{id:"12",name:"Data Center Investment",propertyId:"12",contactId:"6",stage:"due_diligence",type:"sale",priority:"high",value:45e6,probability:65,expectedCloseDate:"2024-05-30",createdAt:"2024-01-01T14:20:00Z",lastActivityDate:"2024-01-21T11:30:00Z",assignedTo:{firstName:"Michael",lastName:"Chen",email:"mchen@company.com"},property:{name:"Edge Computing Center",address:"800 Data Drive",propertyType:"industrial"},contact:{firstName:"David",lastName:"Park",companyName:"Park Investment Group",type:"individual"},notes:"Mission-critical facility. Extensive technical due diligence required.",tags:["Data Center","Mission Critical","Technical DD"]}],[]);(0,o.useEffect)(()=>{(async()=>{try{he(!0);try{const e=await le.zb.getDeals({page:1,limit:100});e&&e.deals?pe(e.deals):pe(qe)}catch(e){pe(qe)}}catch(t){ue("Failed to load deals")}finally{he(!1)}})()},[qe]);const Oe=(0,o.useCallback)(()=>{a("/deals/new")},[a]),Ge=(0,o.useCallback)(e=>{a("/deals/".concat(e.id))},[a]),He=(0,o.useCallback)(e=>{a("/deals/".concat(e.id,"/edit"))},[a]),_e=(0,o.useCallback)((e,t)=>{Re({element:e.currentTarget,deal:t})},[]),Je=(0,o.useCallback)(()=>{Re({element:null,deal:null})},[]),Ve=(0,o.useMemo)(()=>{let e=de.filter(e=>{var t,a,i,o,n,r,s,l,c,d,p,m,h,y,u,x;const g=!xe||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(xe.toLowerCase()))||(null===(a=e.property)||void 0===a||null===(i=a.name)||void 0===i?void 0:i.toLowerCase().includes(xe.toLowerCase()))||(null===(o=e.property)||void 0===o||null===(n=o.address)||void 0===n?void 0:n.toLowerCase().includes(xe.toLowerCase()))||(null===(r=e.contact)||void 0===r||null===(s=r.firstName)||void 0===s?void 0:s.toLowerCase().includes(xe.toLowerCase()))||(null===(l=e.contact)||void 0===l||null===(c=l.lastName)||void 0===c?void 0:c.toLowerCase().includes(xe.toLowerCase()))||(null===(d=e.contact)||void 0===d||null===(p=d.companyName)||void 0===p?void 0:p.toLowerCase().includes(xe.toLowerCase()))||(null===(m=e.assignedTo)||void 0===m||null===(h=m.firstName)||void 0===h?void 0:h.toLowerCase().includes(xe.toLowerCase()))||(null===(y=e.assignedTo)||void 0===y||null===(u=y.lastName)||void 0===u?void 0:u.toLowerCase().includes(xe.toLowerCase()))||(null===(x=e.notes)||void 0===x?void 0:x.toLowerCase().includes(xe.toLowerCase())),A=!Ae||e.stage===Ae,v=!fe||(e.type||e.dealType)===fe,f=!je||e.priority===je;let b=!0;if(Ce.min||Ce.max){const t=e.value||0,a=Ce.min?parseFloat(Ce.min):0,i=Ce.max?parseFloat(Ce.max):1/0;b=t>=a&&t<=i}let j=!0;if(De.min||De.max){const t=e.probability||0,a=De.min?parseFloat(De.min):0,i=De.max?parseFloat(De.max):100;j=t>=a&&t<=i}return g&&A&&v&&f&&b&&j});return e.sort((e,t)=>{let a,i;switch(Te){case"name":a=e.name||"",i=t.name||"";break;case"value":a=e.value||0,i=t.value||0;break;case"probability":a=e.probability||0,i=t.probability||0;break;case"expectedCloseDate":a=new Date(e.expectedCloseDate||0),i=new Date(t.expectedCloseDate||0);break;case"lastActivityDate":a=new Date(e.lastActivityDate||0),i=new Date(t.lastActivityDate||0);break;case"stage":a=e.stage||"",i=t.stage||"";break;default:return 0}return a<i?"asc"===ze?-1:1:a>i?"asc"===ze?1:-1:0}),e},[de,xe,Ae,fe,je,Ce,De,Te,ze]),Ke=(0,o.useMemo)(()=>{const e=Ze*Be,t=e+Be;return Ve.slice(e,t)},[Ve,Ze,Be]),Ye=(0,o.useCallback)((e,t)=>{Fe(t)},[]),Qe=(0,o.useCallback)(e=>{Ue(parseInt(e.target.value,10)),Fe(0)},[]),Xe=[xe,Ae,fe,je,Ce.min,Ce.max,De.min,De.max].filter(Boolean).length,$e=e=>e>=70?t.palette.success.main:e>=40?t.palette.warning.main:t.palette.error.main;return me?(0,ce.jsxs)(r.A,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"50vh"},children:[(0,ce.jsx)(s.A,{size:60}),(0,ce.jsx)(l.A,{variant:"h6",sx:{mt:2,color:"text.secondary"},children:"Loading deals..."})]}):ye?(0,ce.jsxs)(r.A,{children:[(0,ce.jsxs)(c.A,{severity:"error",sx:{mb:2},children:[(0,ce.jsx)(l.A,{variant:"h6",children:"Failed to load deals"}),(0,ce.jsx)(l.A,{children:ye})]}),(0,ce.jsx)(d.A,{variant:"contained",onClick:()=>window.location.reload(),sx:{mt:2},children:"Retry"})]}):(0,ce.jsxs)(p.A,{maxWidth:"xl",sx:{py:t.spacing(3)},children:[(0,ce.jsxs)(r.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:t.spacing(3)},children:[(0,ce.jsx)(l.A,{variant:"h4",sx:{fontWeight:700,mb:t.spacing(.5)},children:"Deals & Opportunities"}),(0,ce.jsxs)(r.A,{sx:{display:"flex",gap:t.spacing(1)},children:[(0,ce.jsx)(d.A,{variant:"outlined",startIcon:(0,ce.jsx)(ie.A,{}),onClick:async()=>{he(!0);try{const e=await le.zb.getDeals({page:1,limit:100});e&&e.deals&&(pe(e.deals),Me({open:!0,message:"Deals updated successfully",severity:"success"}))}catch(e){Me({open:!0,message:"Failed to refresh deals",severity:"error"})}finally{he(!1)}},disabled:me,children:"Refresh"}),(0,ce.jsx)(d.A,{variant:"contained",startIcon:(0,ce.jsx)(O.A,{}),onClick:Oe,children:"Add Deal"})]})]}),(0,ce.jsx)(m.A,{elevation:2,sx:{p:t.spacing(3),mb:t.spacing(3),borderRadius:2},children:(0,ce.jsxs)(h.Ay,{container:!0,spacing:t.spacing(2),alignItems:"center",children:[(0,ce.jsx)(h.Ay,{item:!0,xs:12,md:3,children:(0,ce.jsx)(y.A,{fullWidth:!0,placeholder:"Search deals...",value:xe,onChange:e=>ge(e.target.value),InputProps:{startAdornment:(0,ce.jsx)(u.A,{position:"start",children:(0,ce.jsx)(oe.A,{})})}})}),(0,ce.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ce.jsxs)(x.A,{fullWidth:!0,children:[(0,ce.jsx)(g.A,{children:"Stage"}),(0,ce.jsxs)(A.A,{value:Ae,label:"Stage",onChange:e=>ve(e.target.value),children:[(0,ce.jsx)(v.A,{value:"",children:"All Stages"}),le.vG.filter(e=>"closed_lost"!==e.id).map(e=>(0,ce.jsx)(v.A,{value:e.id,children:e.name},e.id))]})]})}),(0,ce.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ce.jsxs)(x.A,{fullWidth:!0,children:[(0,ce.jsx)(g.A,{children:"Type"}),(0,ce.jsxs)(A.A,{value:fe,label:"Type",onChange:e=>be(e.target.value),children:[(0,ce.jsx)(v.A,{value:"",children:"All Types"}),le.vn.map(e=>(0,ce.jsx)(v.A,{value:e.id,children:e.name},e.id))]})]})}),(0,ce.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ce.jsxs)(x.A,{fullWidth:!0,children:[(0,ce.jsx)(g.A,{children:"Priority"}),(0,ce.jsxs)(A.A,{value:je,label:"Priority",onChange:e=>we(e.target.value),children:[(0,ce.jsx)(v.A,{value:"",children:"All Priorities"}),le.kx.map(e=>(0,ce.jsx)(v.A,{value:e.id,children:e.name},e.id))]})]})}),(0,ce.jsx)(h.Ay,{item:!0,xs:12,md:2,children:(0,ce.jsxs)(d.A,{variant:Xe>0?"contained":"outlined",startIcon:(0,ce.jsx)(Y.A,{}),onClick:()=>{ge(""),ve(""),be(""),we(""),Se({min:"",max:""}),ke({min:"",max:""}),Ne("lastActivityDate"),Ie("desc")},disabled:0===Xe,fullWidth:!0,color:Xe>0?"secondary":"primary",children:["Clear Filters",Xe>0&&(0,ce.jsx)(f.A,{label:Xe,size:"small",sx:{ml:1,height:20,backgroundColor:"white",color:"secondary.main"}})]})}),(0,ce.jsx)(h.Ay,{item:!0,xs:12,md:1,children:(0,ce.jsx)(d.A,{variant:"outlined",startIcon:(0,ce.jsx)(G.A,{}),onClick:()=>a("/pipeline"),fullWidth:!0,children:"Pipeline"})})]})}),(0,ce.jsx)(r.A,{sx:{mb:2,display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,ce.jsxs)(l.A,{variant:"body1",color:"text.secondary",sx:{fontSize:"0.95rem"},children:[Ve.length>0?(0,ce.jsxs)(ce.Fragment,{children:["Showing ",(0,ce.jsxs)("strong",{children:[Ze*Be+1,"-",Math.min((Ze+1)*Be,Ve.length)]})," of ",(0,ce.jsx)("strong",{children:Ve.length})," deals"]}):"No deals found",Xe>0&&(0,ce.jsx)(f.A,{label:"".concat(Xe," filter").concat(Xe>1?"s":""," active"),size:"small",color:"primary",sx:{ml:1,fontSize:"0.75rem"}})]})}),0===Ve.length?(0,ce.jsxs)(m.A,{sx:{p:6,textAlign:"center"},children:[(0,ce.jsx)(l.A,{variant:"h6",color:"text.secondary",sx:{mb:2},children:0===de.length?"No deals found":"No matching deals"}),(0,ce.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:3},children:0===de.length?"Get started by creating your first deal":"Try adjusting your search or filter criteria"}),(0,ce.jsx)(d.A,{variant:"contained",startIcon:(0,ce.jsx)(O.A,{}),onClick:Oe,children:0===de.length?"Create Your First Deal":"Add Deal"})]}):(0,ce.jsxs)(b.A,{component:m.A,sx:{boxShadow:3,borderRadius:2,maxHeight:"calc(100vh - 350px)",overflow:"auto"},children:[(0,ce.jsxs)(j.A,{stickyHeader:!0,size:"small",sx:{minWidth:1400},children:[(0,ce.jsx)(w.A,{children:(0,ce.jsxs)(C.A,{children:[(0,ce.jsx)(S.A,{sx:{backgroundColor:t.palette.primary.main,borderBottom:"2px solid ".concat(t.palette.primary.dark),py:.75},children:(0,ce.jsx)(D.A,{active:"name"===Te,direction:"name"===Te?ze:"asc",onClick:()=>{Ne("name"),Ie("name"===Te&&"asc"===ze?"desc":"asc")},sx:{"& .MuiTableSortLabel-icon":{color:"white !important"}},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,color:"white",fontSize:"0.813rem"},children:"Deal Name"})})}),(0,ce.jsx)(S.A,{sx:{backgroundColor:t.palette.primary.main,borderBottom:"2px solid ".concat(t.palette.primary.dark),py:.75},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,color:"white",fontSize:"0.813rem"},children:"Property"})}),(0,ce.jsx)(S.A,{sx:{backgroundColor:t.palette.primary.main,borderBottom:"2px solid ".concat(t.palette.primary.dark),py:.75},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,color:"white",fontSize:"0.813rem"},children:"Contact"})}),(0,ce.jsx)(S.A,{sx:{backgroundColor:t.palette.primary.main,borderBottom:"2px solid ".concat(t.palette.primary.dark),py:.75},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,color:"white",fontSize:"0.813rem"},children:"Type"})}),(0,ce.jsx)(S.A,{sx:{backgroundColor:t.palette.primary.main,borderBottom:"2px solid ".concat(t.palette.primary.dark),py:.75},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,color:"white",fontSize:"0.813rem"},children:"Stage"})}),(0,ce.jsx)(S.A,{align:"right",sx:{backgroundColor:t.palette.primary.main,borderBottom:"2px solid ".concat(t.palette.primary.dark),py:.75},children:(0,ce.jsx)(D.A,{active:"value"===Te,direction:"value"===Te?ze:"asc",onClick:()=>{Ne("value"),Ie("value"===Te&&"asc"===ze?"desc":"asc")},sx:{"& .MuiTableSortLabel-icon":{color:"white !important"}},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,color:"white",fontSize:"0.813rem"},children:"Value"})})}),(0,ce.jsx)(S.A,{align:"center",sx:{backgroundColor:t.palette.primary.main,borderBottom:"2px solid ".concat(t.palette.primary.dark),py:.75},children:(0,ce.jsx)(D.A,{active:"probability"===Te,direction:"probability"===Te?ze:"asc",onClick:()=>{Ne("probability"),Ie("probability"===Te&&"asc"===ze?"desc":"asc")},sx:{"& .MuiTableSortLabel-icon":{color:"white !important"}},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,color:"white",fontSize:"0.813rem"},children:"Probability"})})}),(0,ce.jsx)(S.A,{sx:{backgroundColor:t.palette.primary.main,borderBottom:"2px solid ".concat(t.palette.primary.dark),py:.75},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,color:"white",fontSize:"0.813rem"},children:"Priority"})}),(0,ce.jsx)(S.A,{sx:{backgroundColor:t.palette.primary.main,borderBottom:"2px solid ".concat(t.palette.primary.dark),py:.75},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,color:"white",fontSize:"0.813rem"},children:"Health"})}),(0,ce.jsx)(S.A,{sx:{backgroundColor:t.palette.primary.main,borderBottom:"2px solid ".concat(t.palette.primary.dark),py:.75},children:(0,ce.jsx)(D.A,{active:"expectedCloseDate"===Te,direction:"expectedCloseDate"===Te?ze:"asc",onClick:()=>{Ne("expectedCloseDate"),Ie("expectedCloseDate"===Te&&"asc"===ze?"desc":"asc")},sx:{"& .MuiTableSortLabel-icon":{color:"white !important"}},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,color:"white",fontSize:"0.813rem"},children:"Expected Close"})})}),(0,ce.jsx)(S.A,{sx:{backgroundColor:t.palette.primary.main,borderBottom:"2px solid ".concat(t.palette.primary.dark),py:.75},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,color:"white",fontSize:"0.813rem"},children:"Assigned To"})}),(0,ce.jsx)(S.A,{align:"center",sx:{backgroundColor:t.palette.primary.main,borderBottom:"2px solid ".concat(t.palette.primary.dark),py:.75},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,color:"white",fontSize:"0.813rem"},children:"Actions"})})]})}),(0,ce.jsx)(k.A,{children:Ke.map((e,i)=>{var o,n,s,c,d,p,m,h,y,u,x,g,A;const v=(b=e.stage,le.vG.find(e=>e.id===b)||le.vG[0]);var b;const j=(w=e.priority,le.kx.find(e=>e.id===w)||le.kx[0]);var w;const D=(e=>{const a=Math.floor((new Date-new Date(e.lastActivityDate))/864e5),i=Math.floor((new Date(e.expectedCloseDate)-new Date)/864e5);return a>14&&e.probability<50?{status:"stalled",color:t.palette.error.main,icon:se.A,text:"Stalled"}:i<7&&e.probability<70?{status:"at-risk",color:t.palette.warning.main,icon:q.A,text:"At Risk"}:e.probability>=80?{status:"healthy",color:t.palette.success.main,icon:H.A,text:"Healthy"}:a>7?{status:"needs-attention",color:t.palette.warning.main,icon:q.A,text:"Needs Attention"}:{status:"normal",color:t.palette.info.main,icon:ne.A,text:"On Track"}})(e),k=(e=>({prospecting:oe.A,qualification:G.A,proposal:V.A,negotiation:X.A,due_diligence:G.A,closing:Q.A,marketing:ee.A}[e]||ne.A))(e.stage),I=(e=>({high:ae.A,medium:se.A,low:H.A}[e]||H.A))(e.priority),L=D.icon;return(0,ce.jsxs)(C.A,{sx:{"&:hover":{backgroundColor:t.palette.action.hover,transform:"translateY(-2px)",boxShadow:t.shadows[2],transition:"all 0.2s ease-in-out"},backgroundColor:i%2===0?t.palette.background.paper:t.palette.action.selected,cursor:"pointer",borderBottom:"1px solid ".concat(t.palette.divider),transition:"all 0.2s ease-in-out"},onClick:()=>Ge(e),children:[(0,ce.jsxs)(S.A,{sx:{minWidth:220,py:.75},children:[(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:600,color:"primary.main",fontSize:"0.813rem","&:hover":{textDecoration:"underline"},mb:.25},children:e.name}),e.tags&&e.tags.length>0&&(0,ce.jsxs)(r.A,{sx:{display:"flex",gap:.5,mt:.25,flexWrap:"wrap"},children:[e.tags.slice(0,2).map((e,t)=>(0,ce.jsx)(f.A,{label:e,size:"small",variant:"outlined",sx:{fontSize:"0.625rem",height:18,fontWeight:500}},t)),e.tags.length>2&&(0,ce.jsx)(f.A,{label:"+".concat(e.tags.length-2),size:"small",variant:"outlined",sx:{fontSize:"0.625rem",height:18}})]})]}),(0,ce.jsxs)(S.A,{sx:{minWidth:170,py:.75},children:[(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:500,fontSize:"0.813rem",mb:.25},children:(null===(o=e.property)||void 0===o?void 0:o.name)||"-"}),(0,ce.jsx)(l.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.688rem"},children:(null===(n=e.property)||void 0===n?void 0:n.address)||"-"})]}),(0,ce.jsx)(S.A,{sx:{minWidth:170,py:.75},children:(0,ce.jsxs)(r.A,{component:"span",onClick:t=>{t.stopPropagation(),e.contactId&&a("/contacts/".concat(e.contactId))},sx:{display:"flex",alignItems:"center",gap:.5,cursor:"pointer","&:hover":{"& .contact-name":{textDecoration:"underline",color:"primary.main"}}},children:[(0,ce.jsx)($.A,{sx:{fontSize:14,color:"text.secondary"}}),(0,ce.jsx)(l.A,{variant:"caption",className:"contact-name",sx:{fontWeight:500,fontSize:"0.813rem",transition:"all 0.2s"},children:"company"===(null===(s=e.contact)||void 0===s?void 0:s.type)?null===(c=e.contact)||void 0===c?void 0:c.companyName:"".concat((null===(d=e.contact)||void 0===d?void 0:d.firstName)||""," ").concat((null===(p=e.contact)||void 0===p?void 0:p.lastName)||"").trim()||"-"})]})}),(0,ce.jsx)(S.A,{sx:{py:.75},children:(0,ce.jsx)(f.A,{label:(e.type||e.dealType||"sale").charAt(0).toUpperCase()+(e.type||e.dealType||"sale").slice(1),size:"small",variant:"outlined",sx:{fontSize:"0.688rem",fontWeight:600,borderWidth:1.5,height:20}})}),(0,ce.jsx)(S.A,{sx:{py:.75},children:(0,ce.jsx)(f.A,{icon:(0,ce.jsx)(k,{sx:{fontSize:14,color:"white !important"}}),label:v.name,size:"small",sx:{backgroundColor:v.color,color:"white",fontSize:"0.688rem",fontWeight:600,height:22,"& .MuiChip-icon":{color:"white"}}})}),(0,ce.jsx)(S.A,{align:"right",sx:{py:.75},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontWeight:700,fontSize:"0.813rem",color:(W=e.value,W>=1e7?t.palette.success.main:W>=5e6?t.palette.info.main:"text.primary")},children:(P=e.value,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(P))})}),(0,ce.jsx)(S.A,{align:"center",sx:{minWidth:130,py:.75},children:(0,ce.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:.75,justifyContent:"center"},children:[(0,ce.jsx)(T.A,{variant:"determinate",value:e.probability,sx:{width:60,height:6,borderRadius:3,backgroundColor:"#e0e0e0","& .MuiLinearProgress-bar":{backgroundColor:$e(e.probability),borderRadius:3}}}),(0,ce.jsxs)(l.A,{variant:"caption",sx:{minWidth:30,fontWeight:600,fontSize:"0.688rem",color:$e(e.probability)},children:[e.probability,"%"]})]})}),(0,ce.jsx)(S.A,{sx:{py:.75},children:(0,ce.jsx)(f.A,{icon:(0,ce.jsx)(I,{sx:{fontSize:14,color:"white !important"}}),label:j.name,size:"small",sx:{backgroundColor:j.color,color:"white",fontWeight:600,fontSize:"0.688rem",height:22,"& .MuiChip-icon":{color:"white"}}})}),(0,ce.jsx)(S.A,{sx:{py:.75},children:(0,ce.jsx)(f.A,{icon:(0,ce.jsx)(L,{sx:{fontSize:14}}),label:D.text,size:"small",sx:{backgroundColor:D.color,color:"white",fontWeight:600,fontSize:"0.688rem",height:22,"& .MuiChip-icon":{color:"white"}}})}),(0,ce.jsx)(S.A,{sx:{py:.75},children:(0,ce.jsx)(l.A,{variant:"caption",sx:{fontSize:"0.813rem",fontWeight:500},children:new Date(e.expectedCloseDate).toLocaleDateString()})}),(0,ce.jsx)(S.A,{sx:{py:.75},children:(0,ce.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:.75},children:[(0,ce.jsxs)(N.A,{sx:{width:24,height:24,fontSize:"0.688rem",fontWeight:600,bgcolor:"primary.main"},children:[(null===(m=e.assignedTo)||void 0===m||null===(h=m.firstName)||void 0===h?void 0:h[0])||"?",(null===(y=e.assignedTo)||void 0===y||null===(u=y.lastName)||void 0===u?void 0:u[0])||""]}),(0,ce.jsxs)(r.A,{children:[(0,ce.jsxs)(l.A,{variant:"caption",sx:{fontSize:"0.813rem",fontWeight:500},children:[null===(x=e.assignedTo)||void 0===x?void 0:x.firstName," ",null===(g=e.assignedTo)||void 0===g?void 0:g.lastName]}),(0,ce.jsx)(l.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.625rem"},children:null===(A=e.assignedTo)||void 0===A?void 0:A.email})]})]})}),(0,ce.jsx)(S.A,{align:"center",sx:{py:.75},children:(0,ce.jsxs)(r.A,{sx:{display:"flex",gap:.25,justifyContent:"center"},children:[(0,ce.jsx)(z.A,{size:"small",onClick:t=>{t.stopPropagation(),Ge(e)},sx:{p:.5,"&:hover":{backgroundColor:"#e3f2fd",color:"primary.main"}},children:(0,ce.jsx)(re.A,{sx:{fontSize:16}})}),(0,ce.jsx)(z.A,{size:"small",onClick:t=>{t.stopPropagation(),He(e)},sx:{p:.5,"&:hover":{backgroundColor:"#fff3e0",color:"warning.main"}},children:(0,ce.jsx)(K.A,{sx:{fontSize:16}})}),(0,ce.jsx)(z.A,{size:"small",onClick:t=>{t.stopPropagation(),_e(t,e)},sx:{p:.5,"&:hover":{backgroundColor:"#f5f5f5"}},children:(0,ce.jsx)(te.A,{sx:{fontSize:16}})})]})})]},e.id);var P,W})})]}),(0,ce.jsx)(I.A,{rowsPerPageOptions:[10,25,50],component:"div",count:Ve.length,rowsPerPage:Be,page:Ze,onPageChange:Ye,onRowsPerPageChange:Qe})]}),(0,ce.jsxs)(L.A,{anchorEl:Ee.element,open:Boolean(Ee.element),onClose:Je,children:[(0,ce.jsxs)(v.A,{onClick:()=>{Ge(Ee.deal),Je()},children:[(0,ce.jsx)(P.A,{children:(0,ce.jsx)(re.A,{fontSize:"small"})}),(0,ce.jsx)(W.A,{children:"View Details"})]}),(0,ce.jsxs)(v.A,{onClick:()=>{He(Ee.deal),Je()},children:[(0,ce.jsx)(P.A,{children:(0,ce.jsx)(K.A,{fontSize:"small"})}),(0,ce.jsx)(W.A,{children:"Edit Deal"})]}),(0,ce.jsxs)(v.A,{onClick:()=>(async e=>{try{const t=await le.zb.duplicateDeal(e.id,{name:"".concat(e.name," (Copy)")});if(t&&t.deal)pe(e=>[t.deal,...e]);else{const t=(0,i.A)((0,i.A)({},e),{},{id:"".concat(e.id,"_copy_").concat(Date.now()),name:"".concat(e.name," (Copy)"),stage:"prospecting",probability:10,createdAt:(new Date).toISOString()});pe(e=>[t,...e])}Me({open:!0,message:"Deal duplicated successfully",severity:"success"})}catch(t){Me({open:!0,message:"Failed to duplicate deal",severity:"error"})}Re({element:null,deal:null})})(Ee.deal),children:[(0,ce.jsx)(P.A,{children:(0,ce.jsx)(_.A,{fontSize:"small"})}),(0,ce.jsx)(W.A,{children:"Duplicate Deal"})]}),(0,ce.jsx)(M.A,{}),(0,ce.jsxs)(v.A,{onClick:()=>{Pe({open:!0,deal:Ee.deal}),Je()},sx:{color:"error.main"},children:[(0,ce.jsx)(P.A,{children:(0,ce.jsx)(J.A,{fontSize:"small",sx:{color:"error.main"}})}),(0,ce.jsx)(W.A,{children:"Delete Deal"})]})]}),(0,ce.jsxs)(E.A,{open:Le.open,onClose:()=>Pe({open:!1,deal:null}),children:[(0,ce.jsx)(R.A,{children:"Delete Deal"}),(0,ce.jsx)(Z.A,{children:(0,ce.jsxs)(l.A,{children:['Are you sure you want to delete "',null===(e=Le.deal)||void 0===e?void 0:e.name,'"? This action cannot be undone.']})}),(0,ce.jsxs)(F.A,{children:[(0,ce.jsx)(d.A,{onClick:()=>Pe({open:!1,deal:null}),children:"Cancel"}),(0,ce.jsx)(d.A,{onClick:()=>(async e=>{try{try{await le.zb.deleteDeal(e.id)}catch(t){}pe(t=>t.filter(t=>t.id!==e.id)),Me({open:!0,message:"Deal deleted successfully",severity:"success"})}catch(a){Me({open:!0,message:"Failed to delete deal",severity:"error"})}finally{Pe({open:!1,deal:null})}})(Le.deal),color:"error",variant:"contained",children:"Delete"})]})]}),(0,ce.jsx)(B.A,{open:We.open,autoHideDuration:6e3,onClose:()=>Me((0,i.A)((0,i.A)({},We),{},{open:!1})),children:(0,ce.jsx)(c.A,{onClose:()=>Me((0,i.A)((0,i.A)({},We),{},{open:!1})),severity:We.severity,sx:{width:"100%"},children:We.message})})]})}},42223:(e,t,a)=>{a.d(t,{kx:()=>r,vG:()=>n,vn:()=>s,zb:()=>o});var i=a(94505);const o={getDeals:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(e).toString(),a="/deals".concat(t?"?".concat(t):"");return(await i.Ay.get(a)).data}catch(t){throw console.error("Error fetching deals:",t),t}},getDeal:async e=>{try{return(await i.Ay.get("/deals/".concat(e))).data}catch(t){throw console.error("Error fetching deal:",t),t}},createDeal:async e=>{try{return(await i.Ay.post("/deals",e)).data}catch(t){throw console.error("Error creating deal:",t),t}},updateDeal:async(e,t)=>{try{return(await i.Ay.put("/deals/".concat(e),t)).data}catch(a){throw console.error("Error updating deal:",a),a}},deleteDeal:async e=>{try{return(await i.Ay.delete("/deals/".concat(e))).data}catch(t){throw console.error("Error deleting deal:",t),t}},updateDealStage:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{return(await i.Ay.put("/deals/".concat(e,"/stage"),{stage:t,notes:a})).data}catch(o){throw console.error("Error updating deal stage:",o),o}},addActivity:async(e,t)=>{try{return(await i.Ay.post("/deals/".concat(e,"/activities"),t)).data}catch(a){throw console.error("Error adding deal activity:",a),a}},getDealActivities:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const a=new URLSearchParams(t).toString(),o="/deals/".concat(e,"/activities").concat(a?"?".concat(a):"");return(await i.Ay.get(o)).data}catch(a){throw console.error("Error fetching deal activities:",a),a}},updateProbability:async(e,t)=>{try{return(await i.Ay.put("/deals/".concat(e,"/probability"),{probability:t})).data}catch(a){throw console.error("Error updating deal probability:",a),a}},getPipelineStats:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(e).toString(),a="/deals/pipeline/stats".concat(t?"?".concat(t):"");return(await i.Ay.get(a)).data}catch(t){throw console.error("Error fetching pipeline stats:",t),t}},getDealsByStage:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(e).toString(),a="/deals/pipeline".concat(t?"?".concat(t):"");return(await i.Ay.get(a)).data}catch(t){throw console.error("Error fetching deals by stage:",t),t}},bulkUpdateDeals:async(e,t)=>{try{return(await i.Ay.post("/deals/bulk-update",{dealIds:e,updates:t})).data}catch(a){throw console.error("Error bulk updating deals:",a),a}},duplicateDeal:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return(await i.Ay.post("/deals/".concat(e,"/duplicate"),t)).data}catch(a){throw console.error("Error duplicating deal:",a),a}},exportDeals:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(e).toString(),a="/deals/export".concat(t?"?".concat(t):"");return(await i.Ay.get(a,{responseType:"blob"})).data}catch(t){throw console.error("Error exporting deals:",t),t}},getDealForecast:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(e).toString(),a="/deals/forecast".concat(t?"?".concat(t):"");return(await i.Ay.get(a)).data}catch(t){throw console.error("Error fetching deal forecast:",t),t}},getConversionMetrics:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(e).toString(),a="/deals/metrics/conversion".concat(t?"?".concat(t):"");return(await i.Ay.get(a)).data}catch(t){throw console.error("Error fetching conversion metrics:",t),t}}},n=[{id:"prospecting",name:"Prospecting",description:"Initial contact and qualification",probability:10,color:"#e3f2fd"},{id:"qualification",name:"Qualification",description:"Assessing fit and requirements",probability:25,color:"#f3e5f5"},{id:"proposal",name:"Proposal",description:"Preparing and presenting offer",probability:50,color:"#fff3e0"},{id:"negotiation",name:"Negotiation",description:"Terms and price negotiation",probability:75,color:"#e8f5e8"},{id:"contract",name:"Contract",description:"Finalizing legal agreements",probability:90,color:"#e1f5fe"},{id:"closed_won",name:"Closed Won",description:"Deal successfully completed",probability:100,color:"#e8f5e8"},{id:"closed_lost",name:"Closed Lost",description:"Deal not successful",probability:0,color:"#ffebee"}],r=[{id:"low",name:"Low",color:"#9e9e9e"},{id:"medium",name:"Medium",color:"#ff9800"},{id:"high",name:"High",color:"#f44336"},{id:"urgent",name:"Urgent",color:"#d32f2f"}],s=[{id:"sale",name:"Sale"},{id:"lease",name:"Lease"},{id:"purchase",name:"Purchase"},{id:"sublease",name:"Sublease"},{id:"management",name:"Property Management"},{id:"development",name:"Development"},{id:"investment",name:"Investment"}]}}]);
//# sourceMappingURL=8536.162417a9.chunk.js.map