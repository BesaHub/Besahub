"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[6680],{86680:(e,t,n)=>{n.r(t),n.d(t,{default:()=>J});var s=n(89379),a=n(65043),i=n(96446),r=n(11906),o=n(81637),l=n(68903),c=n(12110),d=n(79958),m=n(81045),u=n(85865),h=n(43845),p=n(17392),x=n(26494),g=n(63336),y=n(67784),A=n(10611),j=n(35721),v=n(24628),b=n(2050),f=n(48734),w=n(67254),S=n(29013),E=n(24056),I=n(83462),_=n(26600),T=n(35316),k=n(29347),O=n(98606),P=n(34642),z=n(17548),C=n(48600),B=n(47805),W=n(42796),H=n(83560),q=n(36910),R=n(33861),U=n(59465),F=n(78831),L=n(94167),M=n(95874);const G={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:3001/api";const D=new class{async getEmailSuggestions(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=await fetch("".concat(G,"/ai/email/suggestions?").concat(e));if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));return t.json()}async generateEmail(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const s=await fetch("".concat(G,"/ai/email/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:e,variables:t,customInstructions:n})});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return s.json()}async getLeadScoringInsights(e){const t=await fetch("".concat(G,"/ai/insights/lead-scoring?contactId=").concat(e));if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));return t.json()}async getMarketAnalysis(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"commercial";const n=await fetch("".concat(G,"/ai/insights/market-analysis?location=").concat(e,"&propertyType=").concat(t));if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));return n.json()}async optimizeEmail(e,t,n,s){const a=await fetch("".concat(G,"/ai/email/optimize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subject:e,body:t,targetAudience:n,goal:s})});if(!a.ok)throw new Error("HTTP error! status: ".concat(a.status));return a.json()}async getAITemplates(){const e=await fetch("".concat(G,"/ai/templates"));if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));return e.json()}async analyzeSentiment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"email";const n=await fetch("".concat(G,"/ai/analyze/sentiment"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:e,type:t})});if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));return n.json()}async getPropertyEmailSuggestions(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"inquiry";return this.getEmailSuggestions({propertyId:e,contactId:t,context:n,type:"property_inquiry"})}async getFollowUpSuggestions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return this.getEmailSuggestions({contactId:e,context:"follow_up",type:"follow_up",daysAgo:t})}async getInvestmentProposalSuggestions(e,t){return this.getEmailSuggestions({contactId:e,propertyId:t,context:"investment",type:"investment_proposal"})}async getSmartRecommendations(e){try{const[t,n]=await Promise.all([this.getLeadScoringInsights(e),this.getMarketAnalysis("downtown")]);return{leadInsights:t.data,marketAnalysis:n.data,recommendations:this.generateSmartRecommendations(t.data,n.data)}}catch(t){throw console.error("Error getting smart recommendations:",t),t}}generateSmartRecommendations(e,t){const n=[];return e.overallScore>80?n.push({type:"urgent",action:"Schedule immediate property tour",reason:"High-value lead with strong buying signals",priority:"high"}):e.overallScore>60?n.push({type:"follow_up",action:"Send detailed property information",reason:"Medium-value lead needs nurturing",priority:"medium"}):n.push({type:"nurture",action:"Add to educational email sequence",reason:"Early-stage lead needs education",priority:"low"}),"Growing"===t.currentTrend&&n.push({type:"urgency",action:"Emphasize market timing in communications",reason:"Growing market creates urgency",priority:"high"}),n}async generateEmailVariations(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const a=[];for(let r=0;r<n;r++)try{const n=await this.generateEmail(e,t,"Variation ".concat(r+1));a.push((0,s.A)((0,s.A)({id:"variation_".concat(r+1)},n.data),{},{variation:r+1}))}catch(i){console.error("Error generating variation ".concat(r+1,":"),i)}return a}async getWritingTips(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"commercial_real_estate";const t={commercial_real_estate:["Use specific numbers and data points to build credibility","Include market insights and trends relevant to the property","Address potential concerns proactively","Use professional but approachable tone","Include clear call-to-action with next steps","Personalize based on contact's industry and needs","Highlight unique property features and benefits","Use social proof when available"],investment:["Lead with ROI and financial benefits","Include detailed financial projections","Address risk factors and mitigation strategies","Use market data to support investment thesis","Include comparable property analysis","Highlight tax benefits and incentives","Provide clear exit strategies","Use professional investment terminology"],follow_up:["Reference previous conversations or interactions","Provide new information or updates","Use gentle urgency without being pushy","Offer multiple engagement options","Show continued interest and availability","Include relevant market updates","Ask open-ended questions to encourage response","Maintain professional relationship building"]};return{success:!0,data:{tips:t[e]||t.commercial_real_estate,context:e,lastUpdated:(new Date).toISOString()}}}};var N=n(70579);const J=()=>{const[e,t]=(0,a.useState)(0),[n,G]=(0,a.useState)([]),[J,K]=(0,a.useState)([]),[V,Z]=(0,a.useState)(null),[$,Q]=(0,a.useState)(null),[X,Y]=(0,a.useState)(!1),[ee,te]=(0,a.useState)(null),[ne,se]=(0,a.useState)(!1),[ae,ie]=(0,a.useState)(null),[re,oe]=(0,a.useState)(null),[le,ce]=(0,a.useState)([]),[de,me]=(0,a.useState)({contactId:"contact_123",propertyId:"property_456",context:"property_inquiry"});(0,a.useEffect)(()=>{ue()},[]);const ue=async()=>{try{Y(!0);const[e,t]=await Promise.all([D.getAITemplates(),D.getWritingTips("commercial_real_estate")]);K(e.data),ce(t.data.tips)}catch(e){te("Failed to load AI assistant data"),console.error("Error loading initial data:",e)}finally{Y(!1)}},he=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"property_inquiry";try{Y(!0);const t=await D.getEmailSuggestions((0,s.A)((0,s.A)({},de),{},{type:e}));G(t.data.suggestions)}catch(t){te("Failed to generate suggestions"),console.error("Error generating suggestions:",t)}finally{Y(!1)}},pe=e=>e>=.9?"success":e>=.7?"warning":"error",xe=[{label:"AI Suggestions",component:(0,N.jsxs)(i.A,{children:[(0,N.jsxs)(i.A,{sx:{display:"flex",gap:2,mb:3},children:[(0,N.jsx)(r.A,{variant:"contained",startIcon:(0,N.jsx)(C.A,{}),onClick:()=>he("property_inquiry"),disabled:X,children:"Generate Property Inquiry"}),(0,N.jsx)(r.A,{variant:"outlined",startIcon:(0,N.jsx)(B.A,{}),onClick:()=>he("follow_up"),disabled:X,children:"Generate Follow-up"}),(0,N.jsx)(r.A,{variant:"outlined",startIcon:(0,N.jsx)(W.A,{}),onClick:()=>he("investment_proposal"),disabled:X,children:"Generate Investment Proposal"})]}),X&&(0,N.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",mb:3},children:(0,N.jsx)(o.A,{})}),(0,N.jsx)(l.Ay,{container:!0,spacing:2,children:n.map(e=>{return(0,N.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,N.jsxs)(c.A,{sx:{height:"100%"},children:[(0,N.jsx)(d.A,{avatar:(0,N.jsx)(m.A,{sx:{bgcolor:pe(e.confidence)+".main"},children:(t=e.confidence,t>=.9?(0,N.jsx)(O.A,{}):t>=.7?(0,N.jsx)(P.A,{}):(0,N.jsx)(z.A,{}))}),title:(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,N.jsx)(u.A,{variant:"h6",children:e.subject}),(0,N.jsx)(h.A,{label:"".concat(Math.round(100*e.confidence),"%"),color:pe(e.confidence),size:"small"})]}),subheader:e.preview,action:(0,N.jsxs)(i.A,{children:[(0,N.jsx)(p.A,{size:"small",onClick:()=>(async(e,t)=>{try{Y(!0);const n=await D.generateEmail(e,t);Q(n.data),se(!0)}catch(n){te("Failed to generate email"),console.error("Error generating email:",n)}finally{Y(!1)}})(e.template,e.variables),children:(0,N.jsx)(H.A,{})}),(0,N.jsx)(p.A,{size:"small",children:(0,N.jsx)(q.A,{})})]})}),(0,N.jsxs)(x.A,{children:[(0,N.jsx)(u.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.template.description}),(0,N.jsxs)(i.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[Object.keys(e.variables).slice(0,3).map(e=>(0,N.jsx)(h.A,{label:e.replace(/([A-Z])/g," $1").toLowerCase(),size:"small",variant:"outlined"},e)),Object.keys(e.variables).length>3&&(0,N.jsx)(h.A,{label:"+".concat(Object.keys(e.variables).length-3," more"),size:"small",variant:"outlined"})]})]})]})},e.id);var t})})]})},{label:"Email Optimizer",component:(0,N.jsx)(i.A,{children:(0,N.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,N.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,N.jsxs)(g.A,{sx:{p:3},children:[(0,N.jsx)(u.A,{variant:"h6",gutterBottom:!0,children:"Original Email"}),(0,N.jsx)(y.A,{fullWidth:!0,label:"Subject",multiline:!0,rows:2,sx:{mb:2},placeholder:"Enter your email subject..."}),(0,N.jsx)(y.A,{fullWidth:!0,label:"Email Body",multiline:!0,rows:8,placeholder:"Enter your email content..."}),(0,N.jsxs)(i.A,{sx:{mt:2,display:"flex",gap:2},children:[(0,N.jsx)(r.A,{variant:"contained",startIcon:(0,N.jsx)(C.A,{}),onClick:()=>{var e,t;const n=(null===(e=document.querySelector('input[placeholder*="subject"]'))||void 0===e?void 0:e.value)||"",s=(null===(t=document.querySelector('textarea[placeholder*="content"]'))||void 0===t?void 0:t.value)||"";n&&s&&(async(e,t)=>{try{Y(!0);const n=await D.optimizeEmail(e,t,"commercial_real_estate_investors","generate_interest");ie(n.data)}catch(n){te("Failed to optimize email"),console.error("Error optimizing email:",n)}finally{Y(!1)}})(n,s)},disabled:X,children:"Optimize Email"}),(0,N.jsx)(r.A,{variant:"outlined",startIcon:(0,N.jsx)(R.A,{}),onClick:()=>{var e;const t=(null===(e=document.querySelector('textarea[placeholder*="content"]'))||void 0===e?void 0:e.value)||"";t&&(async e=>{try{Y(!0);const t=await D.analyzeSentiment(e);oe(t.data)}catch(t){te("Failed to analyze sentiment"),console.error("Error analyzing sentiment:",t)}finally{Y(!1)}})(t)},disabled:X,children:"Analyze Sentiment"})]})]})}),(0,N.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,N.jsxs)(g.A,{sx:{p:3},children:[(0,N.jsx)(u.A,{variant:"h6",gutterBottom:!0,children:"AI Optimizations"}),ae?(0,N.jsxs)(i.A,{children:[(0,N.jsxs)(i.A,{sx:{mb:2},children:[(0,N.jsx)(u.A,{variant:"subtitle2",gutterBottom:!0,children:"Subject Optimization"}),(0,N.jsxs)(u.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Original: ",ae.subject.original]}),(0,N.jsxs)(u.A,{variant:"body2",sx:{mb:1},children:["Optimized: ",ae.subject.optimized]}),(0,N.jsx)(h.A,{label:ae.subject.improvement,color:"success",size:"small"})]}),(0,N.jsxs)(i.A,{sx:{mb:2},children:[(0,N.jsx)(u.A,{variant:"subtitle2",gutterBottom:!0,children:"Overall Score"}),(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,N.jsx)(A.A,{variant:"determinate",value:10*ae.score.after,sx:{flexGrow:1}}),(0,N.jsxs)(u.A,{variant:"body2",children:[ae.score.after,"/10"]})]}),(0,N.jsxs)(u.A,{variant:"caption",color:"success.main",children:[ae.score.improvement," improvement"]})]}),(0,N.jsxs)(i.A,{children:[(0,N.jsx)(u.A,{variant:"subtitle2",gutterBottom:!0,children:"Suggestions"}),ae.suggestions.map((e,t)=>(0,N.jsxs)(u.A,{variant:"body2",sx:{mb:.5},children:["\u2022 ",e]},t))]})]}):(0,N.jsx)(u.A,{variant:"body2",color:"text.secondary",children:'Enter your email content and click "Optimize Email" to see AI suggestions.'})]})})]})})},{label:"Writing Tips",component:(0,N.jsx)(i.A,{children:(0,N.jsxs)(l.Ay,{container:!0,spacing:3,children:[(0,N.jsx)(l.Ay,{item:!0,xs:12,md:8,children:(0,N.jsxs)(g.A,{sx:{p:3},children:[(0,N.jsx)(u.A,{variant:"h6",gutterBottom:!0,children:"AI-Powered Writing Tips"}),(0,N.jsx)(j.A,{children:le.map((e,t)=>(0,N.jsxs)(v.Ay,{children:[(0,N.jsx)(b.A,{children:(0,N.jsx)(U.A,{color:"primary"})}),(0,N.jsx)(f.A,{primary:e})]},t))})]})}),(0,N.jsx)(l.Ay,{item:!0,xs:12,md:4,children:(0,N.jsxs)(g.A,{sx:{p:3},children:[(0,N.jsx)(u.A,{variant:"h6",gutterBottom:!0,children:"Sentiment Analysis"}),re?(0,N.jsxs)(i.A,{children:[(0,N.jsxs)(i.A,{sx:{mb:2},children:[(0,N.jsx)(u.A,{variant:"subtitle2",gutterBottom:!0,children:"Overall Sentiment"}),(0,N.jsx)(h.A,{label:re.overallSentiment,color:"Positive"===re.overallSentiment?"success":"warning",icon:(0,N.jsx)(F.A,{})})]}),(0,N.jsxs)(i.A,{sx:{mb:2},children:[(0,N.jsxs)(u.A,{variant:"subtitle2",gutterBottom:!0,children:["Confidence: ",Math.round(100*re.confidence),"%"]}),(0,N.jsx)(A.A,{variant:"determinate",value:100*re.confidence,color:"primary"})]}),(0,N.jsxs)(i.A,{children:[(0,N.jsx)(u.A,{variant:"subtitle2",gutterBottom:!0,children:"Emotions"}),Object.entries(re.emotions).map(e=>{let[t,n]=e;return(0,N.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,N.jsx)(u.A,{variant:"body2",sx:{textTransform:"capitalize"},children:t}),(0,N.jsxs)(u.A,{variant:"body2",children:[Math.round(100*n),"%"]})]},t)})]})]}):(0,N.jsx)(u.A,{variant:"body2",color:"text.secondary",children:"Analyze your email content to see sentiment insights."})]})})]})})}];return X&&0===n.length?(0,N.jsx)(i.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px"},children:(0,N.jsx)(o.A,{})}):ee?(0,N.jsx)(w.A,{severity:"error",sx:{m:2},children:ee}):(0,N.jsxs)(i.A,{sx:{p:3},children:[(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[(0,N.jsx)(m.A,{sx:{bgcolor:"primary.main",width:48,height:48},children:(0,N.jsx)(L.A,{})}),(0,N.jsxs)(i.A,{children:[(0,N.jsx)(u.A,{variant:"h4",sx:{fontWeight:"bold"},children:"AI Email Assistant"}),(0,N.jsx)(u.A,{variant:"body2",color:"text.secondary",children:"Powered by artificial intelligence to help you write better emails"})]})]}),(0,N.jsxs)(g.A,{elevation:1,children:[(0,N.jsx)(S.A,{value:e,onChange:(e,n)=>{t(n)},variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},children:xe.map((e,t)=>(0,N.jsx)(E.A,{label:e.label},t))}),(0,N.jsx)(i.A,{sx:{p:3},children:xe[e].component})]}),(0,N.jsxs)(I.A,{open:ne,onClose:()=>se(!1),maxWidth:"md",fullWidth:!0,children:[(0,N.jsx)(_.A,{children:(0,N.jsxs)(i.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,N.jsx)(C.A,{color:"primary"}),"AI Generated Email"]})}),(0,N.jsx)(T.A,{children:$&&(0,N.jsxs)(i.A,{children:[(0,N.jsx)(y.A,{fullWidth:!0,label:"Subject",value:$.subject,sx:{mb:2},InputProps:{readOnly:!0}}),(0,N.jsx)(y.A,{fullWidth:!0,label:"Email Body",multiline:!0,rows:12,value:$.body,InputProps:{readOnly:!0}}),(0,N.jsxs)(i.A,{sx:{mt:2,display:"flex",gap:1},children:[(0,N.jsx)(h.A,{label:"Confidence: ".concat(Math.round(100*$.confidence),"%"),color:"success",size:"small"}),(0,N.jsx)(h.A,{label:"Template: ".concat($.template),color:"info",size:"small"})]})]})}),(0,N.jsxs)(k.A,{children:[(0,N.jsx)(r.A,{onClick:()=>se(!1),children:"Close"}),(0,N.jsx)(r.A,{variant:"contained",startIcon:(0,N.jsx)(M.A,{}),children:"Send Email"})]})]})]})}}}]);
//# sourceMappingURL=6680.966b3ce5.chunk.js.map