"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[6582],{26582:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var r=a(89379),i=a(65043),n=a(73216),s=a(96446),o=a(81637),l=a(11906),c=a(85865),d=a(67254),m=a(63336),p=a(68903),h=a(53193),u=a(78492),y=a(74605),x=a(16374),A=a(39336),g=a(81045),f=a(17392),v=a(67784),j=a(18356),b=a(72221),C=a(32143),w=a(81673),M=a(51787),S=a(43845),W=a(19042),P=a(73158),T=a(87332),z=a(59893),R=a(66734),k=a(70579);const I=(0,R.A)([(0,k.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,k.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"PhotoCamera");var F=a(51387),N=a(43374),E=a(48262),L=a(91082),_=a(84770),D=a(67957),q=a(70141),O=a(37141),B=a(8789),U=a(39705),Z=a(76303),H=a(66593);const $=()=>{const{id:e}=(0,n.g)(),t=(0,n.Zp)(),a=(0,n.zy)(),R=!!e,[$,K]=(0,i.useState)(!1),[V,Q]=(0,i.useState)(!1),[G,J]=(0,i.useState)(null),[Y,X]=(0,i.useState)({open:!1,message:"",severity:"success"}),[ee,te]=(0,i.useState)(!0),[ae,re]=(0,i.useState)({type:"individual",firstName:"",lastName:"",companyName:"",title:"",primaryEmail:"",secondaryEmail:"",primaryPhone:"",mobilePhone:"",mailingAddress:"",mailingCity:"",mailingState:"",mailingZipCode:"",contactRole:"",leadStatus:"cold",budgetMin:"",budgetMax:"",propertyTypeInterest:[],preferredLocations:[],timeframe:"",notes:"",tags:[],creditRating:"",netWorth:"",liquidity:"",website:"",linkedInUrl:"",customFields:{},avatar:null}),[ie,ne]=(0,i.useState)({}),[se,oe]=(0,i.useState)(""),[le,ce]=(0,i.useState)(""),[de,me]=(0,i.useState)(""),[pe,he]=(0,i.useState)(!1),[ue,ye]=(0,i.useState)(null);(0,i.useEffect)(()=>{R&&xe()},[e,R]);const xe=async()=>{try{K(!0);const t=await U.TP.getContact(e);if(t&&t.contact){const e=t.contact;re({type:e.type||"individual",firstName:e.firstName||"",lastName:e.lastName||"",companyName:e.companyName||"",title:e.title||"",primaryEmail:e.primaryEmail||"",secondaryEmail:e.secondaryEmail||"",primaryPhone:e.primaryPhone||"",mobilePhone:e.mobilePhone||"",mailingAddress:e.mailingAddress||"",mailingCity:e.mailingCity||"",mailingState:e.mailingState||"",mailingZipCode:e.mailingZipCode||"",contactRole:e.contactRole||"",leadStatus:e.leadStatus||"cold",budgetMin:e.budgetMin||"",budgetMax:e.budgetMax||"",propertyTypeInterest:e.propertyTypeInterest||[],preferredLocations:e.preferredLocations||[],timeframe:e.timeframe||"",notes:e.notes||"",tags:e.tags||[],creditRating:e.creditRating||"",netWorth:e.netWorth||"",liquidity:e.liquidity||"",website:e.website||"",linkedInUrl:e.linkedInUrl||"",customFields:e.customFields||{},avatar:e.avatar||null})}}catch(t){J("Failed to load contact details"),console.error("Error fetching contact:",t)}finally{K(!1)}},Ae=e=>t=>{const a=t.target.value;re(t=>(0,r.A)((0,r.A)({},t),{},{[e]:a})),ie[e]&&ne(t=>(0,r.A)((0,r.A)({},t),{},{[e]:null}))},ge=(e,t,a)=>{t.trim()&&!ae[e].includes(t.trim())&&(re(a=>(0,r.A)((0,r.A)({},a),{},{[e]:[...a[e],t.trim()]})),a(""))},fe=(e,t)=>{re(a=>(0,r.A)((0,r.A)({},a),{},{[e]:a[e].filter(e=>e!==t)}))},{getRootProps:ve,getInputProps:je,isDragActive:be}=(0,B.VB)({onDrop:async t=>{if(0===t.length)return;const a=t[0],i=(0,H.Wl)(a);if(i.isValid)try{he(!0);const t=(0,H.zG)("avatar",a.type),i=await(0,H.w4)(a,t);if(!R){ye(i);const e=URL.createObjectURL(i);return re(t=>(0,r.A)((0,r.A)({},t),{},{avatar:e})),void X({open:!0,message:"Avatar optimized! Size reduced by ".concat(((a.size-i.size)/a.size*100).toFixed(1),"%"),severity:"success"})}const n=new FormData;n.append("avatar",i);const s=await U.TP.uploadAvatar(e,n);if(s.success){re(e=>(0,r.A)((0,r.A)({},e),{},{avatar:s.avatar}));const e=((a.size-i.size)/a.size*100).toFixed(1);X({open:!0,message:"Avatar uploaded successfully! Optimized size by ".concat(e,"%"),severity:"success"})}}catch(G){console.error("Avatar upload error:",G),X({open:!0,message:"Failed to upload avatar",severity:"error"})}finally{he(!1)}else X({open:!0,message:i.errors.join(", "),severity:"error"})},accept:{"image/*":[".jpeg",".jpg",".png",".gif"]},maxSize:10485760,multiple:!1}),Ce=()=>{t("/contacts")};return $?(0,k.jsx)(s.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,k.jsx)(o.A,{})}):(0,k.jsxs)(s.A,{children:[(0,k.jsxs)(s.A,{sx:{mb:3},children:[(0,k.jsx)(l.A,{startIcon:(0,k.jsx)(T.A,{}),onClick:Ce,sx:{mb:2},children:"Back to Contacts"}),(0,k.jsx)(c.A,{variant:"h4",sx:{fontWeight:700},children:R?"Edit Contact":"Add New Contact"})]}),G&&(0,k.jsx)(d.A,{severity:"error",sx:{mb:3},children:G}),(0,k.jsx)(m.A,{sx:{p:2},children:(0,k.jsx)("form",{onSubmit:async i=>{if(i.preventDefault(),(()=>{const e={};return"individual"===ae.type?(ae.firstName.trim()||(e.firstName="First name is required"),ae.lastName.trim()||(e.lastName="Last name is required")):ae.companyName.trim()||(e.companyName="Company name is required"),ae.primaryEmail.trim()?/\S+@\S+\.\S+/.test(ae.primaryEmail)||(e.primaryEmail="Please enter a valid email address"):e.primaryEmail="Primary email is required",ae.primaryPhone.trim()||(e.primaryPhone="Primary phone is required"),ae.contactRole||(e.contactRole="Contact role is required"),ae.secondaryEmail&&!/\S+@\S+\.\S+/.test(ae.secondaryEmail)&&(e.secondaryEmail="Please enter a valid email address"),ae.website&&!ae.website.startsWith("http")&&(e.website="Website URL must start with http:// or https://"),ne(e),0===Object.keys(e).length})())try{var n;Q(!0);const i=(0,r.A)((0,r.A)({},ae),{},{budgetMin:ae.budgetMin?parseFloat(ae.budgetMin):null,budgetMax:ae.budgetMax?parseFloat(ae.budgetMax):null,netWorth:ae.netWorth?parseFloat(ae.netWorth):null,liquidity:ae.liquidity?parseFloat(ae.liquidity):null});let o;var s;if(R)o=await U.TP.updateContact(e,i);else o=await U.TP.createContact(i),o&&null!==(s=o.contact)&&void 0!==s&&s.id&&await(async(e,t)=>{var a;if(ee&&null!==(a=t.propertyTypeInterest)&&void 0!==a&&a.length)try{const a={name:"".concat(t.firstName," ").concat(t.lastName," - Investment Preferences"),criteria:{propertyTypes:t.propertyTypeInterest||[],priceMin:t.budgetMin||null,priceMax:t.budgetMax||null,locations:t.preferredLocations||[],keywords:[]},frequency:"immediate"===t.timeframe?"realtime":"daily",notifications:{email:!0,sms:!1,push:!0},active:!0,contactId:e};await Z.$h.createAlert(a),console.log("Property alert created for contact preferences")}catch(G){console.log("Could not create property alert (API might not be available):",G)}})(o.contact.id,i);X({open:!0,message:"Contact ".concat(R?"updated":"created"," successfully").concat(!R&&ee?" (Property alert created)":""),severity:"success"}),null!==(n=a.state)&&void 0!==n&&n.onUpdate&&a.state.onUpdate(),setTimeout(()=>{t("/contacts")},1500)}catch(o){console.error("Error saving contact:",o),X({open:!0,message:"Failed to ".concat(R?"update":"create"," contact"),severity:"error"})}finally{Q(!1)}else X({open:!0,message:"Please fix the errors before submitting",severity:"error"})},children:(0,k.jsxs)(p.Ay,{container:!0,spacing:1.5,children:[(0,k.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,k.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,k.jsx)(z.A,{sx:{mr:.5,fontSize:20}}),"Contact Type"]}),(0,k.jsx)(h.A,{component:"fieldset",children:(0,k.jsxs)(u.A,{row:!0,value:ae.type,onChange:Ae("type"),children:[(0,k.jsx)(y.A,{value:"individual",control:(0,k.jsx)(x.A,{}),label:"Individual"}),(0,k.jsx)(y.A,{value:"company",control:(0,k.jsx)(x.A,{}),label:"Company"})]})})]}),(0,k.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,k.jsx)(A.A,{sx:{my:1}}),(0,k.jsx)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,fontWeight:600},children:"Basic Information"})]}),(0,k.jsxs)(p.Ay,{item:!0,xs:12,md:4,children:[(0,k.jsx)(c.A,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Contact Avatar"}),(0,k.jsxs)(s.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,k.jsx)(g.A,{src:ae.avatar?ae.avatar.startsWith("blob:")?ae.avatar:"".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:3001").concat(ae.avatar):void 0,sx:{width:80,height:80,mr:2},children:(0,k.jsx)(I,{})}),ae.avatar&&(0,k.jsx)(f.A,{color:"error",onClick:async()=>{if(!R)return ye(null),void re(e=>(0,r.A)((0,r.A)({},e),{},{avatar:null}));try{he(!0),await U.TP.removeAvatar(e),re(e=>(0,r.A)((0,r.A)({},e),{},{avatar:null})),X({open:!0,message:"Avatar removed successfully!",severity:"success"})}catch(G){console.error("Remove avatar error:",G),X({open:!0,message:"Failed to remove avatar",severity:"error"})}finally{he(!1)}},disabled:pe,children:(0,k.jsx)(F.A,{})})]}),(0,k.jsxs)(s.A,(0,r.A)((0,r.A)({},ve()),{},{sx:{border:"2px dashed",borderColor:be?"primary.main":"grey.300",borderRadius:2,p:3,textAlign:"center",cursor:"pointer",bgcolor:be?"primary.50":"transparent","&:hover":{borderColor:"primary.main",bgcolor:"primary.50"}},children:[(0,k.jsx)("input",(0,r.A)({},je())),pe?(0,k.jsx)(o.A,{size:24}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(N.A,{sx:{fontSize:48,color:"text.secondary",mb:1}}),(0,k.jsx)(c.A,{variant:"body2",color:"text.secondary",children:be?"Drop avatar here...":"Click or drag to upload avatar"}),(0,k.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"Max size: 10MB \u2022 JPG, PNG, GIF"})]})]}))]}),"individual"===ae.type?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"First Name",value:ae.firstName,onChange:Ae("firstName"),error:!!ie.firstName,helperText:ie.firstName,required:!0})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Last Name",value:ae.lastName,onChange:Ae("lastName"),error:!!ie.lastName,helperText:ie.lastName,required:!0})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Company Name",value:ae.companyName,onChange:Ae("companyName")})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Title",value:ae.title,onChange:Ae("title")})})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(p.Ay,{item:!0,xs:12,md:8,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Company Name",value:ae.companyName,onChange:Ae("companyName"),error:!!ie.companyName,helperText:ie.companyName,required:!0})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:4,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Website",value:ae.website,onChange:Ae("website"),error:!!ie.website,helperText:ie.website,placeholder:"https://company.com"})})]}),(0,k.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,k.jsx)(A.A,{sx:{my:1}}),(0,k.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,k.jsx)(E.A,{sx:{mr:.5,fontSize:20}}),"Contact Information"]})]}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Primary Email",type:"email",value:ae.primaryEmail,onChange:Ae("primaryEmail"),error:!!ie.primaryEmail,helperText:ie.primaryEmail,required:!0})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Secondary Email",type:"email",value:ae.secondaryEmail,onChange:Ae("secondaryEmail"),error:!!ie.secondaryEmail,helperText:ie.secondaryEmail})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Primary Phone",value:ae.primaryPhone,onChange:Ae("primaryPhone"),error:!!ie.primaryPhone,helperText:ie.primaryPhone,required:!0})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Mobile Phone",value:ae.mobilePhone,onChange:Ae("mobilePhone")})}),(0,k.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,k.jsx)(A.A,{sx:{my:1}}),(0,k.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,k.jsx)(L.A,{sx:{mr:.5,fontSize:20}}),"Mailing Address"]})]}),(0,k.jsx)(p.Ay,{item:!0,xs:12,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Street Address",value:ae.mailingAddress,onChange:Ae("mailingAddress")})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:4,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"City",value:ae.mailingCity,onChange:Ae("mailingCity")})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:4,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"State",value:ae.mailingState,onChange:Ae("mailingState")})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:4,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"ZIP Code",value:ae.mailingZipCode,onChange:Ae("mailingZipCode")})}),(0,k.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,k.jsx)(A.A,{sx:{my:1}}),(0,k.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,k.jsx)(_.A,{sx:{mr:.5,fontSize:20}}),"Business Information"]})]}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsxs)(h.A,{fullWidth:!0,size:"small",required:!0,error:!!ie.contactRole,children:[(0,k.jsx)(j.A,{children:"Contact Role"}),(0,k.jsx)(b.A,{value:ae.contactRole,label:"Contact Role",onChange:Ae("contactRole"),children:["tenant","landlord","buyer","seller","investor","broker","attorney","lender","contractor","architect","property_manager","other"].map(e=>(0,k.jsx)(C.A,{value:e,children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))}),ie.contactRole&&(0,k.jsx)(w.A,{children:ie.contactRole})]})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsxs)(h.A,{fullWidth:!0,size:"small",children:[(0,k.jsx)(j.A,{children:"Lead Status"}),(0,k.jsx)(b.A,{value:ae.leadStatus,label:"Lead Status",onChange:Ae("leadStatus"),children:["cold","warm","hot","qualified","converted","lost"].map(e=>(0,k.jsx)(C.A,{value:e,children:e.replace(/\b\w/g,e=>e.toUpperCase())},e))})]})}),("investor"===ae.contactRole||"buyer"===ae.contactRole)&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,k.jsx)(A.A,{sx:{my:1}}),(0,k.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,k.jsx)(D.A,{sx:{mr:.5,fontSize:20}}),"Investment Criteria"]})]}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Minimum Budget",type:"number",value:ae.budgetMin,onChange:Ae("budgetMin"),InputProps:{startAdornment:(0,k.jsx)(M.A,{position:"start",children:"$"})}})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Maximum Budget",type:"number",value:ae.budgetMax,onChange:Ae("budgetMax"),InputProps:{startAdornment:(0,k.jsx)(M.A,{position:"start",children:"$"})}})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsxs)(h.A,{fullWidth:!0,size:"small",children:[(0,k.jsx)(j.A,{children:"Investment Timeframe"}),(0,k.jsx)(b.A,{value:ae.timeframe,label:"Investment Timeframe",onChange:Ae("timeframe"),children:["immediate","30_days","3_months","6_months","1_year","flexible"].map(e=>(0,k.jsx)(C.A,{value:e,children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})]})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsxs)(h.A,{fullWidth:!0,size:"small",children:[(0,k.jsx)(j.A,{children:"Credit Rating"}),(0,k.jsx)(b.A,{value:ae.creditRating,label:"Credit Rating",onChange:Ae("creditRating"),children:["A+","A","A-","B+","B","B-","C+","C","C-"].map(e=>(0,k.jsx)(C.A,{value:e,children:e},e))})]})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Net Worth",type:"number",value:ae.netWorth,onChange:Ae("netWorth"),InputProps:{startAdornment:(0,k.jsx)(M.A,{position:"start",children:"$"})}})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Available Liquidity",type:"number",value:ae.liquidity,onChange:Ae("liquidity"),InputProps:{startAdornment:(0,k.jsx)(M.A,{position:"start",children:"$"})}})}),(0,k.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,k.jsx)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,fontWeight:600},children:"Property Types of Interest"}),(0,k.jsxs)(s.A,{sx:{display:"flex",gap:1,mb:2},children:[(0,k.jsxs)(h.A,{sx:{minWidth:200},children:[(0,k.jsx)(j.A,{children:"Property Type"}),(0,k.jsx)(b.A,{value:de,label:"Property Type",onChange:e=>me(e.target.value),children:["office","retail","industrial","warehouse","multifamily","hotel","mixed_use","land","other"].map(e=>(0,k.jsx)(C.A,{value:e,children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})]}),(0,k.jsx)(l.A,{variant:"outlined",startIcon:(0,k.jsx)(q.A,{}),onClick:()=>ge("propertyTypeInterest",de,me),disabled:!de||ae.propertyTypeInterest.includes(de),children:"Add"})]}),(0,k.jsx)(s.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:ae.propertyTypeInterest.map((e,t)=>(0,k.jsx)(S.A,{label:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()),onDelete:()=>fe("propertyTypeInterest",e),variant:"outlined"},t))})]}),(0,k.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,k.jsx)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,fontWeight:600},children:"Preferred Markets/Locations"}),(0,k.jsxs)(s.A,{sx:{display:"flex",gap:1,mb:2},children:[(0,k.jsx)(v.A,{fullWidth:!0,label:"Add location",value:le,onChange:e=>ce(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),ge("preferredLocations",le,ce))}}),(0,k.jsx)(l.A,{variant:"outlined",startIcon:(0,k.jsx)(q.A,{}),onClick:()=>ge("preferredLocations",le,ce),children:"Add"})]}),(0,k.jsx)(s.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:ae.preferredLocations.map((e,t)=>(0,k.jsx)(S.A,{label:e,onDelete:()=>fe("preferredLocations",e),variant:"outlined"},t))})]})]}),(0,k.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,k.jsx)(A.A,{sx:{my:1}}),(0,k.jsx)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,fontWeight:600},children:"Additional Information"})]}),(0,k.jsx)(p.Ay,{item:!0,xs:12,md:6,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"LinkedIn URL",value:ae.linkedInUrl,onChange:Ae("linkedInUrl"),placeholder:"https://linkedin.com/in/username"})}),(0,k.jsxs)(p.Ay,{item:!0,xs:12,children:[(0,k.jsx)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,fontWeight:600},children:"Tags"}),(0,k.jsxs)(s.A,{sx:{display:"flex",gap:1,mb:2},children:[(0,k.jsx)(v.A,{fullWidth:!0,label:"Add tag",value:se,onChange:e=>oe(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),ge("tags",se,oe))}}),(0,k.jsx)(l.A,{variant:"outlined",startIcon:(0,k.jsx)(q.A,{}),onClick:()=>ge("tags",se,oe),children:"Add"})]}),(0,k.jsx)(s.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:ae.tags.map((e,t)=>(0,k.jsx)(S.A,{label:e,onDelete:()=>fe("tags",e),variant:"outlined"},t))})]}),!R&&("investor"===ae.contactRole||"buyer"===ae.contactRole)&&(0,k.jsx)(p.Ay,{item:!0,xs:12,children:(0,k.jsx)(s.A,{sx:{p:2,bgcolor:"primary.50",borderRadius:1,border:"1px solid",borderColor:"primary.200"},children:(0,k.jsx)(y.A,{control:(0,k.jsx)(W.A,{checked:ee,onChange:e=>te(e.target.checked),color:"primary"}),label:(0,k.jsxs)(s.A,{children:[(0,k.jsx)(c.A,{variant:"body2",sx:{fontWeight:600},children:"Create Property Alert"}),(0,k.jsx)(c.A,{variant:"caption",color:"text.secondary",children:"Automatically create property alerts based on this contact's investment preferences"})]})})})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,children:(0,k.jsx)(v.A,{fullWidth:!0,label:"Notes",multiline:!0,rows:4,value:ae.notes,onChange:Ae("notes"),helperText:"Add any additional notes about this contact"})}),(0,k.jsx)(p.Ay,{item:!0,xs:12,children:(0,k.jsxs)(s.A,{sx:{display:"flex",gap:1.5,justifyContent:"flex-end",mt:2},children:[(0,k.jsx)(l.A,{size:"small",variant:"outlined",onClick:Ce,disabled:V,children:"Cancel"}),(0,k.jsx)(l.A,{size:"small",type:"submit",variant:"contained",startIcon:V?(0,k.jsx)(o.A,{size:16}):(0,k.jsx)(O.A,{}),disabled:V,children:V?"Saving...":R?"Update Contact":"Create Contact"})]})})]})})}),(0,k.jsx)(P.A,{open:Y.open,autoHideDuration:6e3,onClose:()=>X((0,r.A)((0,r.A)({},Y),{},{open:!1})),children:(0,k.jsx)(d.A,{onClose:()=>X((0,r.A)((0,r.A)({},Y),{},{open:!1})),severity:Y.severity,sx:{width:"100%"},children:Y.message})})]})}},39705:(e,t,a)=>{a.d(t,{TP:()=>i});var r=a(94505);const i={getContacts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(e).toString(),a="/contacts".concat(t?"?".concat(t):"");return(await r.Ay.get(a)).data}catch(t){throw console.error("Error fetching contacts:",t),t}},getContact:async e=>{try{return(await r.Ay.get("/contacts/".concat(e))).data}catch(t){throw console.error("Error fetching contact:",t),t}},createContact:async e=>{try{return(await r.Ay.post("/contacts",e)).data}catch(t){throw console.error("Error creating contact:",t),t}},updateContact:async(e,t)=>{try{return(await r.Ay.put("/contacts/".concat(e),t)).data}catch(a){throw console.error("Error updating contact:",a),a}},deleteContact:async e=>{try{return(await r.Ay.delete("/contacts/".concat(e))).data}catch(t){throw console.error("Error deleting contact:",t),t}}}},66593:(e,t,a)=>{a.d(t,{Wl:()=>o,Yd:()=>c,aV:()=>l,w4:()=>n,zG:()=>s});var r=a(89379),i=a(41641);const n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const a=(0,r.A)({maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:e.type,initialQuality:.8},t);if(e.size<=1024*a.maxSizeMB*1024)return e;console.log("Compressing image: ".concat(e.name," (").concat((e.size/1024/1024).toFixed(2),"MB)"));const n=await(0,i.A)(e,a);return console.log("Compressed image: ".concat(e.name," (").concat((n.size/1024/1024).toFixed(2),"MB)")),n}catch(a){return console.error("Error compressing image:",a),e}},s=(e,t)=>{const a={useWebWorker:!0,fileType:t};switch(e){case"avatar":case"logo":return(0,r.A)((0,r.A)({},a),{},{maxSizeMB:.5,maxWidthOrHeight:400,initialQuality:.9});case"property":return(0,r.A)((0,r.A)({},a),{},{maxSizeMB:2,maxWidthOrHeight:2048,initialQuality:.8});case"document":return(0,r.A)((0,r.A)({},a),{},{maxSizeMB:1,maxWidthOrHeight:1200,initialQuality:.7});default:return(0,r.A)((0,r.A)({},a),{},{maxSizeMB:1,maxWidthOrHeight:1920,initialQuality:.8})}},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{maxSizeBytes:a=10485760,allowedTypes:r=["image/jpeg","image/jpg","image/png","image/gif","image/webp"]}=t,i=[];return r.includes(e.type)||i.push("Invalid file type. Allowed types: ".concat(r.join(", "))),e.size>a&&i.push("File size too large. Maximum size: ".concat((a/1024/1024).toFixed(1),"MB")),{isValid:0===i.length,errors:i}},l=e=>URL.createObjectURL(e),c=e=>{e&&e.startsWith("blob:")&&URL.revokeObjectURL(e)}},67957:(e,t,a)=>{a.d(t,{A:()=>n});var r=a(66734),i=a(70579);const n=(0,r.A)((0,i.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney")},76303:(e,t,a)=>{a.d(t,{$h:()=>i,fQ:()=>o,fr:()=>s,u0:()=>n});var r=a(94505);const i={getAlerts:async e=>{try{return(await r.Ay.get("/property-alerts/user/".concat(e))).data}catch(t){throw console.error("Failed to fetch property alerts:",t),t}},createAlert:async e=>{try{return(await r.Ay.post("/property-alerts",e)).data}catch(t){throw console.error("Failed to create property alert:",t),t}},updateAlert:async(e,t)=>{try{return(await r.Ay.put("/property-alerts/".concat(e),t)).data}catch(a){throw console.error("Failed to update property alert:",a),a}},deleteAlert:async e=>{try{return(await r.Ay.delete("/property-alerts/".concat(e))).data}catch(t){throw console.error("Failed to delete property alert:",t),t}},getTriggeredAlerts:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{return(await r.Ay.get("/property-alerts/triggered/".concat(e),{params:{limit:t}})).data}catch(a){throw console.error("Failed to fetch triggered alerts:",a),a}},markAlertsAsRead:async e=>{try{return(await r.Ay.post("/property-alerts/mark-read",{alertIds:e})).data}catch(t){throw console.error("Failed to mark alerts as read:",t),t}},testAlert:async e=>{try{return(await r.Ay.post("/property-alerts/test",e)).data}catch(t){throw console.error("Failed to test alert:",t),t}}};class n{static evaluateProperty(e,t){const a=[];let r=!0;if(t.priceMin||t.priceMax){const i=this.checkPriceRange(e.price,t.priceMin,t.priceMax);a.push({criteria:"price_range",matched:i.matched,value:e.price,expected:"".concat(t.priceMin||0," - ").concat(t.priceMax||"\u221e"),score:i.score}),i.matched||(r=!1)}if(t.propertyTypes&&t.propertyTypes.length>0){const i=t.propertyTypes.includes(e.type);a.push({criteria:"property_type",matched:i,value:e.type,expected:t.propertyTypes.join(", "),score:i?100:0}),i||(r=!1)}if(t.locations&&t.locations.length>0){const i=this.checkLocationMatch(e.location,t.locations,t.locationRadius);a.push({criteria:"location",matched:i.matched,value:e.location,expected:t.locations.join(", "),score:i.score}),i.matched||(r=!1)}if(t.sizeMin||t.sizeMax){const i=this.checkSizeRange(e.size,t.sizeMin,t.sizeMax);a.push({criteria:"size_range",matched:i.matched,value:e.size,expected:"".concat(t.sizeMin||0," - ").concat(t.sizeMax||"\u221e"," sq ft"),score:i.score}),i.matched||(r=!1)}if(t.minCapRate){const i=e.capRate>=t.minCapRate;a.push({criteria:"cap_rate",matched:i,value:e.capRate?"".concat((100*e.capRate).toFixed(2),"%"):"N/A",expected:"\u2265 ".concat((100*t.minCapRate).toFixed(2),"%"),score:i?100:0}),i||(r=!1)}if(t.minCashFlow){const i=e.monthlyCashFlow>=t.minCashFlow;a.push({criteria:"cash_flow",matched:i,value:e.monthlyCashFlow?"$".concat(e.monthlyCashFlow.toLocaleString()):"N/A",expected:"\u2265 $".concat(t.minCashFlow.toLocaleString()),score:i?100:0}),i||(r=!1)}if(t.maxDaysOnMarket){const i=e.daysOnMarket<=t.maxDaysOnMarket;a.push({criteria:"days_on_market",matched:i,value:"".concat(e.daysOnMarket," days"),expected:"\u2264 ".concat(t.maxDaysOnMarket," days"),score:i?100:0}),i||(r=!1)}if(t.keywords&&t.keywords.length>0){const i=this.checkKeywords(e,t.keywords);a.push({criteria:"keywords",matched:i.matched,value:i.foundKeywords.join(", ")||"None found",expected:t.keywords.join(", "),score:i.score}),i.matched||(r=!1)}const i=a.reduce((e,t)=>e+t.score,0)/a.length;return{matched:r,score:Math.round(i),matchDetails:a,property:e}}static checkPriceRange(e,t,a){if(!e)return{matched:!1,score:0};const r=t||0,i=a||1/0,n=e>=r&&e<=i;let s=0;if(n)if(i===1/0)s=100;else{const t=(e-r)/(i-r);s=100-100*Math.abs(t-.5)}return{matched:n,score:Math.max(0,Math.round(s))}}static checkLocationMatch(e,t){if(!e||!t.length)return{matched:!1,score:0};const a=e.toLowerCase();for(const r of t){const e=r.toLowerCase();if(a.includes(e)||e.includes(a))return{matched:!0,score:100};const t=a.split(/[,\s]+/),i=e.split(/[,\s]+/),n=t.filter(e=>i.some(t=>e.length>2&&t.length>2&&(e.includes(t)||t.includes(e))));if(n.length>0){const e=n.length/Math.max(t.length,i.length);if(e>=.3)return{matched:!0,score:Math.round(100*e)}}}return{matched:!1,score:0}}static checkSizeRange(e,t,a){if(!e)return{matched:!1,score:0};const r=t||0,i=a||1/0,n=e>=r&&e<=i;let s=0;if(n)if(i===1/0)s=100;else{const t=(e-r)/(i-r);s=100-100*Math.abs(t-.5)}return{matched:n,score:Math.max(0,Math.round(s))}}static checkKeywords(e,t){var a,r;const i=[e.name,e.description,null===(a=e.features)||void 0===a?void 0:a.join(" "),null===(r=e.amenities)||void 0===r?void 0:r.join(" ")].filter(Boolean).join(" ").toLowerCase(),n=t.filter(e=>i.includes(e.toLowerCase())),s=n.length>0,o=s?n.length/t.length*100:0;return{matched:s,score:Math.round(o),foundKeywords:n}}static generateAlertSummary(e){var t,a;const r=[];if(e.priceMin||e.priceMax){const t=e.priceMin?"$".concat(e.priceMin.toLocaleString()):"Any",a=e.priceMax?"$".concat(e.priceMax.toLocaleString()):"Any";r.push("Price: ".concat(t," - ").concat(a))}if(null!==(t=e.propertyTypes)&&void 0!==t&&t.length&&r.push("Type: ".concat(e.propertyTypes.join(", "))),null!==(a=e.locations)&&void 0!==a&&a.length&&r.push("Location: ".concat(e.locations.join(", "))),e.sizeMin||e.sizeMax){const t=e.sizeMin?"".concat(e.sizeMin.toLocaleString()):"Any",a=e.sizeMax?"".concat(e.sizeMax.toLocaleString()):"Any";r.push("Size: ".concat(t," - ").concat(a," sq ft"))}return e.minCapRate&&r.push("Min Cap Rate: ".concat((100*e.minCapRate).toFixed(1),"%")),e.minCashFlow&&r.push("Min Cash Flow: $".concat(e.minCashFlow.toLocaleString())),r.join(" \u2022 ")}static processAlertsForProperties(e,t){const a=[];return t.forEach(t=>{if(!t.active)return;const r=[];e.forEach(e=>{const a=this.evaluateProperty(e,t.criteria);a.matched&&r.push(a)}),r.length>0&&a.push({alert:t,properties:r,triggeredAt:new Date,count:r.length})}),a}}const s=[{id:"1",name:"Downtown Office Buildings",criteria:{propertyTypes:["office"],priceMin:5e5,priceMax:2e6,locations:["Downtown Seattle","Bellevue"],minCapRate:.06,keywords:["parking","elevator"]},active:!0,createdAt:"2024-01-15T10:00:00Z",frequency:"daily",lastTriggered:"2024-01-20T08:30:00Z"},{id:"2",name:"Retail Investment Properties",criteria:{propertyTypes:["retail"],priceMax:15e5,locations:["Capitol Hill","Queen Anne"],minCashFlow:2e3,maxDaysOnMarket:60},active:!0,createdAt:"2024-01-10T14:30:00Z",frequency:"weekly",lastTriggered:null},{id:"3",name:"Industrial Warehouse Deals",criteria:{propertyTypes:["industrial","warehouse"],priceMin:8e5,sizeMin:1e4,locations:["SODO","Georgetown"],keywords:["loading dock","high ceiling"]},active:!1,createdAt:"2024-01-05T09:15:00Z",frequency:"daily",lastTriggered:"2024-01-18T16:45:00Z"}],o=[{id:"1",alertId:"1",alertName:"Downtown Office Buildings",propertyId:"prop_123",propertyName:"456 Pine Street Office Complex",triggeredAt:"2024-01-20T08:30:00Z",read:!1,matchScore:95,matchDetails:[{criteria:"property_type",matched:!0,value:"office",expected:"office",score:100},{criteria:"price_range",matched:!0,value:125e4,expected:"500000 - 2000000",score:90},{criteria:"location",matched:!0,value:"Downtown Seattle",expected:"Downtown Seattle, Bellevue",score:100}]},{id:"2",alertId:"2",alertName:"Retail Investment Properties",propertyId:"prop_456",propertyName:"Capitol Hill Retail Space",triggeredAt:"2024-01-19T14:15:00Z",read:!0,matchScore:88,matchDetails:[{criteria:"property_type",matched:!0,value:"retail",expected:"retail",score:100},{criteria:"price_range",matched:!0,value:95e4,expected:"0 - 1500000",score:85},{criteria:"cash_flow",matched:!0,value:2500,expected:"\u2265 2000",score:80}]}]}}]);
//# sourceMappingURL=6582.91b071e7.chunk.js.map