"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[8822],{33064:(e,t,r)=>{r.d(t,{A:()=>v});var a=r(98587),s=r(58168),i=r(65043),n=r(58387),l=r(98610),o=r(6803),c=r(34535),d=r(61475),p=r(54516),m=r(85213),u=r(75429),h=r(92532),g=r(72372);function x(e){return(0,g.Ay)("PrivateSwitchBase",e)}(0,h.A)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var y=r(70579);const A=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],f=(0,c.Ay)(u.A,{name:"MuiSwitchBase"})(e=>{let{ownerState:t}=e;return(0,s.A)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})}),b=(0,c.Ay)("input",{name:"MuiSwitchBase",shouldForwardProp:d.A})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),v=i.forwardRef(function(e,t){const{autoFocus:r,checked:i,checkedIcon:c,className:d,defaultChecked:u,disabled:h,disableFocusRipple:g=!1,edge:v=!1,icon:j,id:S,inputProps:k,inputRef:P,name:C,onBlur:w,onChange:T,onFocus:F,readOnly:z,required:I=!1,tabIndex:R,type:D,value:W}=e,B=(0,a.A)(e,A),[q,L]=(0,p.A)({controlled:i,default:Boolean(u),name:"SwitchBase",state:"checked"}),U=(0,m.A)();let M=h;U&&"undefined"===typeof M&&(M=U.disabled);const H="checkbox"===D||"radio"===D,N=(0,s.A)({},e,{checked:q,disabled:M,disableFocusRipple:g,edge:v}),O=(e=>{const{classes:t,checked:r,disabled:a,edge:s}=e,i={root:["root",r&&"checked",a&&"disabled",s&&"edge".concat((0,o.A)(s))],input:["input"]};return(0,l.A)(i,x,t)})(N);return(0,y.jsxs)(f,(0,s.A)({component:"span",className:(0,n.A)(O.root,d),centerRipple:!0,focusRipple:!g,disabled:M,tabIndex:null,role:void 0,onFocus:e=>{F&&F(e),U&&U.onFocus&&U.onFocus(e)},onBlur:e=>{w&&w(e),U&&U.onBlur&&U.onBlur(e)},ownerState:N,ref:t},B,{children:[(0,y.jsx)(b,(0,s.A)({autoFocus:r,checked:i,defaultChecked:u,className:O.input,disabled:M,id:H?S:void 0,name:C,onChange:e=>{if(e.nativeEvent.defaultPrevented)return;const t=e.target.checked;L(t),T&&T(e,t)},readOnly:z,ref:P,required:I,ownerState:N,tabIndex:R,type:D},"checkbox"===D&&void 0===W?{}:{value:W},k)),q?c:j]}))})},34668:(e,t,r)=>{r.d(t,{A:()=>y});var a=r(89379),s=r(80045),i=r(65043),n=r(50222),l=r(26240),o=r(30344),c=r(17392),d=r(96446),p=r(85865),m=r(78185),u=r(43845),h=r(16419),g=(r(35815),r(70579));const x=["images","title","showThumbnails","showFullscreenButton","showPlayButton","autoPlay","slideInterval","showIndex","loading","maxHeight","onImageLoad","onImageError","renderCustomControls"],y=e=>{let{images:t=[],title:r,showThumbnails:y=!0,showFullscreenButton:A=!0,showPlayButton:f=!1,autoPlay:b=!1,slideInterval:v=3e3,showIndex:j=!0,loading:S=!1,maxHeight:k="500px",onImageLoad:P,onImageError:C,renderCustomControls:w}=e,T=(0,s.A)(e,x);const F=(0,l.A)(),z=(0,o.A)(F.breakpoints.down("md")),[I,R]=(0,i.useState)(!1),[D,W]=(0,i.useState)(0),B=t.map((e,t)=>{const r="string"===typeof e?e:e.url||e.src,a=r.startsWith("http")?r:"http://localhost:3001".concat(r);return{original:a,thumbnail:a,description:e.description||e.caption||"Image ".concat(t+1),alt:e.alt||"Property image ".concat(t+1),originalAlt:e.alt||"Property image ".concat(t+1),thumbnailAlt:e.alt||"Property image ".concat(t+1)}});return S?(0,g.jsxs)(d.A,{sx:{width:"100%"},children:[r&&(0,g.jsxs)(p.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[(0,g.jsx)(h.A,{sx:{mr:1}}),r]}),(0,g.jsx)(m.A,{variant:"rectangular",height:k,sx:{borderRadius:F.shape.borderRadius,mb:2}}),y&&(0,g.jsx)(d.A,{sx:{display:"flex",gap:1,overflowX:"auto"},children:Array.from({length:4}).map((e,t)=>(0,g.jsx)(m.A,{variant:"rectangular",width:80,height:60,sx:{borderRadius:F.shape.borderRadius,flexShrink:0}},t))})]}):t&&0!==t.length?(0,g.jsxs)(d.A,{sx:{width:"100%",position:"relative"},children:[(r||j)&&(0,g.jsxs)(d.A,{sx:{mb:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r&&(0,g.jsxs)(p.A,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:[(0,g.jsx)(h.A,{sx:{mr:1}}),r]}),j&&B.length>0&&(0,g.jsx)(u.A,{label:"".concat(D+1," of ").concat(B.length),size:"small",variant:"outlined"})]}),w&&(0,g.jsx)(d.A,{sx:{mb:2},children:w({currentIndex:D,totalImages:B.length})}),(0,g.jsx)(d.A,{sx:{"& .image-gallery":{backgroundColor:"transparent"},"& .image-gallery-content":{borderRadius:F.shape.borderRadius,overflow:"hidden"},"& .image-gallery-slide":{borderRadius:F.shape.borderRadius},"& .image-gallery-thumbnails-wrapper":{marginTop:F.spacing(1)},"& .image-gallery-thumbnail":{borderRadius:F.shape.borderRadius,border:"2px solid ".concat(F.palette.divider),"&.active":{border:"2px solid ".concat(F.palette.primary.main)}},"& .image-gallery-icon":{color:F.palette.common.white,"&:hover":{color:F.palette.primary.main}},"& .image-gallery-left-nav, & .image-gallery-right-nav":{display:"none"}},children:(0,g.jsx)(n.A,(0,a.A)({items:B,showThumbnails:y&&!z,showFullscreenButton:A,showPlayButton:f,autoPlay:b,slideInterval:v,onSlide:e=>{W(e)},onScreenChange:()=>{R(!I)},renderLeftNav:(e,t)=>(0,g.jsx)(c.A,{onClick:e,disabled:t,sx:{position:"absolute",left:10,top:"50%",transform:"translateY(-50%)",zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"},"&.disabled":{opacity:.3}},size:z?"small":"medium",children:(0,g.jsx)("span",{children:"\u2039"})}),renderRightNav:(e,t)=>(0,g.jsx)(c.A,{onClick:e,disabled:t,sx:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"},"&.disabled":{opacity:.3}},size:z?"small":"medium",children:(0,g.jsx)("span",{children:"\u203a"})}),renderItem:e=>(0,g.jsxs)("div",{className:"image-gallery-image",children:[(0,g.jsx)("img",{src:e.original,alt:e.originalAlt,onLoad:P,onError:C,style:{maxHeight:k,width:"100%",objectFit:"cover",borderRadius:F.shape.borderRadius}}),e.description&&(0,g.jsx)(d.A,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.8))",color:"white",p:2,borderRadius:"0 0 ".concat(F.shape.borderRadius,"px ").concat(F.shape.borderRadius,"px")},children:(0,g.jsx)(p.A,{variant:"body2",children:e.description})})]}),thumbnailPosition:"bottom",useBrowserFullscreen:!0,showNav:B.length>1,showBullets:z&&B.length>1,infinite:B.length>1,lazyLoad:!0},T))}),z&&y&&B.length>1&&(0,g.jsx)(d.A,{sx:{display:"flex",gap:1,mt:2,overflowX:"auto",pb:1,"&::-webkit-scrollbar":{height:4},"&::-webkit-scrollbar-track":{backgroundColor:F.palette.divider,borderRadius:2},"&::-webkit-scrollbar-thumb":{backgroundColor:F.palette.primary.main,borderRadius:2}},children:B.map((e,t)=>(0,g.jsx)(d.A,{onClick:()=>W(t),sx:{minWidth:80,height:60,borderRadius:1,overflow:"hidden",cursor:"pointer",border:"2px solid ".concat(D===t?F.palette.primary.main:F.palette.divider),"&:hover":{borderColor:F.palette.primary.main}},children:(0,g.jsx)("img",{src:e.thumbnail,alt:e.thumbnailAlt,style:{width:"100%",height:"100%",objectFit:"cover"}})},t))})]}):(0,g.jsxs)(d.A,{sx:{p:4,textAlign:"center",color:"text.secondary",border:"2px dashed",borderColor:"divider",borderRadius:F.shape.borderRadius,backgroundColor:"background.paper"},children:[(0,g.jsx)(h.A,{sx:{fontSize:48,mb:1,opacity:.5}}),(0,g.jsx)(p.A,{variant:"body1",children:"No images available"})]})}},48132:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(66734),s=r(70579);const i=(0,a.A)((0,s.jsx)("path",{d:"M17 11V3H7v4H3v14h8v-4h2v4h8V11zM7 19H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm4 4H9v-2h2zm0-4H9V9h2zm0-4H9V5h2zm4 8h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm4 12h-2v-2h2zm0-4h-2v-2h2z"}),"Apartment")},51387:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(66734),s=r(70579);const i=(0,a.A)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},51962:(e,t,r)=>{r.d(t,{A:()=>T});var a=r(98587),s=r(58168),i=r(65043),n=r(58387),l=r(98610),o=r(67266),c=r(33064),d=r(66734),p=r(70579);const m=(0,d.A)((0,p.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),u=(0,d.A)((0,p.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),h=(0,d.A)((0,p.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");var g=r(6803),x=r(98206),y=r(34535),A=r(61475),f=r(92532),b=r(72372);function v(e){return(0,b.Ay)("MuiCheckbox",e)}const j=(0,f.A)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),S=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],k=(0,y.Ay)(c.A,{shouldForwardProp:e=>(0,A.A)(e)||"classes"===e,name:"MuiCheckbox",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.indeterminate&&t.indeterminate,t["size".concat((0,g.A)(r.size))],"default"!==r.color&&t["color".concat((0,g.A)(r.color))]]}})(e=>{let{theme:t,ownerState:r}=e;return(0,s.A)({color:(t.vars||t).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===r.color?t.vars.palette.action.activeChannel:t.vars.palette[r.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,o.X4)("default"===r.color?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&{["&.".concat(j.checked,", &.").concat(j.indeterminate)]:{color:(t.vars||t).palette[r.color].main},["&.".concat(j.disabled)]:{color:(t.vars||t).palette.action.disabled}})}),P=(0,p.jsx)(u,{}),C=(0,p.jsx)(m,{}),w=(0,p.jsx)(h,{}),T=i.forwardRef(function(e,t){var r,o;const c=(0,x.b)({props:e,name:"MuiCheckbox"}),{checkedIcon:d=P,color:m="primary",icon:u=C,indeterminate:h=!1,indeterminateIcon:y=w,inputProps:A,size:f="medium",className:b}=c,j=(0,a.A)(c,S),T=h?y:u,F=h?y:d,z=(0,s.A)({},c,{color:m,indeterminate:h,size:f}),I=(e=>{const{classes:t,indeterminate:r,color:a,size:i}=e,n={root:["root",r&&"indeterminate","color".concat((0,g.A)(a)),"size".concat((0,g.A)(i))]},o=(0,l.A)(n,v,t);return(0,s.A)({},t,o)})(z);return(0,p.jsx)(k,(0,s.A)({type:"checkbox",inputProps:(0,s.A)({"data-indeterminate":h},A),icon:i.cloneElement(T,{fontSize:null!=(r=T.props.fontSize)?r:f}),checkedIcon:i.cloneElement(F,{fontSize:null!=(o=F.props.fontSize)?o:f}),ownerState:z,ref:t,className:(0,n.A)(I.root,b)},j,{classes:I}))})},55595:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Y});var a=r(89379),s=r(65043),i=r(73216),n=r(96446),l=r(81637),o=r(11906),c=r(85865),d=r(67254),p=r(63336),m=r(68903),u=r(67784),h=r(53193),g=r(18356),x=r(72221),y=r(32143),A=r(81673),f=r(39336),b=r(51787),v=r(74605),j=r(51962),S=r(43845),k=r(12110),P=r(17392),C=r(73158),w=r(87332),T=r(59275),F=r(91082),z=r(67957),I=r(48132),R=r(70141),D=r(66734),W=r(70579);const B=(0,D.A)((0,W.jsx)("path",{d:"M22 3H2C.9 3 0 3.9 0 5v14c0 1.1.9 2 2 2h20c1.1 0 1.99-.9 1.99-2L24 5c0-1.1-.9-2-2-2M8 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3m6 12H2v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1zm3.85-4h1.64L21 16l-1.99 1.99c-1.31-.98-2.28-2.38-2.73-3.99-.18-.64-.28-1.31-.28-2s.1-1.36.28-2c.45-1.62 1.42-3.01 2.73-3.99L21 8l-1.51 2h-1.64c-.22.63-.35 1.3-.35 2s.13 1.37.35 2"}),"ContactPhone");var q=r(20979),L=r(1418),U=r(43374),M=r(51387),H=r(84770),N=r(79641),O=r(37141),E=r(8789),_=r(85006),V=r(66593),G=r(34668);const Y=()=>{const{id:e}=(0,i.g)(),t=(0,i.Zp)(),r=(0,i.zy)(),D=!!e,[Y,X]=(0,s.useState)(!1),[$,K]=(0,s.useState)(!1),[Q,J]=(0,s.useState)(null),[Z,ee]=(0,s.useState)({open:!1,message:"",severity:"success"}),[te,re]=(0,s.useState)({name:"",address:"",city:"",state:"",zipCode:"",county:"",propertyType:"",status:"for_sale",propertyStatus:"active",listingType:"sale",listingDate:"",expirationDate:"",internalPropertyId:"",mlsNumber:"",listPrice:"",leaseRate:"",leaseRateUnit:"per_sqft_annual",leaseType:"",leaseTerms:{minTerm:"",maxTerm:"",renewalOptions:"",securityDeposit:"",personalGuaranteeRequired:!1},grossIncome:"",hoaFees:"",propertyTaxes:"",leaseTermsDescription:"",availabilityDate:"",totalSquareFootage:"",availableSquareFootage:"",lotSize:"",lotSizeUnit:"sqft",lotDimensions:"",buildingClass:"",yearBuilt:"",renovationYear:"",numberOfUnits:"",ceilingHeight:"",clearHeight:"",floors:"",loadingDocks:"",driveInDoors:"",parkingRatio:"",description:"",zoning:"",parkingSpaces:"",amenities:[],keyHighlights:[],keyFeatures:[],marketingRemarks:"",highlights:"",marketingStatus:"draft",pricePerSquareFoot:"",ownerName:"",ownerEmail:"",ownerPhone:"",listingAgent:"",brokerage:"",coBrokerSplit:"",transactionStatus:"active",dateSoldLeased:"",finalSalePrice:"",finalLeaseRate:"",buyerTenantName:"",notes:"",images:[],documents:[],floorPlans:[],sitePlans:[],offeringMemorandum:"",brochure:""}),[ae,se]=(0,s.useState)({}),[ie,ne]=(0,s.useState)(new Set),[le,oe]=(0,s.useState)(!1),[ce,de]=(0,s.useState)(""),[pe,me]=(0,s.useState)(""),[ue,he]=(0,s.useState)(""),[ge,xe]=(0,s.useState)(!1),[ye,Ae]=(0,s.useState)(!1),[fe,be]=(0,s.useState)(!1),[ve,je]=(0,s.useState)(!1),[Se,ke]=(0,s.useState)([]),[Pe,Ce]=(0,s.useState)([]),[we,Te]=(0,s.useState)([]),[Fe,ze]=(0,s.useState)([]);(0,s.useEffect)(()=>{D&&Be()},[e,D]),(0,s.useEffect)(()=>{const e=e=>{if(le)return e.preventDefault(),e.returnValue="You have unsaved changes. Are you sure you want to leave?",e.returnValue};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[le]);const Ie=e=>{const t=26214400,r=[];return["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain","image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type)||r.push("Invalid file type. Allowed: PDF, DOC, DOCX, XLS, XLSX, TXT, images"),e.size>t&&r.push("File too large. Maximum size: ".concat(25,"MB")),{isValid:0===r.length,errors:r}},{getRootProps:Re,getInputProps:De,isDragActive:We}=(0,E.VB)({onDrop:t=>{const r=t.filter(e=>e.type.startsWith("image/"));r.length!==t.length&&ee({open:!0,message:"Only image files are allowed",severity:"warning"}),r.length>0&&(async t=>{xe(!0);try{const r=[],s=[];let i=0,n=0;for(const e of t){const t=(0,V.Wl)(e);if(!t.isValid){ee({open:!0,message:"".concat(e.name,": ").concat(t.errors[0]),severity:"error"});continue}const a=(0,V.zG)("property",e.type),l=e.size,o=await(0,V.w4)(e,a),c=o.size;n+=l,i+=l-c,r.push(o),s.push(URL.createObjectURL(o))}if(0===r.length)return void xe(!1);if(i>0){const e=(i/n*100).toFixed(1);ee({open:!0,message:"Images compressed: ".concat(e,"% size reduction (").concat((i/1024/1024).toFixed(1),"MB saved)"),severity:"info"})}if(!D)return ke(e=>[...e,...r]),re(e=>(0,a.A)((0,a.A)({},e),{},{images:[...e.images,...s]})),void xe(!1);const l=await _.Up.uploadImages(e,r);re(e=>(0,a.A)((0,a.A)({},e),{},{images:[...e.images,...l.images]})),ee({open:!0,message:"".concat(r.length," photo(s) uploaded successfully"),severity:"success"})}catch(Q){ee({open:!0,message:"Failed to process or upload photos",severity:"error"})}finally{xe(!1)}})(r)},accept:{"image/*":[".jpeg",".jpg",".png",".gif",".webp"]},multiple:!0,maxSize:10485760}),Be=async()=>{try{X(!0);const a={id:e,name:"Sample Property",address:"123 Main Street",city:"New York",state:"NY",zipCode:"10001",propertyType:"office",status:"available",listingType:"sale",listPrice:25e5,leaseRate:"",totalSquareFootage:15e3,buildingClass:"A",yearBuilt:2020,description:"Sample property for demonstration purposes.",zoning:"Commercial",parkingSpaces:50,amenities:["High-speed internet","Conference rooms","On-site parking"],marketingStatus:"draft",pricePerSquareFoot:167,images:[]};if(e&&e.startsWith("sample-")){const r="dev_properties_cache";try{const t=JSON.parse(localStorage.getItem(r)||"[]").find(t=>String(t.id)===String(e));if(t){const e=t;return re({name:e.name||"",address:e.address||"",city:e.city||"",state:e.state||"",zipCode:e.zipCode||"",county:e.county||"",propertyType:e.propertyType||"",status:e.status||"for_sale",propertyStatus:e.propertyStatus||"",listingType:e.listingType||"sale",listingDate:e.listingDate?e.listingDate.split("T")[0]:"",expirationDate:e.expirationDate?e.expirationDate.split("T")[0]:"",internalPropertyId:e.internalPropertyId||"",mlsNumber:e.mlsNumber||"",listPrice:e.listPrice||"",leaseRate:e.leaseRate||"",leaseRateUnit:e.leaseRateUnit||"per_sqft_annual",leaseType:e.leaseType||"",leaseTerms:e.leaseTerms||{minTerm:"",maxTerm:"",renewalOptions:"",securityDeposit:"",personalGuaranteeRequired:!1},grossIncome:e.grossIncome||"",hoaFees:e.hoaFees||"",propertyTaxes:e.propertyTaxes||"",leaseTermsDescription:e.leaseTermsDescription||"",availabilityDate:e.availabilityDate?e.availabilityDate.split("T")[0]:"",totalSquareFootage:e.totalSquareFootage||"",availableSquareFootage:e.availableSquareFootage||"",lotSize:e.lotSize||"",lotSizeUnit:e.lotSizeUnit||"sqft",lotDimensions:e.lotDimensions||"",buildingClass:e.buildingClass||"",yearBuilt:e.yearBuilt||"",renovationYear:e.renovationYear||"",numberOfUnits:e.numberOfUnits||"",ceilingHeight:e.ceilingHeight||"",clearHeight:e.clearHeight||"",floors:e.floors||"",loadingDocks:e.loadingDocks||"",driveInDoors:e.driveInDoors||"",parkingRatio:e.parkingRatio||"",description:e.description||"",zoning:e.zoning||"",parkingSpaces:e.parkingSpaces||"",amenities:e.amenities||[],keyHighlights:e.keyHighlights||[],keyFeatures:e.keyFeatures||[],marketingRemarks:e.marketingRemarks||"",highlights:e.highlights||"",marketingStatus:e.marketingStatus||"draft",pricePerSquareFoot:e.pricePerSquareFoot||"",ownerName:e.ownerName||"",ownerEmail:e.ownerEmail||"",ownerPhone:e.ownerPhone||"",listingAgent:e.listingAgent||"",brokerage:e.brokerage||"",coBrokerSplit:e.coBrokerSplit||"",transactionStatus:e.transactionStatus||"active",dateSoldLeased:e.dateSoldLeased?e.dateSoldLeased.split("T")[0]:"",finalSalePrice:e.finalSalePrice||"",finalLeaseRate:e.finalLeaseRate||"",buyerTenantName:e.buyerTenantName||"",notes:e.notes||"",images:e.images||[],documents:e.documents||[],floorPlans:e.floorPlans||[],sitePlans:e.sitePlans||[],offeringMemorandum:e.offeringMemorandum||"",brochure:e.brochure||""}),oe(!1),void X(!1)}}catch(t){console.error("Error reading from cache:",t)}}try{const t=await _.Up.getProperty(e);if(t&&t.property){const e=t.property;re({name:e.name||"",address:e.address||"",city:e.city||"",state:e.state||"",zipCode:e.zipCode||"",county:e.county||"",propertyType:e.propertyType||"",status:e.status||"for_sale",propertyStatus:e.propertyStatus||"",listingType:e.listingType||"sale",listingDate:e.listingDate?e.listingDate.split("T")[0]:"",expirationDate:e.expirationDate?e.expirationDate.split("T")[0]:"",internalPropertyId:e.internalPropertyId||"",mlsNumber:e.mlsNumber||"",listPrice:e.listPrice||"",leaseRate:e.leaseRate||"",leaseRateUnit:e.leaseRateUnit||"per_sqft_annual",leaseType:e.leaseType||"",leaseTerms:e.leaseTerms||{minTerm:"",maxTerm:"",renewalOptions:"",securityDeposit:"",personalGuaranteeRequired:!1},grossIncome:e.grossIncome||"",hoaFees:e.hoaFees||"",propertyTaxes:e.propertyTaxes||"",leaseTermsDescription:e.leaseTermsDescription||"",availabilityDate:e.availabilityDate?e.availabilityDate.split("T")[0]:"",totalSquareFootage:e.totalSquareFootage||"",availableSquareFootage:e.availableSquareFootage||"",lotSize:e.lotSize||"",lotSizeUnit:e.lotSizeUnit||"sqft",lotDimensions:e.lotDimensions||"",buildingClass:e.buildingClass||"",yearBuilt:e.yearBuilt||"",renovationYear:e.renovationYear||"",numberOfUnits:e.numberOfUnits||"",ceilingHeight:e.ceilingHeight||"",clearHeight:e.clearHeight||"",floors:e.floors||"",loadingDocks:e.loadingDocks||"",driveInDoors:e.driveInDoors||"",parkingRatio:e.parkingRatio||"",description:e.description||"",zoning:e.zoning||"",parkingSpaces:e.parkingSpaces||"",amenities:e.amenities||[],keyHighlights:e.keyHighlights||[],keyFeatures:e.keyFeatures||[],marketingRemarks:e.marketingRemarks||"",highlights:e.highlights||"",marketingStatus:e.marketingStatus||"draft",pricePerSquareFoot:e.pricePerSquareFoot||"",ownerName:e.ownerName||"",ownerEmail:e.ownerEmail||"",ownerPhone:e.ownerPhone||"",listingAgent:e.listingAgent||"",brokerage:e.brokerage||"",coBrokerSplit:e.coBrokerSplit||"",transactionStatus:e.transactionStatus||"active",dateSoldLeased:e.dateSoldLeased?e.dateSoldLeased.split("T")[0]:"",finalSalePrice:e.finalSalePrice||"",finalLeaseRate:e.finalLeaseRate||"",buyerTenantName:e.buyerTenantName||"",notes:e.notes||"",images:e.images||[],documents:e.documents||[],floorPlans:e.floorPlans||[],sitePlans:e.sitePlans||[],offeringMemorandum:e.offeringMemorandum||"",brochure:e.brochure||""}),oe(!1)}else J("Property not found")}catch(r){const e=a;re({name:e.name||"",address:e.address||"",city:e.city||"",state:e.state||"",zipCode:e.zipCode||"",propertyType:e.propertyType||"",status:e.status||"available",listingType:e.listingType||"sale",listPrice:e.listPrice||"",leaseRate:e.leaseRate||"",totalSquareFootage:e.totalSquareFootage||"",buildingClass:e.buildingClass||"",yearBuilt:e.yearBuilt||"",description:e.description||"",zoning:e.zoning||"",parkingSpaces:e.parkingSpaces||"",amenities:e.amenities||[],marketingStatus:e.marketingStatus||"draft",pricePerSquareFoot:e.pricePerSquareFoot||"",images:e.images||[]}),oe(!1)}}catch(a){J("Failed to load property details")}finally{X(!1)}},qe=e=>t=>{const r="checkbox"===t.target.type?t.target.checked:t.target.value;re(t=>(0,a.A)((0,a.A)({},t),{},{[e]:r})),oe(!0),ae[e]&&se(t=>(0,a.A)((0,a.A)({},t),{},{[e]:null}))},Le=e=>()=>{ne(t=>new Set([...t,e]));const t=(0,a.A)({},ae);"name"!==e||te.name.trim()?"propertyType"!==e||te.propertyType?"city"!==e||te.city.trim()?"state"!==e||te.state.trim()?"listingType"!==e||te.listingType?t[e]&&delete t[e]:t.listingType="Listing type is required":t.state="State is required":t.city="City is required":t.propertyType="Property type is required":t.name="Property name is required",se(t)},Ue=e=>t=>{const r="checkbox"===t.target.type?t.target.checked:t.target.value;re(t=>(0,a.A)((0,a.A)({},t),{},{leaseTerms:(0,a.A)((0,a.A)({},t.leaseTerms),{},{[e]:r})}))},Me=()=>{ce.trim()&&!te.amenities.includes(ce.trim())&&(re(e=>(0,a.A)((0,a.A)({},e),{},{amenities:[...e.amenities,ce.trim()]})),de(""))},He=()=>{pe.trim()&&!te.keyHighlights.includes(pe.trim())&&(re(e=>(0,a.A)((0,a.A)({},e),{},{keyHighlights:[...e.keyHighlights,pe.trim()]})),me(""))},Ne=()=>{ue.trim()&&!te.keyFeatures.includes(ue.trim())&&(re(e=>(0,a.A)((0,a.A)({},e),{},{keyFeatures:[...e.keyFeatures,ue.trim()]})),he(""))},Oe=()=>{le?window.confirm("You have unsaved changes. Are you sure you want to leave?")&&t("/properties"):t("/properties")};return Y?(0,W.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,W.jsx)(l.A,{})}):(0,W.jsxs)(n.A,{children:[(0,W.jsxs)(n.A,{sx:{mb:3},children:[(0,W.jsx)(o.A,{startIcon:(0,W.jsx)(w.A,{}),onClick:Oe,sx:{mb:2},children:"Back to Properties"}),(0,W.jsx)(c.A,{variant:"h4",sx:{fontWeight:700},children:D?"Edit Property":"Add New Property"})]}),Q&&(0,W.jsx)(d.A,{severity:"error",sx:{mb:3},children:Q}),(0,W.jsx)(p.A,{sx:{p:2},children:(0,W.jsx)("form",{onSubmit:async s=>{if(s.preventDefault(),s.stopPropagation(),$)console.log("Form submission already in progress, ignoring duplicate submit");else if((()=>{const e={};if(te.name.trim()||(e.name="Property name is required"),te.propertyType||(e.propertyType="Property type is required"),te.city.trim()||(e.city="City is required"),te.state.trim()||(e.state="State is required"),te.listingType||(e.listingType="Listing type is required"),se(e),Object.keys(e).length>0){const t=["name","propertyType","city","state","listingType"];ne(e=>new Set([...e,...t]));const r=Object.keys(e)[0];setTimeout(()=>{let e=document.querySelector('[name="'.concat(r,'"]'));e||(e=document.querySelector("#".concat(r))),e||(e=document.querySelector('[id="'.concat(r,'"]'))),e||"propertyType"!==r||(e=document.querySelector('[id="propertyType"]')),e||"listingType"!==r||(e=document.querySelector('[id="listingType"]')),e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus&&e.focus())},100)}return 0===Object.keys(e).length})())try{var i,n,l,o,c;K(!0);const s=(0,a.A)((0,a.A)({},te),{},{listPrice:te.listPrice?parseFloat(te.listPrice):null,leaseRate:te.leaseRate?parseFloat(te.leaseRate):null,totalSquareFootage:te.totalSquareFootage?parseInt(te.totalSquareFootage):null,availableSquareFootage:te.availableSquareFootage?parseInt(te.availableSquareFootage):null,lotSize:te.lotSize?parseFloat(te.lotSize):null,yearBuilt:te.yearBuilt?parseInt(te.yearBuilt):null,renovationYear:te.renovationYear?parseInt(te.renovationYear):null,numberOfUnits:te.numberOfUnits?parseInt(te.numberOfUnits):null,ceilingHeight:te.ceilingHeight?parseFloat(te.ceilingHeight):null,clearHeight:te.clearHeight?parseFloat(te.clearHeight):null,floors:te.floors?parseInt(te.floors):null,loadingDocks:te.loadingDocks?parseInt(te.loadingDocks):null,driveInDoors:te.driveInDoors?parseInt(te.driveInDoors):null,parkingSpaces:te.parkingSpaces?parseInt(te.parkingSpaces):null,parkingRatio:te.parkingRatio?parseFloat(te.parkingRatio):null,pricePerSquareFoot:te.pricePerSquareFoot?parseFloat(te.pricePerSquareFoot):null,grossIncome:te.grossIncome?parseFloat(te.grossIncome):null,hoaFees:te.hoaFees?parseFloat(te.hoaFees):null,propertyTaxes:te.propertyTaxes?parseFloat(te.propertyTaxes):null,coBrokerSplit:te.coBrokerSplit?parseFloat(te.coBrokerSplit):null,finalSalePrice:te.finalSalePrice?parseFloat(te.finalSalePrice):null,finalLeaseRate:te.finalLeaseRate?parseFloat(te.finalLeaseRate):null});let h,g=[];if(D)h=await _.Up.updateProperty(e,s);else{var d;h=await _.Up.createProperty(s);const e=(null===(d=h.property)||void 0===d?void 0:d.id)||h.id;if(e){if(Se.length>0)try{var p;const t=await _.Up.uploadImages(e,Se);g=(null===t||void 0===t?void 0:t.images)||(null===t||void 0===t||null===(p=t.photos)||void 0===p?void 0:p.map(e=>e.url))||[]}catch(b){}if(Pe.length>0)try{await _.Up.uploadDocuments(e,Pe)}catch(b){}}}oe(!1);const x=(null===(i=h)||void 0===i||null===(n=i.property)||void 0===n?void 0:n.id)||(null===(l=h)||void 0===l?void 0:l.id)||(null===(o=h)||void 0===o||null===(c=o.data)||void 0===c?void 0:c.id)||e;var m;if(D)ee({open:!0,message:"Property updated successfully",severity:"success"}),null!==(m=r.state)&&void 0!==m&&m.onUpdate&&r.state.onUpdate();else if(x)console.log("Property created successfully, redirecting to detail page:",x),t("/properties/".concat(x),{replace:!0});else{var u;console.warn("Property created but no ID returned, redirecting to properties list");const e=(null===(u=h)||void 0===u?void 0:u.property)||null,r=e&&g.length>0?(0,a.A)((0,a.A)({},e),{},{images:[...e.images||[],...g]}):e;t("/properties",{replace:!0,state:{justCreated:!0,newProperty:r}})}}catch(v){var h,g,x,y,A,f;console.error("Error creating/updating property:",v),console.error("Error details:",{message:v.message,stack:v.stack,response:v.response,status:null===(h=v.response)||void 0===h?void 0:h.status,data:null===(g=v.response)||void 0===g?void 0:g.data});let e="Failed to ".concat(D?"update":"create"," property");null!==(x=v.response)&&void 0!==x&&null!==(y=x.data)&&void 0!==y&&y.message?e=v.response.data.message:null!==(A=v.response)&&void 0!==A&&null!==(f=A.data)&&void 0!==f&&f.error?e=v.response.data.error:v.message&&(e="".concat(e,": ").concat(v.message)),J(e),ee({open:!0,message:e,severity:"error"})}finally{K(!1)}else ee({open:!0,message:"Please complete all required fields before submitting",severity:"error"})},children:(0,W.jsxs)(m.Ay,{container:!0,spacing:1.5,children:[(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,display:"flex",alignItems:"center",fontWeight:600},children:[(0,W.jsx)(T.A,{sx:{mr:.5,fontSize:20}}),"Basic Information"]})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,size:"small",label:"Property Name",name:"name",value:te.name,onChange:qe("name"),onBlur:Le("name"),error:!!ae.name&&ie.has("name"),helperText:ie.has("name")?ae.name:"",required:!0})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsxs)(h.A,{fullWidth:!0,size:"small",required:!0,error:!!ae.propertyType&&ie.has("propertyType"),children:[(0,W.jsx)(g.A,{id:"propertyType-label",children:"Property Type"}),(0,W.jsx)(x.A,{labelId:"propertyType-label",id:"propertyType",name:"propertyType",value:te.propertyType,label:"Property Type",onChange:e=>{qe("propertyType")(e),Le("propertyType")()},onBlur:Le("propertyType"),children:["office","retail","industrial"].map(e=>(0,W.jsx)(y.A,{value:e,children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))}),ae.propertyType&&ie.has("propertyType")&&(0,W.jsx)(A.A,{children:ae.propertyType})]})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsxs)(h.A,{fullWidth:!0,size:"small",error:!!ae.propertyStatus,children:[(0,W.jsx)(g.A,{children:"Property Status"}),(0,W.jsx)(x.A,{value:te.propertyStatus,label:"Property Status",onChange:qe("propertyStatus"),children:[{value:"active",label:"Active"},{value:"under_loi",label:"Under LOI"},{value:"off_market",label:"Off Market"},{value:"sold_leased",label:"Sold / Leased"}].map(e=>(0,W.jsx)(y.A,{value:e.value,children:e.label},e.value))}),ae.propertyStatus&&(0,W.jsx)(A.A,{children:ae.propertyStatus})]})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,size:"small",label:"Listing Date",type:"date",value:te.listingDate,onChange:qe("listingDate"),InputLabelProps:{shrink:!0}})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,size:"small",label:"Expiration Date",type:"date",value:te.expirationDate,onChange:qe("expirationDate"),InputLabelProps:{shrink:!0}})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,size:"small",label:"Internal Property ID",value:te.internalPropertyId,onChange:qe("internalPropertyId"),helperText:"Optional internal tracking ID"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,size:"small",label:"MLS Number",value:te.mlsNumber,onChange:qe("mlsNumber"),helperText:"Multiple Listing Service number"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,size:"small",label:"County",value:te.county,onChange:qe("county")})}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(f.A,{sx:{my:1}}),(0,W.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,W.jsx)(F.A,{sx:{mr:.5,fontSize:20}}),"Location"]})]}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(u.A,{fullWidth:!0,size:"small",label:"Address",value:te.address,onChange:qe("address"),error:!!ae.address,helperText:ae.address})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,size:"small",label:"City",name:"city",value:te.city,onChange:qe("city"),onBlur:Le("city"),error:!!ae.city&&ie.has("city"),helperText:ie.has("city")?ae.city:"",required:!0})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,size:"small",label:"State",name:"state",value:te.state,onChange:qe("state"),onBlur:Le("state"),error:!!ae.state&&ie.has("state"),helperText:ie.has("state")?ae.state:"",required:!0})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,size:"small",label:"ZIP Code",value:te.zipCode,onChange:qe("zipCode"),error:!!ae.zipCode,helperText:ae.zipCode})}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(f.A,{sx:{my:1}}),(0,W.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,W.jsx)(z.A,{sx:{mr:.5,fontSize:20}}),"Financials"]})]}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsxs)(h.A,{fullWidth:!0,size:"small",required:!0,error:!!ae.listingType&&ie.has("listingType"),children:[(0,W.jsx)(g.A,{id:"listingType-label",children:"Listing Type"}),(0,W.jsxs)(x.A,{labelId:"listingType-label",id:"listingType",name:"listingType",value:te.listingType,label:"Listing Type",onChange:e=>{qe("listingType")(e),Le("listingType")()},onBlur:Le("listingType"),children:[(0,W.jsx)(y.A,{value:"sale",children:"For Sale"}),(0,W.jsx)(y.A,{value:"lease",children:"For Lease"})]}),ae.listingType&&ie.has("listingType")&&(0,W.jsx)(A.A,{children:ae.listingType})]})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsxs)(h.A,{fullWidth:!0,size:"small",children:[(0,W.jsx)(g.A,{children:"Status"}),(0,W.jsx)(x.A,{value:te.status,label:"Status",onChange:qe("status"),children:["for_sale","for_lease","sold","leased","off_market","coming_soon"].map(e=>(0,W.jsx)(y.A,{value:e,children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})]})}),"sale"===te.listingType&&(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"List Price",type:"number",value:te.listPrice,onChange:qe("listPrice"),error:!!ae.listPrice,helperText:ae.listPrice,InputProps:{startAdornment:(0,W.jsx)(b.A,{position:"start",children:"$"})}})}),"lease"===te.listingType&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Lease Rate",type:"number",value:te.leaseRate,onChange:qe("leaseRate"),error:!!ae.leaseRate,helperText:ae.leaseRate,InputProps:{startAdornment:(0,W.jsx)(b.A,{position:"start",children:"$"})}})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsxs)(h.A,{fullWidth:!0,size:"small",children:[(0,W.jsx)(g.A,{children:"Lease Rate Unit"}),(0,W.jsxs)(x.A,{value:te.leaseRateUnit,label:"Lease Rate Unit",onChange:qe("leaseRateUnit"),children:[(0,W.jsx)(y.A,{value:"monthly",children:"Monthly"}),(0,W.jsx)(y.A,{value:"annual",children:"Annual"}),(0,W.jsx)(y.A,{value:"per_sqft_monthly",children:"Per Sq Ft Monthly"}),(0,W.jsx)(y.A,{value:"per_sqft_annual",children:"Per Sq Ft Annual"})]})]})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsxs)(h.A,{fullWidth:!0,size:"small",children:[(0,W.jsx)(g.A,{children:"Lease Type"}),(0,W.jsxs)(x.A,{value:te.leaseType,label:"Lease Type",onChange:qe("leaseType"),children:[(0,W.jsx)(y.A,{value:"NNN",children:"NNN (Triple Net)"}),(0,W.jsx)(y.A,{value:"Gross",children:"Gross"}),(0,W.jsx)(y.A,{value:"Modified",children:"Modified"}),(0,W.jsx)(y.A,{value:"Full Service",children:"Full Service"})]})]})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Availability Date",type:"date",value:te.availabilityDate,onChange:qe("availabilityDate"),InputLabelProps:{shrink:!0}})})]}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Price per Square Foot",type:"number",value:te.pricePerSquareFoot,onChange:qe("pricePerSquareFoot"),InputProps:{startAdornment:(0,W.jsx)(b.A,{position:"start",children:"$"})}})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Gross Income",type:"number",value:te.grossIncome,onChange:qe("grossIncome"),InputProps:{startAdornment:(0,W.jsx)(b.A,{position:"start",children:"$"})},helperText:"Annual gross income"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"HOA Fees",type:"number",value:te.hoaFees,onChange:qe("hoaFees"),InputProps:{startAdornment:(0,W.jsx)(b.A,{position:"start",children:"$"})},helperText:"Monthly HOA fees"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Property Taxes",type:"number",value:te.propertyTaxes,onChange:qe("propertyTaxes"),InputProps:{startAdornment:(0,W.jsx)(b.A,{position:"start",children:"$"})},helperText:"Annual property taxes"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Lease Terms Description",value:te.leaseTermsDescription,onChange:qe("leaseTermsDescription"),helperText:"e.g., 3-year NNN lease"})}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(f.A,{sx:{my:1}}),(0,W.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,W.jsx)(I.A,{sx:{mr:.5,fontSize:20}}),"Property Details"]})]}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Total Square Footage",type:"number",value:te.totalSquareFootage,onChange:qe("totalSquareFootage"),error:!!ae.totalSquareFootage,helperText:ae.totalSquareFootage})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsxs)(h.A,{fullWidth:!0,size:"small",children:[(0,W.jsx)(g.A,{children:"Lot Size Unit"}),(0,W.jsx)(x.A,{value:te.lotSizeUnit,label:"Lot Size Unit",onChange:qe("lotSizeUnit"),children:["sqft","acres"].map(e=>(0,W.jsx)(y.A,{value:e,children:e.toUpperCase()},e))})]})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsxs)(h.A,{fullWidth:!0,size:"small",children:[(0,W.jsx)(g.A,{children:"Building Class"}),(0,W.jsx)(x.A,{value:te.buildingClass,label:"Building Class",onChange:qe("buildingClass"),children:["A","B","C"].map(e=>(0,W.jsxs)(y.A,{value:e,children:["Class ",e]},e))})]})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Year Built",type:"number",value:te.yearBuilt,onChange:qe("yearBuilt")})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Renovation Year",type:"number",value:te.renovationYear,onChange:qe("renovationYear")})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Number of Units",type:"number",value:te.numberOfUnits,onChange:qe("numberOfUnits"),helperText:"For multifamily properties"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Ceiling Height (ft)",type:"number",value:te.ceilingHeight,onChange:qe("ceilingHeight")})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Parking Spaces",type:"number",value:te.parkingSpaces,onChange:qe("parkingSpaces")})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Available Square Footage",type:"number",value:te.availableSquareFootage,onChange:qe("availableSquareFootage"),InputProps:{endAdornment:(0,W.jsx)(b.A,{position:"end",children:"Sq Ft"})},helperText:"Available/leasable square footage"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Lot Size",type:"number",value:te.lotSize,onChange:qe("lotSize"),InputProps:{endAdornment:(0,W.jsx)(b.A,{position:"end",children:"acres"===te.lotSizeUnit?"Acres":"Sq Ft"})}})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Parking Ratio (spaces per 1000 SF)",type:"number",value:te.parkingRatio,onChange:qe("parkingRatio"),inputProps:{step:.01},helperText:"e.g., 4.0 = 4 spaces per 1000 sq ft"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Clear Height",type:"number",value:te.clearHeight,onChange:qe("clearHeight"),InputProps:{endAdornment:(0,W.jsx)(b.A,{position:"end",children:"ft"})},inputProps:{step:.1},helperText:"Warehouse/industrial clear height"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Number of Floors",type:"number",value:te.floors,onChange:qe("floors")})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Loading Docks",type:"number",value:te.loadingDocks,onChange:qe("loadingDocks"),helperText:"Number of loading docks"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Drive-in Doors",type:"number",value:te.driveInDoors,onChange:qe("driveInDoors"),helperText:"Number of drive-in doors"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Lot Dimensions",value:te.lotDimensions,onChange:qe("lotDimensions"),placeholder:"Dimensions"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Zoning",value:te.zoning,onChange:qe("zoning")})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsxs)(h.A,{fullWidth:!0,size:"small",children:[(0,W.jsx)(g.A,{children:"Marketing Status"}),(0,W.jsx)(x.A,{value:te.marketingStatus,label:"Marketing Status",onChange:qe("marketingStatus"),children:["draft","published","expired","suspended"].map(e=>(0,W.jsx)(y.A,{value:e,children:e.replace(/\b\w/g,e=>e.toUpperCase())},e))})]})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Description",multiline:!0,rows:4,value:te.description,onChange:qe("description"),helperText:"Describe the property features, location benefits, and other relevant details"})}),"lease"===te.listingType&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(c.A,{variant:"h6",sx:{mb:2},children:"Lease Terms"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Minimum Term (months)",type:"number",value:te.leaseTerms.minTerm,onChange:Ue("minTerm"),helperText:"Minimum lease duration in months"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Maximum Term (months)",type:"number",value:te.leaseTerms.maxTerm,onChange:Ue("maxTerm"),helperText:"Maximum lease duration in months"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Security Deposit",type:"number",value:te.leaseTerms.securityDeposit,onChange:Ue("securityDeposit"),InputProps:{startAdornment:(0,W.jsx)(b.A,{position:"start",children:"$"})},helperText:"Security deposit amount"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Renewal Options",value:te.leaseTerms.renewalOptions,onChange:Ue("renewalOptions"),helperText:"e.g., 2x5 year options"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(v.A,{control:(0,W.jsx)(j.A,{checked:te.leaseTerms.personalGuaranteeRequired,onChange:Ue("personalGuaranteeRequired")}),label:"Personal Guarantee Required"})})]}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(c.A,{variant:"h6",sx:{mb:2},children:"Amenities"}),(0,W.jsxs)(n.A,{sx:{display:"flex",gap:1,mb:2},children:[(0,W.jsx)(u.A,{fullWidth:!0,label:"Add amenity",value:ce,onChange:e=>de(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),Me())}}),(0,W.jsx)(o.A,{variant:"outlined",startIcon:(0,W.jsx)(R.A,{}),onClick:Me,sx:{minWidth:"auto"},children:"Add"})]}),(0,W.jsx)(n.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:te.amenities.map((e,t)=>(0,W.jsx)(S.A,{label:e,onDelete:()=>{return t=e,void re(e=>(0,a.A)((0,a.A)({},e),{},{amenities:e.amenities.filter(e=>e!==t)}));var t},variant:"outlined"},t))})]}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(f.A,{sx:{my:1}}),(0,W.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,W.jsx)(B,{sx:{mr:.5,fontSize:20}}),"Contacts"]})]}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Owner Name",value:te.ownerName,onChange:qe("ownerName")})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Owner Email",type:"email",value:te.ownerEmail,onChange:qe("ownerEmail")})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Owner Phone",value:te.ownerPhone,onChange:qe("ownerPhone")})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Listing Agent",value:te.listingAgent,onChange:qe("listingAgent")})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Brokerage",value:te.brokerage,onChange:qe("brokerage")})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Co-Broker Split (%)",type:"number",value:te.coBrokerSplit,onChange:qe("coBrokerSplit"),InputProps:{startAdornment:(0,W.jsx)(b.A,{position:"start",children:"%"})},helperText:"Commission split percentage"})}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(f.A,{sx:{my:1}}),(0,W.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,W.jsx)(q.A,{sx:{mr:.5,fontSize:20}}),"Marketing Info"]})]}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(c.A,{variant:"subtitle1",sx:{mb:2},children:"Key Highlights"}),(0,W.jsxs)(n.A,{sx:{display:"flex",gap:1,mb:2},children:[(0,W.jsx)(u.A,{fullWidth:!0,label:"Add key highlight",value:pe,onChange:e=>me(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),He())},helperText:"e.g., Recently renovated, Prime location, Class A building"}),(0,W.jsx)(o.A,{variant:"outlined",startIcon:(0,W.jsx)(R.A,{}),onClick:He,sx:{minWidth:"auto"},children:"Add"})]}),(0,W.jsx)(n.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:te.keyHighlights.map((e,t)=>(0,W.jsx)(S.A,{label:e,onDelete:()=>{return t=e,void re(e=>(0,a.A)((0,a.A)({},e),{},{keyHighlights:e.keyHighlights.filter(e=>e!==t)}));var t},variant:"outlined",color:"primary"},t))})]}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(c.A,{variant:"subtitle1",sx:{mb:2},children:"Key Features"}),(0,W.jsxs)(n.A,{sx:{display:"flex",gap:1,mb:2},children:[(0,W.jsx)(u.A,{fullWidth:!0,label:"Add key feature",value:ue,onChange:e=>he(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),Ne())},helperText:"e.g., High ceilings, Natural lighting, Modern finishes"}),(0,W.jsx)(o.A,{variant:"outlined",startIcon:(0,W.jsx)(R.A,{}),onClick:Ne,sx:{minWidth:"auto"},children:"Add"})]}),(0,W.jsx)(n.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:te.keyFeatures.map((e,t)=>(0,W.jsx)(S.A,{label:e,onDelete:()=>{return t=e,void re(e=>(0,a.A)((0,a.A)({},e),{},{keyFeatures:e.keyFeatures.filter(e=>e!==t)}));var t},variant:"outlined",color:"secondary"},t))})]}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Marketing Remarks",multiline:!0,rows:4,value:te.marketingRemarks,onChange:qe("marketingRemarks"),helperText:"Marketing and promotional remarks for the property"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Highlights",multiline:!0,rows:4,value:te.highlights,onChange:qe("highlights"),helperText:"Property highlights and notable features in paragraph format"})}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(f.A,{sx:{my:1}}),(0,W.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,W.jsx)(L.A,{sx:{mr:.5,fontSize:20}}),"Property Photos"]}),(0,W.jsxs)(n.A,(0,a.A)((0,a.A)({},Re()),{},{sx:{border:"2px dashed",borderColor:We?"primary.main":"grey.300",borderRadius:2,p:4,textAlign:"center",cursor:"pointer",mb:3,outline:We?"3px solid":"none",outlineColor:"primary.main",backgroundColor:We?"primary.light":"background.paper","&:hover":{backgroundColor:"grey.50"}},children:[(0,W.jsx)("input",(0,a.A)({},De())),(0,W.jsx)(U.A,{sx:{fontSize:48,color:"grey.500",mb:1}}),(0,W.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:We?"Drop photos here":"Upload Property Photos"}),(0,W.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Drag & drop photos here, or click to select files",(0,W.jsx)("br",{}),"Supports: JPG, PNG, GIF, WebP (max 10MB each)",(0,W.jsx)("br",{}),"Images are automatically compressed for optimal performance"]}),Se.length>0&&(0,W.jsx)(n.A,{sx:{display:"flex",gap:1,flexWrap:"wrap",justifyContent:"center",mt:2},children:Se.slice(0,6).map((e,t)=>(0,W.jsx)(n.A,{sx:{width:64,height:64,borderRadius:1,overflow:"hidden",border:"1px solid",borderColor:"grey.300"},children:(0,W.jsx)("img",{src:URL.createObjectURL(e),alt:"preview-".concat(t),style:{width:"100%",height:"100%",objectFit:"cover"}})},t))}),ge&&(0,W.jsxs)(n.A,{sx:{mt:2},children:[(0,W.jsx)(l.A,{size:24}),(0,W.jsx)(c.A,{variant:"body2",sx:{mt:1},children:"Uploading photos..."})]})]})),te.images&&te.images.length>0&&(0,W.jsx)(n.A,{children:(0,W.jsx)(G.A,{images:te.images,title:"Property Photos (".concat(te.images.length,")"),showThumbnails:!0,showFullscreenButton:!0,showIndex:!0,maxHeight:"400px",renderCustomControls:t=>{let{currentIndex:r,totalImages:s}=t;return(0,W.jsx)(n.A,{sx:{display:"flex",justifyContent:"flex-end",gap:1,mb:1},children:(0,W.jsx)(o.A,{size:"small",variant:"outlined",color:"error",startIcon:(0,W.jsx)(M.A,{}),onClick:()=>(async t=>{if(!D){const e=te.images.filter((e,r)=>r!==t),r=Se.filter((e,r)=>r!==t);return re(t=>(0,a.A)((0,a.A)({},t),{},{images:e})),void ke(r)}try{await _.Up.removeImage(e,t);const r=te.images.filter((e,r)=>r!==t);re(e=>(0,a.A)((0,a.A)({},e),{},{images:r})),ee({open:!0,message:"Photo removed successfully",severity:"success"})}catch(Q){ee({open:!0,message:"Failed to remove photo",severity:"error"})}})(r),children:"Remove Current Image"})})}})})]}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(f.A,{sx:{my:1}}),(0,W.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,W.jsx)(H.A,{sx:{mr:.5,fontSize:20}}),"Property Documents"]}),(0,W.jsxs)(n.A,{sx:{border:"2px dashed",borderColor:"grey.300",borderRadius:2,p:4,textAlign:"center",cursor:"pointer",mb:3,backgroundColor:"background.paper","&:hover":{backgroundColor:"grey.50"}},onClick:()=>document.getElementById("document-input").click(),children:[(0,W.jsx)("input",{id:"document-input",type:"file",multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.jpeg,.jpg,.png,.gif,.webp",style:{display:"none"},onChange:t=>{t.target.files&&((async t=>{if(t&&0!==t.length)try{Ae(!0);const r=[];for(const e of t){const t=Ie(e);t.isValid?r.push(e):ee({open:!0,message:"".concat(e.name,": ").concat(t.errors[0]),severity:"error"})}if(0===r.length)return void Ae(!1);if(!D)return Ce(e=>[...e,...r]),re(e=>(0,a.A)((0,a.A)({},e),{},{documents:[...e.documents,...r.map(e=>({name:e.name,size:e.size,type:e.type,url:URL.createObjectURL(e)}))]})),void Ae(!1);const s=await _.Up.uploadDocuments(e,r);re(e=>(0,a.A)((0,a.A)({},e),{},{documents:[...e.documents,...s.documents]})),ee({open:!0,message:"".concat(r.length," document(s) uploaded successfully"),severity:"success"})}catch(Q){ee({open:!0,message:"Failed to process or upload documents",severity:"error"})}finally{Ae(!1)}})(Array.from(t.target.files)),t.target.value="")}}),(0,W.jsx)(U.A,{sx:{fontSize:48,color:"grey.500",mb:1}}),(0,W.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Upload Property Documents"}),(0,W.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Click to select documents or drag & drop files here",(0,W.jsx)("br",{}),"Supports: PDF, DOC, DOCX, XLS, XLSX, TXT, Images (max 25MB each)"]}),ye&&(0,W.jsxs)(n.A,{sx:{mt:2},children:[(0,W.jsx)(l.A,{size:24}),(0,W.jsx)(c.A,{variant:"body2",sx:{mt:1},children:"Processing documents..."})]})]}),te.documents&&te.documents.length>0&&(0,W.jsxs)(n.A,{children:[(0,W.jsxs)(c.A,{variant:"subtitle1",gutterBottom:!0,children:["Uploaded Documents (",te.documents.length,")"]}),(0,W.jsx)(m.Ay,{container:!0,spacing:2,children:te.documents.map((t,r)=>(0,W.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,W.jsxs)(k.A,{sx:{p:2,height:"100%"},children:[(0,W.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,W.jsx)(H.A,{sx:{mr:1,color:"primary.main"}}),(0,W.jsx)(c.A,{variant:"subtitle2",noWrap:!0,sx:{flexGrow:1},children:t.name}),(0,W.jsx)(P.A,{size:"small",color:"error",onClick:()=>(async t=>{if(!D){const e=te.documents.filter((e,r)=>r!==t),r=Pe.filter((e,r)=>r!==t);return re(t=>(0,a.A)((0,a.A)({},t),{},{documents:e})),void Ce(r)}try{await _.Up.removeDocument(e,t);const r=te.documents.filter((e,r)=>r!==t);re(e=>(0,a.A)((0,a.A)({},e),{},{documents:r})),ee({open:!0,message:"Document removed successfully",severity:"success"})}catch(Q){ee({open:!0,message:"Failed to remove document",severity:"error"})}})(r),children:(0,W.jsx)(M.A,{})})]}),(0,W.jsxs)(c.A,{variant:"caption",color:"text.secondary",children:[t.type," \u2022 ",t.size?(t.size/1024/1024).toFixed(1)+"MB":"Unknown size"]})]})},r))})]})]}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(f.A,{sx:{my:1}}),(0,W.jsx)(c.A,{variant:"h6",sx:{mb:2},children:"Floor Plans"}),(0,W.jsxs)(n.A,{sx:{border:"2px dashed",borderColor:"grey.300",borderRadius:2,p:4,textAlign:"center",cursor:"pointer",mb:3,backgroundColor:"background.paper","&:hover":{backgroundColor:"grey.50"}},onClick:()=>document.getElementById("floorplan-input").click(),children:[(0,W.jsx)("input",{id:"floorplan-input",type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.gif,.webp",style:{display:"none"},onChange:t=>{t.target.files&&((async t=>{if(t&&0!==t.length)try{be(!0);const r=[];for(const e of t){const t=Ie(e);t.isValid?r.push(e):ee({open:!0,message:"".concat(e.name,": ").concat(t.errors[0]),severity:"error"})}if(0===r.length)return void be(!1);if(!D)return Te(e=>[...e,...r]),re(e=>(0,a.A)((0,a.A)({},e),{},{floorPlans:[...e.floorPlans,...r.map(e=>URL.createObjectURL(e))]})),void be(!1);const s=new FormData;r.forEach(e=>s.append("floorPlans",e));const i=await _.Up.uploadFloorPlans(e,r);re(e=>(0,a.A)((0,a.A)({},e),{},{floorPlans:[...e.floorPlans,...i.floorPlans||[]]})),ee({open:!0,message:"".concat(r.length," floor plan(s) uploaded successfully"),severity:"success"})}catch(Q){ee({open:!0,message:"Failed to upload floor plans",severity:"error"})}finally{be(!1)}})(Array.from(t.target.files)),t.target.value="")}}),(0,W.jsx)(U.A,{sx:{fontSize:48,color:"grey.500",mb:1}}),(0,W.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Upload Floor Plans"}),(0,W.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Click to select floor plans",(0,W.jsx)("br",{}),"Supports: PDF, JPG, PNG (max 25MB each)"]}),fe&&(0,W.jsxs)(n.A,{sx:{mt:2},children:[(0,W.jsx)(l.A,{size:24}),(0,W.jsx)(c.A,{variant:"body2",sx:{mt:1},children:"Uploading floor plans..."})]})]}),te.floorPlans&&te.floorPlans.length>0&&(0,W.jsxs)(n.A,{children:[(0,W.jsxs)(c.A,{variant:"subtitle1",gutterBottom:!0,children:["Uploaded Floor Plans (",te.floorPlans.length,")"]}),(0,W.jsx)(m.Ay,{container:!0,spacing:2,children:te.floorPlans.map((t,r)=>(0,W.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,W.jsx)(k.A,{sx:{p:2,height:"100%"},children:(0,W.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,W.jsx)(q.A,{sx:{mr:1,color:"primary.main"}}),(0,W.jsxs)(c.A,{variant:"subtitle2",noWrap:!0,sx:{flexGrow:1},children:["Floor Plan ",r+1]}),(0,W.jsx)(P.A,{size:"small",color:"error",onClick:()=>(async t=>{if(!D){const e=te.floorPlans.filter((e,r)=>r!==t),r=we.filter((e,r)=>r!==t);return re(t=>(0,a.A)((0,a.A)({},t),{},{floorPlans:e})),void Te(r)}try{await _.Up.removeFloorPlan(e,t);const r=te.floorPlans.filter((e,r)=>r!==t);re(e=>(0,a.A)((0,a.A)({},e),{},{floorPlans:r})),ee({open:!0,message:"Floor plan removed successfully",severity:"success"})}catch(Q){ee({open:!0,message:"Failed to remove floor plan",severity:"error"})}})(r),children:(0,W.jsx)(M.A,{})})]})})},r))})]})]}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(c.A,{variant:"h6",sx:{mb:2},children:"Site Plans"}),(0,W.jsxs)(n.A,{sx:{border:"2px dashed",borderColor:"grey.300",borderRadius:2,p:4,textAlign:"center",cursor:"pointer",mb:3,backgroundColor:"background.paper","&:hover":{backgroundColor:"grey.50"}},onClick:()=>document.getElementById("siteplan-input").click(),children:[(0,W.jsx)("input",{id:"siteplan-input",type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.gif,.webp",style:{display:"none"},onChange:t=>{t.target.files&&((async t=>{if(t&&0!==t.length)try{je(!0);const r=[];for(const e of t){const t=Ie(e);t.isValid?r.push(e):ee({open:!0,message:"".concat(e.name,": ").concat(t.errors[0]),severity:"error"})}if(0===r.length)return void je(!1);if(!D)return ze(e=>[...e,...r]),re(e=>(0,a.A)((0,a.A)({},e),{},{sitePlans:[...e.sitePlans,...r.map(e=>URL.createObjectURL(e))]})),void je(!1);const s=await _.Up.uploadSitePlans(e,r);re(e=>(0,a.A)((0,a.A)({},e),{},{sitePlans:[...e.sitePlans,...s.sitePlans||[]]})),ee({open:!0,message:"".concat(r.length," site plan(s) uploaded successfully"),severity:"success"})}catch(Q){ee({open:!0,message:"Failed to upload site plans",severity:"error"})}finally{je(!1)}})(Array.from(t.target.files)),t.target.value="")}}),(0,W.jsx)(U.A,{sx:{fontSize:48,color:"grey.500",mb:1}}),(0,W.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Upload Site Plans"}),(0,W.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["Click to select site plans",(0,W.jsx)("br",{}),"Supports: PDF, JPG, PNG (max 25MB each)"]}),ve&&(0,W.jsxs)(n.A,{sx:{mt:2},children:[(0,W.jsx)(l.A,{size:24}),(0,W.jsx)(c.A,{variant:"body2",sx:{mt:1},children:"Uploading site plans..."})]})]}),te.sitePlans&&te.sitePlans.length>0&&(0,W.jsxs)(n.A,{children:[(0,W.jsxs)(c.A,{variant:"subtitle1",gutterBottom:!0,children:["Uploaded Site Plans (",te.sitePlans.length,")"]}),(0,W.jsx)(m.Ay,{container:!0,spacing:2,children:te.sitePlans.map((t,r)=>(0,W.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,W.jsx)(k.A,{sx:{p:2,height:"100%"},children:(0,W.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,W.jsx)(q.A,{sx:{mr:1,color:"primary.main"}}),(0,W.jsxs)(c.A,{variant:"subtitle2",noWrap:!0,sx:{flexGrow:1},children:["Site Plan ",r+1]}),(0,W.jsx)(P.A,{size:"small",color:"error",onClick:()=>(async t=>{if(!D){const e=te.sitePlans.filter((e,r)=>r!==t),r=Fe.filter((e,r)=>r!==t);return re(t=>(0,a.A)((0,a.A)({},t),{},{sitePlans:e})),void ze(r)}try{await _.Up.removeSitePlan(e,t);const r=te.sitePlans.filter((e,r)=>r!==t);re(e=>(0,a.A)((0,a.A)({},e),{},{sitePlans:r})),ee({open:!0,message:"Site plan removed successfully",severity:"success"})}catch(Q){ee({open:!0,message:"Failed to remove site plan",severity:"error"})}})(r),children:(0,W.jsx)(M.A,{})})]})})},r))})]})]}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,md:6,children:[(0,W.jsx)(c.A,{variant:"subtitle1",sx:{mb:2},children:"Offering Memorandum"}),(0,W.jsxs)(n.A,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,W.jsxs)(o.A,{variant:"outlined",component:"label",startIcon:(0,W.jsx)(U.A,{}),fullWidth:!0,children:[te.offeringMemorandum?"Replace Offering Memorandum":"Upload Offering Memorandum",(0,W.jsx)("input",{type:"file",hidden:!0,accept:".pdf,.doc,.docx",onChange:t=>{t.target.files&&t.target.files[0]&&((async t=>{if(!t)return;const r=Ie(t);if(r.isValid)if(D)try{const r=await _.Up.uploadOfferingMemorandum(e,t);re(e=>(0,a.A)((0,a.A)({},e),{},{offeringMemorandum:r.offeringMemorandum})),ee({open:!0,message:"Offering memorandum uploaded successfully",severity:"success"})}catch(Q){ee({open:!0,message:"Failed to upload offering memorandum",severity:"error"})}else re(e=>(0,a.A)((0,a.A)({},e),{},{offeringMemorandum:URL.createObjectURL(t)}));else ee({open:!0,message:"".concat(t.name,": ").concat(r.errors[0]),severity:"error"})})(t.target.files[0]),t.target.value="")}})]}),te.offeringMemorandum&&(0,W.jsx)(P.A,{color:"error",onClick:async()=>{if(D)try{await _.Up.removeOfferingMemorandum(e),re(e=>(0,a.A)((0,a.A)({},e),{},{offeringMemorandum:""})),ee({open:!0,message:"Offering memorandum removed successfully",severity:"success"})}catch(Q){ee({open:!0,message:"Failed to remove offering memorandum",severity:"error"})}else re(e=>(0,a.A)((0,a.A)({},e),{},{offeringMemorandum:""}))},children:(0,W.jsx)(M.A,{})})]}),te.offeringMemorandum&&(0,W.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"\u2713 Offering Memorandum uploaded"})]}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,md:6,children:[(0,W.jsx)(c.A,{variant:"subtitle1",sx:{mb:2},children:"Property Brochure"}),(0,W.jsxs)(n.A,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,W.jsxs)(o.A,{variant:"outlined",component:"label",startIcon:(0,W.jsx)(U.A,{}),fullWidth:!0,children:[te.brochure?"Replace Brochure":"Upload Brochure",(0,W.jsx)("input",{type:"file",hidden:!0,accept:".pdf,.doc,.docx",onChange:t=>{t.target.files&&t.target.files[0]&&((async t=>{if(!t)return;const r=Ie(t);if(r.isValid)if(D)try{const r=await _.Up.uploadBrochure(e,t);re(e=>(0,a.A)((0,a.A)({},e),{},{brochure:r.brochure})),ee({open:!0,message:"Brochure uploaded successfully",severity:"success"})}catch(Q){ee({open:!0,message:"Failed to upload brochure",severity:"error"})}else re(e=>(0,a.A)((0,a.A)({},e),{},{brochure:URL.createObjectURL(t)}));else ee({open:!0,message:"".concat(t.name,": ").concat(r.errors[0]),severity:"error"})})(t.target.files[0]),t.target.value="")}})]}),te.brochure&&(0,W.jsx)(P.A,{color:"error",onClick:async()=>{if(D)try{await _.Up.removeBrochure(e),re(e=>(0,a.A)((0,a.A)({},e),{},{brochure:""})),ee({open:!0,message:"Brochure removed successfully",severity:"success"})}catch(Q){ee({open:!0,message:"Failed to remove brochure",severity:"error"})}else re(e=>(0,a.A)((0,a.A)({},e),{},{brochure:""}))},children:(0,W.jsx)(M.A,{})})]}),te.brochure&&(0,W.jsx)(c.A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:"\u2713 Brochure uploaded"})]}),(0,W.jsxs)(m.Ay,{item:!0,xs:12,children:[(0,W.jsx)(f.A,{sx:{my:1}}),(0,W.jsxs)(c.A,{variant:"subtitle1",sx:{mb:1,mt:.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,W.jsx)(N.A,{sx:{mr:.5,fontSize:20}}),"Transaction Info"]})]}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsxs)(h.A,{fullWidth:!0,size:"small",children:[(0,W.jsx)(g.A,{children:"Transaction Status"}),(0,W.jsx)(x.A,{value:te.transactionStatus,label:"Transaction Status",onChange:qe("transactionStatus"),children:["active","under_contract","closed","cancelled"].map(e=>(0,W.jsx)(y.A,{value:e,children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))})]})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Date Sold/Leased",type:"date",value:te.dateSoldLeased,onChange:qe("dateSoldLeased"),InputLabelProps:{shrink:!0},helperText:"Date transaction was completed"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Final Sale Price",type:"number",value:te.finalSalePrice,onChange:qe("finalSalePrice"),InputProps:{startAdornment:(0,W.jsx)(b.A,{position:"start",children:"$"})},helperText:"Actual sale price (if sold)"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Final Lease Rate",type:"number",value:te.finalLeaseRate,onChange:qe("finalLeaseRate"),InputProps:{startAdornment:(0,W.jsx)(b.A,{position:"start",children:"$"})},helperText:"Actual lease rate (if leased)"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Buyer/Tenant Name",value:te.buyerTenantName,onChange:qe("buyerTenantName"),helperText:"Name of buyer or tenant"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsx)(u.A,{fullWidth:!0,label:"Notes",multiline:!0,rows:4,value:te.notes,onChange:qe("notes"),helperText:"Additional transaction notes or comments"})}),(0,W.jsx)(m.Ay,{item:!0,xs:12,children:(0,W.jsxs)(n.A,{sx:{display:"flex",gap:1.5,justifyContent:"flex-end",mt:2},children:[(0,W.jsx)(o.A,{size:"small",variant:"outlined",onClick:Oe,disabled:$,children:"Cancel"}),(0,W.jsx)(o.A,{size:"small",type:"submit",variant:"contained",startIcon:$?(0,W.jsx)(l.A,{size:16}):(0,W.jsx)(O.A,{}),disabled:$,children:$?"Saving...":D?"Update Property":"Create Property"})]})})]})})}),(0,W.jsx)(C.A,{open:Z.open,autoHideDuration:6e3,onClose:()=>ee((0,a.A)((0,a.A)({},Z),{},{open:!1})),children:(0,W.jsx)(d.A,{onClose:()=>ee((0,a.A)((0,a.A)({},Z),{},{open:!1})),severity:Z.severity,sx:{width:"100%"},children:Z.message})})]})}},66593:(e,t,r)=>{r.d(t,{Wl:()=>l,Yd:()=>c,aV:()=>o,w4:()=>i,zG:()=>n});var a=r(89379),s=r(41641);const i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const r=(0,a.A)({maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:e.type,initialQuality:.8},t);if(e.size<=1024*r.maxSizeMB*1024)return e;console.log("Compressing image: ".concat(e.name," (").concat((e.size/1024/1024).toFixed(2),"MB)"));const i=await(0,s.A)(e,r);return console.log("Compressed image: ".concat(e.name," (").concat((i.size/1024/1024).toFixed(2),"MB)")),i}catch(r){return console.error("Error compressing image:",r),e}},n=(e,t)=>{const r={useWebWorker:!0,fileType:t};switch(e){case"avatar":case"logo":return(0,a.A)((0,a.A)({},r),{},{maxSizeMB:.5,maxWidthOrHeight:400,initialQuality:.9});case"property":return(0,a.A)((0,a.A)({},r),{},{maxSizeMB:2,maxWidthOrHeight:2048,initialQuality:.8});case"document":return(0,a.A)((0,a.A)({},r),{},{maxSizeMB:1,maxWidthOrHeight:1200,initialQuality:.7});default:return(0,a.A)((0,a.A)({},r),{},{maxSizeMB:1,maxWidthOrHeight:1920,initialQuality:.8})}},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{maxSizeBytes:r=10485760,allowedTypes:a=["image/jpeg","image/jpg","image/png","image/gif","image/webp"]}=t,s=[];return a.includes(e.type)||s.push("Invalid file type. Allowed types: ".concat(a.join(", "))),e.size>r&&s.push("File size too large. Maximum size: ".concat((r/1024/1024).toFixed(1),"MB")),{isValid:0===s.length,errors:s}},o=e=>URL.createObjectURL(e),c=e=>{e&&e.startsWith("blob:")&&URL.revokeObjectURL(e)}},74605:(e,t,r)=>{r.d(t,{A:()=>S});var a=r(98587),s=r(58168),i=r(65043),n=r(58387),l=r(98610),o=r(85213),c=r(88911),d=r(85865),p=r(6803),m=r(34535),u=r(98206),h=r(92532),g=r(72372);function x(e){return(0,g.Ay)("MuiFormControlLabel",e)}const y=(0,h.A)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]);var A=r(74827),f=r(70579);const b=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],v=(0,m.Ay)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{["& .".concat(y.label)]:t.label},t.root,t["labelPlacement".concat((0,p.A)(r.labelPlacement))]]}})(e=>{let{theme:t,ownerState:r}=e;return(0,s.A)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,["&.".concat(y.disabled)]:{cursor:"default"}},"start"===r.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===r.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===r.labelPlacement&&{flexDirection:"column",marginLeft:16},{["& .".concat(y.label)]:{["&.".concat(y.disabled)]:{color:(t.vars||t).palette.text.disabled}}})}),j=(0,m.Ay)("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(e=>{let{theme:t}=e;return{["&.".concat(y.error)]:{color:(t.vars||t).palette.error.main}}}),S=i.forwardRef(function(e,t){var r,m;const h=(0,u.b)({props:e,name:"MuiFormControlLabel"}),{className:g,componentsProps:y={},control:S,disabled:k,disableTypography:P,label:C,labelPlacement:w="end",required:T,slotProps:F={}}=h,z=(0,a.A)(h,b),I=(0,o.A)(),R=null!=(r=null!=k?k:S.props.disabled)?r:null==I?void 0:I.disabled,D=null!=T?T:S.props.required,W={disabled:R,required:D};["checked","name","onChange","value","inputRef"].forEach(e=>{"undefined"===typeof S.props[e]&&"undefined"!==typeof h[e]&&(W[e]=h[e])});const B=(0,A.A)({props:h,muiFormControl:I,states:["error"]}),q=(0,s.A)({},h,{disabled:R,labelPlacement:w,required:D,error:B.error}),L=(e=>{const{classes:t,disabled:r,labelPlacement:a,error:s,required:i}=e,n={root:["root",r&&"disabled","labelPlacement".concat((0,p.A)(a)),s&&"error",i&&"required"],label:["label",r&&"disabled"],asterisk:["asterisk",s&&"error"]};return(0,l.A)(n,x,t)})(q),U=null!=(m=F.typography)?m:y.typography;let M=C;return null==M||M.type===d.A||P||(M=(0,f.jsx)(d.A,(0,s.A)({component:"span"},U,{className:(0,n.A)(L.label,null==U?void 0:U.className),children:M}))),(0,f.jsxs)(v,(0,s.A)({className:(0,n.A)(L.root,g),ownerState:q,ref:t},z,{children:[i.cloneElement(S,W),D?(0,f.jsxs)(c.A,{display:"block",children:[M,(0,f.jsxs)(j,{ownerState:q,"aria-hidden":!0,className:L.asterisk,children:["\u2009","*"]})]}):M]}))})},85006:(e,t,r)=>{r.d(t,{Up:()=>i});var a=r(89379),s=r(94505);const i={getProperties:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(e).toString(),r="/properties".concat(t?"?".concat(t):"");return(await s.Ay.get(r)).data}catch(t){throw console.error("Error fetching properties:",t),t}},getProperty:async e=>{try{return(await s.Ay.get("/properties/".concat(e))).data}catch(t){throw console.error("Error fetching property:",t),t}},createProperty:async e=>{try{return(await s.Ay.post("/properties",e)).data}catch(t){throw console.error("Error creating property:",t),t}},updateProperty:async(e,t)=>{try{return(await s.Ay.put("/properties/".concat(e),t)).data}catch(r){throw console.error("Error updating property:",r),r}},deleteProperty:async e=>{try{return(await s.Ay.delete("/properties/".concat(e))).data}catch(t){throw console.error("Error deleting property:",t),t}},uploadImages:async(e,t)=>{try{const r=new FormData;t.forEach(e=>{r.append("images",e)});return(await s.Ay.post("/properties/".concat(e,"/images"),r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error uploading images:",r),r}},uploadDocuments:async(e,t)=>{try{const r=new FormData;t.forEach(e=>{r.append("documents",e)});return(await s.Ay.post("/properties/".concat(e,"/documents"),r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error uploading documents:",r),r}},removeImage:async(e,t)=>{try{return(await s.Ay.delete("/properties/".concat(e,"/images/").concat(t))).data}catch(r){throw console.error("Error removing image:",r),r}},removeDocument:async(e,t)=>{try{return(await s.Ay.delete("/properties/".concat(e,"/documents/").concat(t))).data}catch(r){throw console.error("Error removing document:",r),r}},importProperties:async e=>{try{const t=new FormData;t.append("file",e);return(await s.Ay.post("/properties/import",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error importing properties:",t),t}},exportProperties:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(e).toString(),r="/properties/export".concat(t?"?".concat(t):"");return(await s.Ay.get(r,{responseType:"blob"})).data}catch(t){throw console.error("Error exporting properties:",t),t}},getTemplate:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"csv";try{return(await s.Ay.get("/properties/template?format=".concat(e),{responseType:"blob"})).data}catch(t){throw console.error("Error getting template:",t),t}},getMapProperties:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const r=(0,a.A)({bounds:e},t),i=new URLSearchParams(r).toString();return(await s.Ay.get("/properties/search/map?".concat(i))).data}catch(r){throw console.error("Error fetching map properties:",r),r}},logInquiry:async(e,t)=>{try{return(await s.Ay.post("/properties/".concat(e,"/inquire"),t)).data}catch(r){throw console.error("Error logging inquiry:",r),r}}}}}]);
//# sourceMappingURL=8822.44420b95.chunk.js.map