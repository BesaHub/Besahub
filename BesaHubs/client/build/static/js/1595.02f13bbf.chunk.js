"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[1595],{85006:(e,t,r)=>{r.d(t,{Up:()=>o});var a=r(89379),s=r(94505);const o={getProperties:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(e).toString(),r="/properties".concat(t?"?".concat(t):"");return(await s.Ay.get(r)).data}catch(t){throw console.error("Error fetching properties:",t),t}},getProperty:async e=>{try{return(await s.Ay.get("/properties/".concat(e))).data}catch(t){throw console.error("Error fetching property:",t),t}},createProperty:async e=>{try{return(await s.Ay.post("/properties",e)).data}catch(t){throw console.error("Error creating property:",t),t}},updateProperty:async(e,t)=>{try{return(await s.Ay.put("/properties/".concat(e),t)).data}catch(r){throw console.error("Error updating property:",r),r}},deleteProperty:async e=>{try{return(await s.Ay.delete("/properties/".concat(e))).data}catch(t){throw console.error("Error deleting property:",t),t}},uploadImages:async(e,t)=>{try{const r=new FormData;t.forEach(e=>{r.append("images",e)});return(await s.Ay.post("/properties/".concat(e,"/images"),r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error uploading images:",r),r}},uploadDocuments:async(e,t)=>{try{const r=new FormData;t.forEach(e=>{r.append("documents",e)});return(await s.Ay.post("/properties/".concat(e,"/documents"),r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error uploading documents:",r),r}},removeImage:async(e,t)=>{try{return(await s.Ay.delete("/properties/".concat(e,"/images/").concat(t))).data}catch(r){throw console.error("Error removing image:",r),r}},removeDocument:async(e,t)=>{try{return(await s.Ay.delete("/properties/".concat(e,"/documents/").concat(t))).data}catch(r){throw console.error("Error removing document:",r),r}},importProperties:async e=>{try{const t=new FormData;t.append("file",e);return(await s.Ay.post("/properties/import",t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error importing properties:",t),t}},exportProperties:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams(e).toString(),r="/properties/export".concat(t?"?".concat(t):"");return(await s.Ay.get(r,{responseType:"blob"})).data}catch(t){throw console.error("Error exporting properties:",t),t}},getTemplate:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"csv";try{return(await s.Ay.get("/properties/template?format=".concat(e),{responseType:"blob"})).data}catch(t){throw console.error("Error getting template:",t),t}},getMapProperties:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const r=(0,a.A)({bounds:e},t),o=new URLSearchParams(r).toString();return(await s.Ay.get("/properties/search/map?".concat(o))).data}catch(r){throw console.error("Error fetching map properties:",r),r}},logInquiry:async(e,t)=>{try{return(await s.Ay.post("/properties/".concat(e,"/inquire"),t)).data}catch(r){throw console.error("Error logging inquiry:",r),r}}}},87404:(e,t,r)=>{r.r(t),r.d(t,{default:()=>R});var a=r(65043),s=r(43845),o=r(96446),i=r(81637),n=r(63336),l=r(11906),c=r(85865),p=r(67784),d=r(51787),h=r(53193),u=r(18356),y=r(72221),m=r(32143),x=r(67254),g=r(94109),f=r(17392),A=r(39336),j=r(35721),w=r(24628),b=r(12110),v=r(26494),C=r(87332),S=r(33438),P=r(91082),k=r(47805),T=r(79484),z=r(10529),E=r(73216),_=r(9896),I=r(99419),W=r(76036),U=r(13318),q=r(12023),B=r(80228),L=r.n(B),F=(r(66433),r(85006)),D=r(70579);delete L().Icon.Default.prototype._getIconUrl,L().Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const M=e=>{let{center:t,zoom:r}=e;const s=(0,_.ko)();return(0,a.useEffect)(()=>{t&&s.setView(t,r)},[s,t,r]),null},R=()=>{const e=(0,E.Zp)(),[t,r]=(0,a.useState)([]),[_,B]=(0,a.useState)([]),[L,R]=(0,a.useState)(!0),[N,Y]=(0,a.useState)(null),[O,V]=(0,a.useState)([40.7128,-74.006]),[H,$]=(0,a.useState)(12),[Q,Z]=(0,a.useState)(null),[G,J]=(0,a.useState)(!1),[K,X]=(0,a.useState)(""),[ee,te]=(0,a.useState)(""),[re,ae]=(0,a.useState)(""),se=[{id:"1",name:"Downtown Office Complex",address:"123 Business Ave",city:"New York",state:"NY",zipCode:"10001",propertyType:"office",status:"available",listingType:"sale",listPrice:25e5,totalSquareFootage:25e3,buildingClass:"A",yearBuilt:2020,coordinates:[40.7589,-73.9851],images:[],marketingStatus:"published",description:"Modern office building in the heart of Manhattan"},{id:"2",name:"Industrial Warehouse",address:"456 Commerce Blvd",city:"Brooklyn",state:"NY",zipCode:"11201",propertyType:"industrial",status:"leased",listingType:"lease",leaseRate:15,totalSquareFootage:5e4,buildingClass:"B",yearBuilt:2015,coordinates:[40.6892,-73.9442],images:[],marketingStatus:"published",description:"Large warehouse facility with modern amenities"},{id:"3",name:"Retail Shopping Center",address:"789 Shopping Way",city:"Queens",state:"NY",zipCode:"11101",propertyType:"retail",status:"under_contract",listingType:"sale",listPrice:35e5,totalSquareFootage:75e3,buildingClass:"A",yearBuilt:2018,coordinates:[40.7505,-73.93],images:[],marketingStatus:"published",description:"Prime retail location with high foot traffic"},{id:"4",name:"Medical Office Building",address:"321 Health Plaza",city:"Manhattan",state:"NY",zipCode:"10016",propertyType:"office",status:"available",listingType:"lease",leaseRate:45,totalSquareFootage:15e3,buildingClass:"A",yearBuilt:2019,coordinates:[40.7452,-73.9808],images:[],marketingStatus:"published",description:"Specialized medical office space with modern facilities"},{id:"5",name:"Mixed-Use Development",address:"654 Urban Center",city:"Bronx",state:"NY",zipCode:"10451",propertyType:"mixed_use",status:"available",listingType:"sale",listPrice:42e5,totalSquareFootage:85e3,buildingClass:"B",yearBuilt:2021,coordinates:[40.8176,-73.9182],images:[],marketingStatus:"published",description:"Modern mixed-use development with retail and office space"}];(0,a.useEffect)(()=>{oe()},[]),(0,a.useEffect)(()=>{ie()},[t,K,ee,re]);const oe=async()=>{try{R(!0),Y(null);try{const e=await F.Up.getMapProperties("bounds",{searchTerm:K,type:ee,status:re});e&&e.properties?r(e.properties):r(se)}catch(e){r(se)}}catch(t){Y("Failed to load properties"),r(se)}finally{R(!1)}},ie=()=>{let e=t;K&&(e=e.filter(e=>e.name.toLowerCase().includes(K.toLowerCase())||e.address.toLowerCase().includes(K.toLowerCase())||e.city.toLowerCase().includes(K.toLowerCase()))),ee&&(e=e.filter(e=>e.propertyType===ee)),re&&(e=e.filter(e=>e.status===re)),B(e)},ne=e=>(0,D.jsx)(s.A,{label:e.replace("_"," ").toUpperCase(),color:{available:"success",under_contract:"warning",leased:"info",sold:"default",off_market:"error"}[e]||"default",size:"small"}),le=e=>"sale"===e.listingType&&e.listPrice?"$".concat((e.listPrice/1e6).toFixed(1),"M"):"lease"===e.listingType&&e.leaseRate?"$".concat(e.leaseRate,"/sf/yr"):"Price on request";return L?(0,D.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,D.jsx)(i.A,{})}):(0,D.jsxs)(o.A,{sx:{height:"100vh",display:"flex",flexDirection:"column"},children:[(0,D.jsxs)(n.A,{sx:{p:2,borderRadius:0},children:[(0,D.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,D.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,D.jsx)(l.A,{startIcon:(0,D.jsx)(C.A,{}),onClick:()=>e("/properties"),variant:"outlined",children:"Back to Properties"}),(0,D.jsx)(c.A,{variant:"h5",sx:{fontWeight:600},children:"Property Map View"}),(0,D.jsx)(s.A,{icon:(0,D.jsx)(P.A,{}),label:"".concat(_.length," properties"),color:"primary",variant:"outlined"})]}),(0,D.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,D.jsx)(l.A,{startIcon:(0,D.jsx)(z.A,{}),onClick:()=>J(!0),variant:"outlined",children:"Property List"}),(0,D.jsx)(l.A,{startIcon:(0,D.jsx)(k.A,{}),onClick:oe,variant:"outlined",children:"Refresh"})]})]}),(0,D.jsxs)(o.A,{sx:{display:"flex",gap:2,mt:2,flexWrap:"wrap"},children:[(0,D.jsx)(p.A,{label:"Search properties",value:K,onChange:e=>X(e.target.value),size:"small",sx:{minWidth:250},InputProps:{startAdornment:(0,D.jsx)(d.A,{position:"start",children:(0,D.jsx)(T.A,{})})}}),(0,D.jsxs)(h.A,{size:"small",sx:{minWidth:150},children:[(0,D.jsx)(u.A,{children:"Property Type"}),(0,D.jsxs)(y.A,{value:ee,label:"Property Type",onChange:e=>te(e.target.value),children:[(0,D.jsx)(m.A,{value:"",children:"All Types"}),["office","retail","industrial","warehouse","multifamily","hotel","mixed_use","land","other"].map(e=>(0,D.jsx)(m.A,{value:e,children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))]})]}),(0,D.jsxs)(h.A,{size:"small",sx:{minWidth:150},children:[(0,D.jsx)(u.A,{children:"Status"}),(0,D.jsxs)(y.A,{value:re,label:"Status",onChange:e=>ae(e.target.value),children:[(0,D.jsx)(m.A,{value:"",children:"All Status"}),["available","under_contract","sold","leased","off_market"].map(e=>(0,D.jsx)(m.A,{value:e,children:e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())},e))]})]})]})]}),N&&(0,D.jsx)(x.A,{severity:"error",sx:{m:2},children:N}),(0,D.jsx)(o.A,{sx:{flex:1,position:"relative"},children:(0,D.jsxs)(I.W,{center:O,zoom:H,style:{height:"100%",width:"100%"},zoomControl:!0,children:[(0,D.jsx)(q.e,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,D.jsx)(M,{center:O,zoom:H}),_.map(t=>{var r;return t.coordinates&&(0,D.jsx)(W.p,{position:t.coordinates,eventHandlers:{click:()=>(e=>{Z(e),J(!0)})(t)},children:(0,D.jsx)(U.z,{children:(0,D.jsxs)(o.A,{sx:{minWidth:250},children:[(0,D.jsx)(c.A,{variant:"h6",sx:{fontWeight:600,mb:1},children:t.name}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[(0,D.jsx)(P.A,{sx:{fontSize:16,mr:.5,verticalAlign:"middle"}}),t.address,", ",t.city,", ",t.state]}),(0,D.jsxs)(o.A,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:[ne(t.status),(0,D.jsx)(s.A,{label:t.propertyType.replace("_"," ").toUpperCase(),size:"small",variant:"outlined"})]}),(0,D.jsx)(c.A,{variant:"h6",color:"primary",sx:{mb:1},children:le(t)}),(0,D.jsxs)(c.A,{variant:"body2",sx:{mb:2},children:[null===(r=t.totalSquareFootage)||void 0===r?void 0:r.toLocaleString()," sq ft"]}),(0,D.jsx)(l.A,{variant:"contained",size:"small",onClick:()=>e("/properties/".concat(t.id)),fullWidth:!0,children:"View Details"})]})})},t.id)})]})}),(0,D.jsx)(g.Ay,{anchor:"right",open:G,onClose:()=>J(!1),PaperProps:{sx:{width:400}},children:(0,D.jsxs)(o.A,{sx:{p:2},children:[(0,D.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,D.jsxs)(c.A,{variant:"h6",sx:{fontWeight:600},children:["Properties (",_.length,")"]}),(0,D.jsx)(f.A,{onClick:()=>J(!1),children:(0,D.jsx)(S.A,{})})]}),(0,D.jsx)(A.A,{sx:{mb:2}}),(0,D.jsx)(j.A,{sx:{p:0},children:_.map(e=>{var t;return(0,D.jsx)(w.Ay,{sx:{p:0,mb:2,cursor:"pointer","&:hover":{backgroundColor:"rgba(0,0,0,0.04)"}},onClick:()=>{(e=>{Z(e),e.coordinates&&(V(e.coordinates),$(15))})(e),J(!1)},children:(0,D.jsx)(b.A,{sx:{width:"100%"},children:(0,D.jsxs)(v.A,{sx:{p:2,"&:last-child":{pb:2}},children:[(0,D.jsx)(c.A,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:e.name}),(0,D.jsxs)(c.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:[(0,D.jsx)(P.A,{sx:{fontSize:14,mr:.5,verticalAlign:"middle"}}),e.address,", ",e.city]}),(0,D.jsxs)(o.A,{sx:{display:"flex",gap:.5,mb:1,flexWrap:"wrap"},children:[ne(e.status),(0,D.jsx)(s.A,{label:e.propertyType.replace("_"," "),size:"small",variant:"outlined"})]}),(0,D.jsx)(c.A,{variant:"body1",color:"primary",sx:{fontWeight:600},children:le(e)}),(0,D.jsxs)(c.A,{variant:"caption",color:"text.secondary",children:[null===(t=e.totalSquareFootage)||void 0===t?void 0:t.toLocaleString()," sq ft"]})]})})},e.id)})})]})})]})}}}]);
//# sourceMappingURL=1595.02f13bbf.chunk.js.map