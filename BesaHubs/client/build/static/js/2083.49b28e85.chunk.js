"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[2083],{1943:(e,r,t)=>{t.d(r,{A:()=>o,j:()=>i});var a=t(80045),s=t(94505);const n=["propertyId"],i={getLeases:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const{propertyId:r}=e,t=(0,a.A)(e,n),i=new URLSearchParams(t).toString(),o=r?"/properties/".concat(r,"/leases"):"/leases",l="".concat(o).concat(i?"?".concat(i):"");return(await s.Ay.get(l)).data}catch(r){throw console.error("Error fetching leases:",r),r}},getLease:async e=>{try{return(await s.Ay.get("/leases/".concat(e))).data}catch(r){throw console.error("Error fetching lease:",r),r}},createLease:async e=>{try{const r=null!==e&&void 0!==e&&e.propertyId?"/properties/".concat(e.propertyId,"/leases"):"/leases";return(await s.Ay.post(r,e)).data}catch(r){throw console.error("Error creating lease:",r),r}},updateLease:async(e,r)=>{try{return(await s.Ay.put("/leases/".concat(e),r)).data}catch(t){throw console.error("Error updating lease:",t),t}},deleteLease:async e=>{try{return(await s.Ay.delete("/leases/".concat(e))).data}catch(r){throw console.error("Error deleting lease:",r),r}},getExpiringLeases:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90;try{return(await s.Ay.get("/leases/expiring/soon?days=".concat(e))).data}catch(r){throw console.error("Error fetching expiring leases:",r),r}}},o=i},16314:(e,r,t)=>{t.d(r,{A:()=>o,m:()=>i});var a=t(80045),s=t(94505);const n=["propertyId"],i={getDebts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const{propertyId:r}=e,t=(0,a.A)(e,n),i=new URLSearchParams(t).toString(),o=r?"/properties/".concat(r,"/debt"):"/debt",l="".concat(o).concat(i?"?".concat(i):"");return(await s.Ay.get(l)).data}catch(r){throw console.error("Error fetching debt records:",r),r}},getDebt:async e=>{try{return(await s.Ay.get("/debt/".concat(e))).data}catch(r){throw console.error("Error fetching debt record:",r),r}},createDebt:async e=>{try{const r=null!==e&&void 0!==e&&e.propertyId?"/properties/".concat(e.propertyId,"/debt"):"/debt";return(await s.Ay.post(r,e)).data}catch(r){throw console.error("Error creating debt record:",r),r}},updateDebt:async(e,r)=>{try{return(await s.Ay.put("/debt/".concat(e),r)).data}catch(t){throw console.error("Error updating debt record:",t),t}},deleteDebt:async e=>{try{return(await s.Ay.delete("/debt/".concat(e))).data}catch(r){throw console.error("Error deleting debt record:",r),r}},getMaturingDebts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:180;try{return(await s.Ay.get("/debt/maturing/soon?days=".concat(e))).data}catch(r){throw console.error("Error fetching maturing debts:",r),r}}},o=i},34668:(e,r,t)=>{t.d(r,{A:()=>A});var a=t(89379),s=t(80045),n=t(65043),i=t(50222),o=t(26240),l=t(30344),c=t(17392),d=t(96446),h=t(85865),x=t(78185),m=t(43845),y=t(16419),p=(t(35815),t(70579));const u=["images","title","showThumbnails","showFullscreenButton","showPlayButton","autoPlay","slideInterval","showIndex","loading","maxHeight","onImageLoad","onImageError","renderCustomControls"],A=e=>{let{images:r=[],title:t,showThumbnails:A=!0,showFullscreenButton:g=!0,showPlayButton:j=!1,autoPlay:b=!1,slideInterval:v=3e3,showIndex:f=!0,loading:w=!1,maxHeight:S="500px",onImageLoad:I,onImageError:C,renderCustomControls:k}=e,P=(0,s.A)(e,u);const D=(0,o.A)(),R=(0,l.A)(D.breakpoints.down("md")),[F,L]=(0,n.useState)(!1),[T,E]=(0,n.useState)(0),q=r.map((e,r)=>{const t="string"===typeof e?e:e.url||e.src,a=t.startsWith("http")?t:"http://localhost:3001".concat(t);return{original:a,thumbnail:a,description:e.description||e.caption||"Image ".concat(r+1),alt:e.alt||"Property image ".concat(r+1),originalAlt:e.alt||"Property image ".concat(r+1),thumbnailAlt:e.alt||"Property image ".concat(r+1)}});return w?(0,p.jsxs)(d.A,{sx:{width:"100%"},children:[t&&(0,p.jsxs)(h.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[(0,p.jsx)(y.A,{sx:{mr:1}}),t]}),(0,p.jsx)(x.A,{variant:"rectangular",height:S,sx:{borderRadius:D.shape.borderRadius,mb:2}}),A&&(0,p.jsx)(d.A,{sx:{display:"flex",gap:1,overflowX:"auto"},children:Array.from({length:4}).map((e,r)=>(0,p.jsx)(x.A,{variant:"rectangular",width:80,height:60,sx:{borderRadius:D.shape.borderRadius,flexShrink:0}},r))})]}):r&&0!==r.length?(0,p.jsxs)(d.A,{sx:{width:"100%",position:"relative"},children:[(t||f)&&(0,p.jsxs)(d.A,{sx:{mb:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[t&&(0,p.jsxs)(h.A,{variant:"h6",sx:{display:"flex",alignItems:"center"},children:[(0,p.jsx)(y.A,{sx:{mr:1}}),t]}),f&&q.length>0&&(0,p.jsx)(m.A,{label:"".concat(T+1," of ").concat(q.length),size:"small",variant:"outlined"})]}),k&&(0,p.jsx)(d.A,{sx:{mb:2},children:k({currentIndex:T,totalImages:q.length})}),(0,p.jsx)(d.A,{sx:{"& .image-gallery":{backgroundColor:"transparent"},"& .image-gallery-content":{borderRadius:D.shape.borderRadius,overflow:"hidden"},"& .image-gallery-slide":{borderRadius:D.shape.borderRadius},"& .image-gallery-thumbnails-wrapper":{marginTop:D.spacing(1)},"& .image-gallery-thumbnail":{borderRadius:D.shape.borderRadius,border:"2px solid ".concat(D.palette.divider),"&.active":{border:"2px solid ".concat(D.palette.primary.main)}},"& .image-gallery-icon":{color:D.palette.common.white,"&:hover":{color:D.palette.primary.main}},"& .image-gallery-left-nav, & .image-gallery-right-nav":{display:"none"}},children:(0,p.jsx)(i.A,(0,a.A)({items:q,showThumbnails:A&&!R,showFullscreenButton:g,showPlayButton:j,autoPlay:b,slideInterval:v,onSlide:e=>{E(e)},onScreenChange:()=>{L(!F)},renderLeftNav:(e,r)=>(0,p.jsx)(c.A,{onClick:e,disabled:r,sx:{position:"absolute",left:10,top:"50%",transform:"translateY(-50%)",zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"},"&.disabled":{opacity:.3}},size:R?"small":"medium",children:(0,p.jsx)("span",{children:"\u2039"})}),renderRightNav:(e,r)=>(0,p.jsx)(c.A,{onClick:e,disabled:r,sx:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"},"&.disabled":{opacity:.3}},size:R?"small":"medium",children:(0,p.jsx)("span",{children:"\u203a"})}),renderItem:e=>(0,p.jsxs)("div",{className:"image-gallery-image",children:[(0,p.jsx)("img",{src:e.original,alt:e.originalAlt,onLoad:I,onError:C,style:{maxHeight:S,width:"100%",objectFit:"cover",borderRadius:D.shape.borderRadius}}),e.description&&(0,p.jsx)(d.A,{sx:{position:"absolute",bottom:0,left:0,right:0,background:"linear-gradient(transparent, rgba(0,0,0,0.8))",color:"white",p:2,borderRadius:"0 0 ".concat(D.shape.borderRadius,"px ").concat(D.shape.borderRadius,"px")},children:(0,p.jsx)(h.A,{variant:"body2",children:e.description})})]}),thumbnailPosition:"bottom",useBrowserFullscreen:!0,showNav:q.length>1,showBullets:R&&q.length>1,infinite:q.length>1,lazyLoad:!0},P))}),R&&A&&q.length>1&&(0,p.jsx)(d.A,{sx:{display:"flex",gap:1,mt:2,overflowX:"auto",pb:1,"&::-webkit-scrollbar":{height:4},"&::-webkit-scrollbar-track":{backgroundColor:D.palette.divider,borderRadius:2},"&::-webkit-scrollbar-thumb":{backgroundColor:D.palette.primary.main,borderRadius:2}},children:q.map((e,r)=>(0,p.jsx)(d.A,{onClick:()=>E(r),sx:{minWidth:80,height:60,borderRadius:1,overflow:"hidden",cursor:"pointer",border:"2px solid ".concat(T===r?D.palette.primary.main:D.palette.divider),"&:hover":{borderColor:D.palette.primary.main}},children:(0,p.jsx)("img",{src:e.thumbnail,alt:e.thumbnailAlt,style:{width:"100%",height:"100%",objectFit:"cover"}})},r))})]}):(0,p.jsxs)(d.A,{sx:{p:4,textAlign:"center",color:"text.secondary",border:"2px dashed",borderColor:"divider",borderRadius:D.shape.borderRadius,backgroundColor:"background.paper"},children:[(0,p.jsx)(y.A,{sx:{fontSize:48,mb:1,opacity:.5}}),(0,p.jsx)(h.A,{variant:"body1",children:"No images available"})]})}},39705:(e,r,t)=>{t.d(r,{TP:()=>s});var a=t(94505);const s={getContacts:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const r=new URLSearchParams(e).toString(),t="/contacts".concat(r?"?".concat(r):"");return(await a.Ay.get(t)).data}catch(r){throw console.error("Error fetching contacts:",r),r}},getContact:async e=>{try{return(await a.Ay.get("/contacts/".concat(e))).data}catch(r){throw console.error("Error fetching contact:",r),r}},createContact:async e=>{try{return(await a.Ay.post("/contacts",e)).data}catch(r){throw console.error("Error creating contact:",r),r}},updateContact:async(e,r)=>{try{return(await a.Ay.put("/contacts/".concat(e),r)).data}catch(t){throw console.error("Error updating contact:",t),t}},deleteContact:async e=>{try{return(await a.Ay.delete("/contacts/".concat(e))).data}catch(r){throw console.error("Error deleting contact:",r),r}}}},75456:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(66734),s=t(70579);const n=(0,a.A)((0,s.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info")},83560:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(66734),s=t(70579);const n=(0,a.A)((0,s.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},85006:(e,r,t)=>{t.d(r,{Up:()=>n});var a=t(89379),s=t(94505);const n={getProperties:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const r=new URLSearchParams(e).toString(),t="/properties".concat(r?"?".concat(r):"");return(await s.Ay.get(t)).data}catch(r){throw console.error("Error fetching properties:",r),r}},getProperty:async e=>{try{return(await s.Ay.get("/properties/".concat(e))).data}catch(r){throw console.error("Error fetching property:",r),r}},createProperty:async e=>{try{return(await s.Ay.post("/properties",e)).data}catch(r){throw console.error("Error creating property:",r),r}},updateProperty:async(e,r)=>{try{return(await s.Ay.put("/properties/".concat(e),r)).data}catch(t){throw console.error("Error updating property:",t),t}},deleteProperty:async e=>{try{return(await s.Ay.delete("/properties/".concat(e))).data}catch(r){throw console.error("Error deleting property:",r),r}},uploadImages:async(e,r)=>{try{const t=new FormData;r.forEach(e=>{t.append("images",e)});return(await s.Ay.post("/properties/".concat(e,"/images"),t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error uploading images:",t),t}},uploadDocuments:async(e,r)=>{try{const t=new FormData;r.forEach(e=>{t.append("documents",e)});return(await s.Ay.post("/properties/".concat(e,"/documents"),t,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(t){throw console.error("Error uploading documents:",t),t}},removeImage:async(e,r)=>{try{return(await s.Ay.delete("/properties/".concat(e,"/images/").concat(r))).data}catch(t){throw console.error("Error removing image:",t),t}},removeDocument:async(e,r)=>{try{return(await s.Ay.delete("/properties/".concat(e,"/documents/").concat(r))).data}catch(t){throw console.error("Error removing document:",t),t}},importProperties:async e=>{try{const r=new FormData;r.append("file",e);return(await s.Ay.post("/properties/import",r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(r){throw console.error("Error importing properties:",r),r}},exportProperties:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const r=new URLSearchParams(e).toString(),t="/properties/export".concat(r?"?".concat(r):"");return(await s.Ay.get(t,{responseType:"blob"})).data}catch(r){throw console.error("Error exporting properties:",r),r}},getTemplate:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"csv";try{return(await s.Ay.get("/properties/template?format=".concat(e),{responseType:"blob"})).data}catch(r){throw console.error("Error getting template:",r),r}},getMapProperties:async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const t=(0,a.A)({bounds:e},r),n=new URLSearchParams(t).toString();return(await s.Ay.get("/properties/search/map?".concat(n))).data}catch(t){throw console.error("Error fetching map properties:",t),t}},logInquiry:async(e,r)=>{try{return(await s.Ay.post("/properties/".concat(e,"/inquire"),r)).data}catch(t){throw console.error("Error logging inquiry:",t),t}}}},87332:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(66734),s=t(70579);const n=(0,a.A)((0,s.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},91082:(e,r,t)=>{t.d(r,{A:()=>n});var a=t(66734),s=t(70579);const n=(0,a.A)((0,s.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn")},91402:(e,r,t)=>{t.r(r),t.d(r,{default:()=>ve});var a=t(89379),s=t(65043),n=t(73216),i=t(68903),o=t(85865),l=t(96446),c=t(81637),d=t(11906),h=t(67254),x=t(63336),m=t(43845),y=t(12110),p=t(26494),u=t(81045),A=t(35721),g=t(24628),j=t(48734),b=t(83462),v=t(26600),f=t(35316),w=t(53193),S=t(18356),I=t(72221),C=t(32143),k=t(67784),P=t(51787),D=t(29347),R=t(73158),F=t(87332),L=t(83560),T=t(75456),E=t(1418),q=t(67957),N=t(59275),M=t(59893),W=t(66734),z=t(70579);const H=(0,W.A)((0,z.jsx)("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"}),"Receipt");var B=t(84770),U=t(91082),O=t(95846),_=t(79641);const V=(0,W.A)((0,z.jsx)("path",{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8z"}),"Folder"),G=(0,W.A)((0,z.jsx)("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-8.5 7.5c0 .83-.67 1.5-1.5 1.5H9v2H7.5V7H10c.83 0 1.5.67 1.5 1.5zm5 2c0 .83-.67 1.5-1.5 1.5h-2.5V7H15c.83 0 1.5.67 1.5 1.5zm4-3H19v1h1.5V11H19v2h-1.5V7h3zM9 9.5h1v-1H9zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4zm10 5.5h1v-3h-1z"}),"PictureAsPdf");var Y=t(20979),K=t(85006),Z=t(1943),$=t(16314),J=t(39705),X=t(94505),Q=t(80045),ee=t(26240),re=t(30344),te=t(98587),ae=t(58168),se=t(58387),ne=t(98610),ie=t(98206),oe=t(34535),le=t(92532),ce=t(72372);function de(e){return(0,ce.Ay)("MuiCardMedia",e)}(0,le.A)("MuiCardMedia",["root","media","img"]);const he=["children","className","component","image","src","style"],xe=(0,oe.Ay)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:t}=e,{isMediaComponent:a,isImageComponent:s}=t;return[r.root,a&&r.media,s&&r.img]}})(e=>{let{ownerState:r}=e;return(0,ae.A)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},r.isMediaComponent&&{width:"100%"},r.isImageComponent&&{objectFit:"cover"})}),me=["video","audio","picture","iframe","img"],ye=["picture","img"],pe=s.forwardRef(function(e,r){const t=(0,ie.b)({props:e,name:"MuiCardMedia"}),{children:a,className:s,component:n="div",image:i,src:o,style:l}=t,c=(0,te.A)(t,he),d=-1!==me.indexOf(n),h=!d&&i?(0,ae.A)({backgroundImage:'url("'.concat(i,'")')},l):l,x=(0,ae.A)({},t,{component:n,isMediaComponent:d,isImageComponent:-1!==ye.indexOf(n)}),m=(e=>{const{classes:r,isMediaComponent:t,isImageComponent:a}=e,s={root:["root",t&&"media",a&&"img"]};return(0,ne.A)(s,de,r)})(x);return(0,z.jsx)(xe,(0,ae.A)({className:(0,se.A)(m.root,s),as:n,role:!d&&i?"img":void 0,ref:r,style:h,ownerState:x,src:d?i||o:void 0},c,{children:a}))});var ue=t(17392),Ae=t(33438),ge=t(34668);const je=["images","mainImage","onImageClick","maxImages","showFullGalleryButton"],be=e=>{let{images:r=[],mainImage:t,onImageClick:a,maxImages:n=6,showFullGalleryButton:i=!0}=e;(0,Q.A)(e,je);const o=(0,ee.A)(),c=(0,re.A)(o.breakpoints.down("md")),[d,h]=s.useState(!1),[x,m]=s.useState(0),p=r.filter(e=>{const r="string"===typeof e?e:e.url||e.src;return r&&!r.startsWith("blob:")}),u=p.slice(0,n),A=p.length-n,g=e=>{m(e),h(!0),a&&a(p[e],e)},j=e=>{const r="string"===typeof e?e:e.url||e.src;return r.startsWith("blob:")?null:r.startsWith("http")||r.startsWith("/")?r:"/".concat(r)};return p&&0!==p.length?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(l.A,{sx:{width:"100%"},children:[(0,z.jsx)(l.A,{sx:{mb:2},children:(0,z.jsx)(y.A,{sx:{cursor:"pointer","&:hover":{boxShadow:o.shadows[8],transform:"scale(1.02)",transition:"all 0.3s ease-in-out"}},onClick:()=>g(0),children:(0,z.jsx)(pe,{component:"img",height:c?250:400,image:j(t||p[0]),alt:"Main property image",sx:{objectFit:"cover",borderRadius:o.shape.borderRadius}})})}),u.length>1&&(0,z.jsx)(l.A,{sx:{display:"grid",gridTemplateColumns:c?"repeat(3, 1fr)":"repeat(auto-fit, minmax(120px, 1fr))",gap:1,maxHeight:c?120:150,overflow:"hidden"},children:u.slice(1).map((e,r)=>(0,z.jsxs)(y.A,{sx:{cursor:"pointer",position:"relative","&:hover":{opacity:.8,transform:"scale(1.05)",transition:"all 0.2s ease-in-out"}},onClick:()=>g(r+1),children:[(0,z.jsx)(pe,{component:"img",height:c?80:120,image:j(e),alt:"Property image ".concat(r+2),sx:{objectFit:"cover",borderRadius:o.shape.borderRadius}}),r===u.slice(1).length-1&&A>0&&(0,z.jsxs)(l.A,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"1.2rem",fontWeight:"bold",borderRadius:o.shape.borderRadius},children:["+",A]})]},r+1))})]}),(0,z.jsx)(b.A,{open:d,onClose:()=>h(!1),maxWidth:!1,fullWidth:!0,PaperProps:{sx:{backgroundColor:"rgba(0, 0, 0, 0.9)",maxWidth:"95vw",maxHeight:"95vh",m:1}},children:(0,z.jsxs)(f.A,{sx:{p:0,position:"relative"},children:[(0,z.jsx)(ue.A,{onClick:()=>h(!1),sx:{position:"absolute",top:16,right:16,zIndex:10,backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white","&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"}},children:(0,z.jsx)(Ae.A,{})}),(0,z.jsx)(ge.A,{images:p,showThumbnails:!c,showFullscreenButton:!0,showIndex:!0,startIndex:x,maxHeight:"80vh",autoPlay:!1})]})})]}):null},ve=()=>{var e,r,t,W;const{id:Q}=(0,n.g)(),ee=(0,n.Zp)(),[re,te]=(0,s.useState)(null),[ae,se]=(0,s.useState)(!0),[ne,ie]=(0,s.useState)(null),[oe,le]=(0,s.useState)(0),[ce,de]=(0,s.useState)([]),[he,xe]=(0,s.useState)([]),[me,ye]=(0,s.useState)([]),[pe,ue]=(0,s.useState)([]),[Ae,ge]=(0,s.useState)(!1),[je,ve]=(0,s.useState)(!1),[fe,we]=(0,s.useState)(!1),[Se,Ie]=(0,s.useState)(!1),[Ce,ke]=(0,s.useState)(null),[Pe,De]=(0,s.useState)(null),[Re,Fe]=(0,s.useState)({open:!1,message:"",severity:"success"}),[Le,Te]=(0,s.useState)({tenantId:"",startDate:"",endDate:"",monthlyRent:"",squareFeet:"",terms:"",options:"",status:"pending"}),[Ee,qe]=(0,s.useState)({lenderId:"",amount:"",interestRate:"",maturityDate:"",dscr:"",loanType:"mortgage",notes:""});(0,s.useEffect)(()=>{(async()=>{try{if(se(!0),Q&&Q.startsWith("sample-")){const e="dev_properties_cache";try{const r=JSON.parse(localStorage.getItem(e)||"[]").find(e=>String(e.id)===String(Q));if(r)return te(r),void se(!1)}catch(s){console.error("Error reading from cache:",s)}}try{const e=await K.Up.getProperty(Q);e&&e.property?te(e.property):ie("Property not found")}catch(n){var e,r;if(Q&&Q.startsWith("sample-")){const e="dev_properties_cache";try{const r=JSON.parse(localStorage.getItem(e)||"[]").find(e=>String(e.id)===String(Q));if(r)return void te(r)}catch(s){console.error("Error reading from cache:",s)}}console.error("Error fetching property:",n),ie((null===(e=n.response)||void 0===e||null===(r=e.data)||void 0===r?void 0:r.error)||"Failed to load property details")}}catch(i){var t,a;console.error("Error fetching property:",i),ie((null===(t=i.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to load property details")}finally{se(!1)}})(),Ne(),Me(),We(),ze()},[Q]);const Ne=async()=>{try{ge(!0);const e=await Z.j.getLeases({propertyId:Q});de(e.leases||[])}catch(ne){console.error("Error fetching leases:",ne),de([])}finally{ge(!1)}},Me=async()=>{try{ve(!0);const e=await $.m.getDebts({propertyId:Q});xe(e.debts||[])}catch(ne){console.error("Error fetching debts:",ne),xe([])}finally{ve(!1)}},We=async()=>{try{const e=await J.TP.getContacts({limit:1e3});ye(e.contacts||[])}catch(ne){console.error("Error fetching contacts:",ne),ye([])}},ze=async()=>{try{var e;const r=await X._K.getAll({limit:1e3});ue((null===(e=r.data)||void 0===e?void 0:e.companies)||[])}catch(ne){console.error("Error fetching companies:",ne),ue([])}},He=()=>{ee("/properties")},Be=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),Ue=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"\u2014",Oe=function(e,r){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&r?(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:e}),(0,z.jsx)(o.A,{variant:"body1",sx:{fontWeight:500},children:r})]}):null},_e=()=>{we(!1),ke(null)},Ve=()=>{Ie(!1),De(null)};return ae?(0,z.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh"},children:(0,z.jsx)(c.A,{})}):ne||!re?(0,z.jsxs)(l.A,{children:[(0,z.jsx)(d.A,{startIcon:(0,z.jsx)(F.A,{}),onClick:He,sx:{mb:2},children:"Back to Properties"}),(0,z.jsx)(h.A,{severity:"error",children:ne||"Property not found"})]}):(0,z.jsxs)(l.A,{children:[(0,z.jsxs)(l.A,{sx:{mb:3},children:[(0,z.jsx)(d.A,{startIcon:(0,z.jsx)(F.A,{}),onClick:He,sx:{mb:2},children:"Back to Properties"}),(0,z.jsx)(x.A,{sx:{p:3},children:(0,z.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,z.jsxs)(l.A,{sx:{flex:1},children:[(0,z.jsx)(o.A,{variant:"h4",sx:{fontWeight:700,mb:1},children:re.name||re.address}),(0,z.jsxs)(o.A,{variant:"h6",color:"text.secondary",sx:{mb:2},children:[re.address,", ",re.city,", ",re.state," ",re.zipCode]}),(0,z.jsxs)(l.A,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:[re.propertyStatus&&(0,z.jsx)(m.A,{label:"active"===re.propertyStatus?"Active":"under_loi"===re.propertyStatus?"Under LOI":"off_market"===re.propertyStatus?"Off Market":"sold_leased"===re.propertyStatus?"Sold / Leased":re.propertyStatus,color:"active"===re.propertyStatus?"success":"under_loi"===re.propertyStatus?"warning":"off_market"===re.propertyStatus?"default":"info",variant:"filled"}),re.propertyType&&(0,z.jsx)(m.A,{label:re.propertyType.charAt(0).toUpperCase()+re.propertyType.slice(1),variant:"outlined"}),re.listingType&&(0,z.jsx)(m.A,{label:"sale"===re.listingType?"For Sale":"For Lease",variant:"outlined"})]})]}),(0,z.jsx)(l.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:(0,z.jsx)(d.A,{variant:"contained",startIcon:(0,z.jsx)(L.A,{}),onClick:()=>{ee("/properties/".concat(Q,"/edit"))},children:"Edit"})})]})})]}),(0,z.jsxs)(i.Ay,{container:!0,spacing:3,children:[(0,z.jsxs)(i.Ay,{item:!0,xs:12,md:8,children:[(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{children:[(0,z.jsxs)(o.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",fontWeight:600},children:[(0,z.jsx)(T.A,{sx:{mr:1}}),"Basic Information"]}),(0,z.jsxs)(i.Ay,{container:!0,spacing:2,children:[Oe("Property Name",re.name),Oe("Address",re.address),Oe("City",re.city),Oe("State",re.state),Oe("ZIP Code",re.zipCode),Oe("County",re.county),Oe("Property Type",re.propertyType?re.propertyType.charAt(0).toUpperCase()+re.propertyType.slice(1):null),Oe("Property Status",re.propertyStatus?"active"===re.propertyStatus?"Active":"under_loi"===re.propertyStatus?"Under LOI":"off_market"===re.propertyStatus?"Off Market":"sold_leased"===re.propertyStatus?"Sold / Leased":re.propertyStatus:null),Oe("Listing Type",re.listingType?"sale"===re.listingType?"For Sale":"For Lease":null),Oe("Internal Property ID",re.internalPropertyId),Oe("MLS Number",re.mlsNumber),Oe("Listing Date",re.listingDate?Ue(re.listingDate):null),Oe("Expiration Date",re.expirationDate?Ue(re.expirationDate):null)]})]})}),(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{children:[(0,z.jsxs)(o.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",fontWeight:600},children:[(0,z.jsx)(E.A,{sx:{mr:1}}),"Photos"]}),re.images&&re.images.length>0?(0,z.jsx)(be,{images:re.images,maxImages:6,showFullGalleryButton:!0}):(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"No photos uploaded"})]})}),(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{sx:{p:3},children:[(0,z.jsxs)(o.A,{variant:"h6",sx:{mb:2.5,display:"flex",alignItems:"center",fontWeight:600},children:[(0,z.jsx)(q.A,{sx:{mr:1}}),"Financial Details"]}),(0,z.jsxs)(i.Ay,{container:!0,spacing:2.5,children:[(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"List Price"}),(0,z.jsx)(o.A,{variant:"h6",children:re.listPrice?Be(re.listPrice):"\u2014"})]}),re.leaseRate&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Lease Rate"}),(0,z.jsxs)(o.A,{variant:"h6",children:[Be(re.leaseRate),re.leaseRateUnit&&" (".concat(re.leaseRateUnit.replace(/_/g," "),")")]})]}),re.pricePerSquareFoot&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Price per Sq Ft"}),(0,z.jsxs)(o.A,{variant:"h6",children:["$","number"===typeof re.pricePerSquareFoot?re.pricePerSquareFoot.toFixed(2):parseFloat(re.pricePerSquareFoot).toFixed(2)]})]}),re.capRate&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Cap Rate"}),(0,z.jsxs)(o.A,{variant:"h6",children:[(100*re.capRate).toFixed(2),"%"]})]}),re.netOperatingIncome&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Net Operating Income"}),(0,z.jsx)(o.A,{variant:"h6",children:Be(re.netOperatingIncome)})]}),re.grossIncome&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Gross Income"}),(0,z.jsx)(o.A,{variant:"h6",children:Be(re.grossIncome)})]}),re.operatingExpenses&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Operating Expenses"}),(0,z.jsx)(o.A,{variant:"h6",children:Be(re.operatingExpenses)})]}),re.taxes&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Property Taxes"}),(0,z.jsx)(o.A,{variant:"h6",children:Be(re.taxes)})]}),re.propertyTaxes&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Annual Property Taxes"}),(0,z.jsx)(o.A,{variant:"h6",children:Be(re.propertyTaxes)})]}),re.hoaFees&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"HOA Fees"}),(0,z.jsx)(o.A,{variant:"h6",children:Be(re.hoaFees)})]}),re.leaseTermsDescription&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Lease Terms"}),(0,z.jsx)(o.A,{variant:"body1",children:re.leaseTermsDescription})]})]})]})}),(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{children:[(0,z.jsxs)(o.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[(0,z.jsx)(N.A,{sx:{mr:1}}),"Physical Details"]}),(0,z.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Total Square Footage"}),(0,z.jsx)(o.A,{variant:"body1",children:re.totalSquareFootage?re.totalSquareFootage.toLocaleString()+" sq ft":"\u2014"})]}),re.availableSquareFootage&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Available Sq Ft"}),(0,z.jsxs)(o.A,{variant:"body1",children:[re.availableSquareFootage.toLocaleString()," sq ft"]})]}),re.buildingClass&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Building Class"}),(0,z.jsxs)(o.A,{variant:"body1",children:["Class ",re.buildingClass]})]}),re.yearBuilt&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Year Built"}),(0,z.jsx)(o.A,{variant:"body1",children:re.yearBuilt})]}),re.renovationYear&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Renovation Year"}),(0,z.jsx)(o.A,{variant:"body1",children:re.renovationYear})]}),re.floors&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Floors"}),(0,z.jsx)(o.A,{variant:"body1",children:re.floors})]}),re.units&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Units"}),(0,z.jsx)(o.A,{variant:"body1",children:re.units})]}),re.numberOfUnits&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Number of Units"}),(0,z.jsx)(o.A,{variant:"body1",children:re.numberOfUnits})]}),re.parkingSpaces&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Parking Spaces"}),(0,z.jsx)(o.A,{variant:"body1",children:re.parkingSpaces})]}),re.parkingRatio&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Parking Ratio"}),(0,z.jsxs)(o.A,{variant:"body1",children:[re.parkingRatio," per 1,000 sq ft"]})]}),re.lotSize&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Lot Size"}),(0,z.jsxs)(o.A,{variant:"body1",children:[re.lotSize," ",re.lotSizeUnit||"sqft"]})]}),re.ceilingHeight&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Ceiling Height"}),(0,z.jsxs)(o.A,{variant:"body1",children:[re.ceilingHeight," ft"]})]}),re.clearHeight&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Clear Height"}),(0,z.jsxs)(o.A,{variant:"body1",children:[re.clearHeight," ft"]})]}),re.loadingDocks>0&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Loading Docks"}),(0,z.jsx)(o.A,{variant:"body1",children:re.loadingDocks})]}),re.driveInDoors>0&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Drive-In Doors"}),(0,z.jsx)(o.A,{variant:"body1",children:re.driveInDoors})]}),null!==re.occupancyPercentage&&void 0!==re.occupancyPercentage&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,md:4,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Occupancy"}),(0,z.jsxs)(o.A,{variant:"body1",children:[re.occupancyPercentage,"%"]})]})]})]})}),(re.ownerName||re.ownerEmail||re.ownerPhone||re.listingAgent||re.brokerage||re.coBrokerSplit)&&(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{children:[(0,z.jsxs)(o.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[(0,z.jsx)(M.A,{sx:{mr:1}}),"Contact Information"]}),(0,z.jsxs)(i.Ay,{container:!0,spacing:2,children:[re.ownerName&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Owner Name"}),(0,z.jsx)(o.A,{variant:"body1",children:re.ownerName})]}),re.ownerEmail&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Owner Email"}),(0,z.jsx)(o.A,{variant:"body1",children:re.ownerEmail})]}),re.ownerPhone&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Owner Phone"}),(0,z.jsx)(o.A,{variant:"body1",children:re.ownerPhone})]}),re.listingAgent&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Listing Agent"}),(0,z.jsx)(o.A,{variant:"body1",children:re.listingAgent})]}),re.brokerage&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Brokerage"}),(0,z.jsx)(o.A,{variant:"body1",children:re.brokerage})]}),null!==re.coBrokerSplit&&void 0!==re.coBrokerSplit&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Co-Broker Split"}),(0,z.jsxs)(o.A,{variant:"body1",children:[re.coBrokerSplit,"%"]})]})]})]})}),"sale"!==re.listingType&&(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{children:[(0,z.jsxs)(o.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[(0,z.jsx)(H,{sx:{mr:1}}),"Lease Information"]}),(0,z.jsxs)(i.Ay,{container:!0,spacing:2,children:[re.leaseType&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Lease Type"}),(0,z.jsx)(o.A,{variant:"body1",children:re.leaseType})]}),re.availabilityDate&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Availability Date"}),(0,z.jsx)(o.A,{variant:"body1",children:new Date(re.availabilityDate).toLocaleDateString()})]}),re.leaseTerms&&Object.keys(re.leaseTerms).length>0&&(0,z.jsxs)(z.Fragment,{children:[re.leaseTerms.minTerm&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Min Lease Term"}),(0,z.jsxs)(o.A,{variant:"body1",children:[re.leaseTerms.minTerm," months"]})]}),re.leaseTerms.maxTerm&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Max Lease Term"}),(0,z.jsxs)(o.A,{variant:"body1",children:[re.leaseTerms.maxTerm," months"]})]}),re.leaseTerms.renewalOptions&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Renewal Options"}),(0,z.jsx)(o.A,{variant:"body1",children:re.leaseTerms.renewalOptions})]}),re.leaseTerms.securityDeposit&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Security Deposit"}),(0,z.jsx)(o.A,{variant:"body1",children:re.leaseTerms.securityDeposit})]}),null!==re.leaseTerms.personalGuaranteeRequired&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Personal Guarantee"}),(0,z.jsx)(o.A,{variant:"body1",children:re.leaseTerms.personalGuaranteeRequired?"Required":"Not Required"})]})]})]})]})}),(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{children:[(0,z.jsxs)(o.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",fontWeight:600},children:[(0,z.jsx)(B.A,{sx:{mr:1}}),"Marketing"]}),(0,z.jsxs)(i.Ay,{container:!0,spacing:2,sx:{mb:2},children:[Oe("Marketing Status",re.marketingStatus?re.marketingStatus.charAt(0).toUpperCase()+re.marketingStatus.slice(1):null),Oe("Listing Agent",re.listingAgent?"string"===typeof re.listingAgent?re.listingAgent:"".concat(re.listingAgent.firstName||""," ").concat(re.listingAgent.lastName||"").trim():null),Oe("Brokerage",re.brokerage),Oe("Co-Broker Split",re.coBrokerSplit?"".concat(re.coBrokerSplit,"%"):null)]}),re.description&&(0,z.jsxs)(l.A,{sx:{mb:2},children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Description"}),(0,z.jsx)(o.A,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:re.description})]}),re.marketingRemarks&&(0,z.jsxs)(l.A,{sx:{mb:2},children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Marketing Remarks"}),(0,z.jsx)(o.A,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:re.marketingRemarks})]}),re.highlights&&(0,z.jsxs)(l.A,{sx:{mb:2},children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Highlights"}),(0,z.jsx)(o.A,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:re.highlights})]}),re.keyHighlights&&re.keyHighlights.length>0&&(0,z.jsxs)(l.A,{sx:{mb:2},children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Key Highlights"}),(0,z.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:re.keyHighlights.map((e,r)=>(0,z.jsx)(m.A,{label:e,variant:"outlined"},r))})]}),re.keyFeatures&&re.keyFeatures.length>0&&(0,z.jsxs)(l.A,{sx:{mb:2},children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Key Features"}),(0,z.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:re.keyFeatures.map((e,r)=>(0,z.jsx)(m.A,{label:e,color:"primary",variant:"outlined"},r))})]}),re.amenities&&re.amenities.length>0&&(0,z.jsxs)(l.A,{children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Amenities"}),(0,z.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:re.amenities.map((e,r)=>(0,z.jsx)(m.A,{label:e,variant:"outlined"},r))})]})]})})]}),(0,z.jsxs)(i.Ay,{item:!0,xs:12,md:4,children:[(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{children:[(0,z.jsxs)(o.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[(0,z.jsx)(U.A,{sx:{mr:1}}),"Location Details"]}),(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:re.address}),(0,z.jsxs)(o.A,{variant:"body2",sx:{mb:2},children:[re.city,", ",re.state," ",re.zipCode]}),re.county&&(0,z.jsxs)(o.A,{variant:"body2",sx:{mb:1},children:[(0,z.jsx)("strong",{children:"County:"})," ",re.county]}),re.zoning&&(0,z.jsxs)(o.A,{variant:"body2",sx:{mb:1},children:[(0,z.jsx)("strong",{children:"Zoning:"})," ",re.zoning]}),re.latitude&&re.longitude&&(0,z.jsxs)(o.A,{variant:"body2",sx:{mb:1},children:[(0,z.jsx)("strong",{children:"Coordinates:"})," ",re.latitude,", ",re.longitude]})]})}),(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{children:[(0,z.jsxs)(o.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[(0,z.jsx)(B.A,{sx:{mr:1}}),"Listing Agent"]}),re.listingAgent?(0,z.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,z.jsx)(u.A,{sx:{mr:2},children:(null===(e=re.listingAgent.firstName)||void 0===e?void 0:e[0])||"U"}),(0,z.jsxs)(l.A,{children:[(0,z.jsxs)(o.A,{variant:"subtitle2",children:[re.listingAgent.firstName," ",re.listingAgent.lastName]}),(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:re.listingAgent.email}),re.listingAgent.phone&&(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:re.listingAgent.phone})]})]}):(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"No listing agent assigned"})]})}),re.owner&&(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{children:[(0,z.jsx)(o.A,{variant:"h6",sx:{mb:2},children:"Owner Information"}),(0,z.jsxs)(o.A,{variant:"subtitle2",children:[re.owner.firstName," ",re.owner.lastName]}),re.owner.companyName&&(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:re.owner.companyName}),re.owner.primaryEmail&&(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:re.owner.primaryEmail}),re.owner.primaryPhone&&(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:re.owner.primaryPhone})]})}),(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{children:[(0,z.jsxs)(o.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center"},children:[(0,z.jsx)(O.A,{sx:{mr:1}}),"Marketing Info"]}),(0,z.jsxs)(A.A,{dense:!0,children:[(0,z.jsx)(g.Ay,{children:(0,z.jsx)(j.A,{primary:"Marketing Status",secondary:(0,z.jsx)(m.A,{label:(null===(r=re.marketingStatus)||void 0===r?void 0:r.replace("_"," "))||"\u2014",size:"small",color:"published"===re.marketingStatus?"success":"default"})})}),(0,z.jsx)(g.Ay,{children:(0,z.jsx)(j.A,{primary:"Days on Market",secondary:null!==(t=re.daysOnMarket)&&void 0!==t?t:"\u2014"})}),null!==re.views&&void 0!==re.views&&(0,z.jsx)(g.Ay,{children:(0,z.jsx)(j.A,{primary:"Views",secondary:re.views})}),null!==re.inquiries&&void 0!==re.inquiries&&(0,z.jsx)(g.Ay,{children:(0,z.jsx)(j.A,{primary:"Inquiries",secondary:re.inquiries})}),null!==re.showings&&void 0!==re.showings&&(0,z.jsx)(g.Ay,{children:(0,z.jsx)(j.A,{primary:"Showings",secondary:re.showings})})]}),re.keyHighlights&&re.keyHighlights.length>0&&(0,z.jsxs)(l.A,{sx:{mt:2},children:[(0,z.jsx)(o.A,{variant:"subtitle2",sx:{mb:1},children:"Key Highlights"}),(0,z.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:re.keyHighlights.map((e,r)=>(0,z.jsx)(m.A,{label:e,variant:"filled",color:"primary",size:"small"},r))})]})]})}),(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{children:[(0,z.jsxs)(o.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",fontWeight:600},children:[(0,z.jsx)(_.A,{sx:{mr:1}}),"Transaction"]}),(0,z.jsxs)(i.Ay,{container:!0,spacing:2,children:[re.transactionStatus&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Transaction Status"}),(0,z.jsx)(m.A,{label:(null===(W=re.transactionStatus)||void 0===W?void 0:W.replace("_"," "))||"\u2014",color:(Ge=re.transactionStatus,{active:"success",under_contract:"warning",closed:"info",cancelled:"error"}[Ge]||"default"),variant:"filled",sx:{mt:.5}})]}),re.dateSoldLeased&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Date Sold/Leased"}),(0,z.jsx)(o.A,{variant:"body1",children:Ue(re.dateSoldLeased)})]}),re.finalSalePrice&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Final Sale Price"}),(0,z.jsx)(o.A,{variant:"h6",color:"success.main",children:Be(re.finalSalePrice)})]}),re.finalLeaseRate&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Final Lease Rate"}),(0,z.jsx)(o.A,{variant:"h6",color:"success.main",children:Be(re.finalLeaseRate)})]}),re.buyerTenantName&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,sm:6,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Buyer/Tenant Name"}),(0,z.jsx)(o.A,{variant:"body1",children:re.buyerTenantName})]}),re.transactionNotes&&(0,z.jsx)(i.Ay,{item:!0,xs:12,children:(0,z.jsxs)(x.A,{variant:"outlined",sx:{p:2,bgcolor:"grey.50"},children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Transaction Notes"}),(0,z.jsx)(o.A,{variant:"body1",sx:{whiteSpace:"pre-wrap"},children:re.transactionNotes})]})})]})]})}),(0,z.jsx)(y.A,{sx:{mb:3},children:(0,z.jsxs)(p.A,{children:[(0,z.jsxs)(o.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",fontWeight:600},children:[(0,z.jsx)(V,{sx:{mr:1}}),"Documents"]}),(0,z.jsxs)(i.Ay,{container:!0,spacing:2,children:[re.documents&&re.documents.length>0&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Uploaded Documents"}),(0,z.jsx)(A.A,{children:re.documents.map((e,r)=>(0,z.jsx)(g.Ay,{sx:{px:0},children:(0,z.jsx)(j.A,{primary:e.name||e.filename||"Document ".concat(r+1),secondary:e.url?(0,z.jsx)(d.A,{size:"small",href:e.url,target:"_blank",startIcon:(0,z.jsx)(G,{}),children:"View Document"}):null})},r))})]}),re.floorPlans&&re.floorPlans.length>0&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Floor Plans"}),(0,z.jsx)(be,{images:re.floorPlans,maxImages:6,showFullGalleryButton:!0})]}),re.sitePlans&&re.sitePlans.length>0&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Site Plans"}),(0,z.jsx)(be,{images:re.sitePlans,maxImages:6,showFullGalleryButton:!0})]}),(re.virtualTourUrl||re.offeringMemorandum||re.brochure)&&(0,z.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Additional Resources"}),(0,z.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[re.virtualTourUrl&&(0,z.jsx)(d.A,{variant:"outlined",fullWidth:!0,href:re.virtualTourUrl,target:"_blank",startIcon:(0,z.jsx)(Y.A,{}),children:"View Virtual Tour"}),re.offeringMemorandum&&(0,z.jsx)(d.A,{variant:"outlined",fullWidth:!0,href:re.offeringMemorandum,target:"_blank",startIcon:(0,z.jsx)(G,{}),children:"Download Offering Memorandum"}),re.brochure&&(0,z.jsx)(d.A,{variant:"outlined",fullWidth:!0,href:re.brochure,target:"_blank",startIcon:(0,z.jsx)(G,{}),children:"Download Brochure"})]})]}),(!re.documents||0===re.documents.length)&&(!re.floorPlans||0===re.floorPlans.length)&&(!re.sitePlans||0===re.sitePlans.length)&&!re.virtualTourUrl&&!re.offeringMemorandum&&!re.brochure&&(0,z.jsx)(i.Ay,{item:!0,xs:12,children:(0,z.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"No documents uploaded"})})]})]})})]})]}),!1,!1,(0,z.jsxs)(b.A,{open:fe,onClose:_e,maxWidth:"md",fullWidth:!0,children:[(0,z.jsx)(v.A,{children:Ce?"Edit Lease":"Add New Lease"}),(0,z.jsx)(f.A,{children:(0,z.jsxs)(i.Ay,{container:!0,spacing:2,sx:{mt:1},children:[(0,z.jsx)(i.Ay,{item:!0,xs:12,children:(0,z.jsxs)(w.A,{fullWidth:!0,required:!0,children:[(0,z.jsx)(S.A,{children:"Tenant"}),(0,z.jsx)(I.A,{value:Le.tenantId,onChange:e=>Te((0,a.A)((0,a.A)({},Le),{},{tenantId:e.target.value})),label:"Tenant",children:me.map(e=>(0,z.jsxs)(C.A,{value:e.id,children:[e.firstName," ",e.lastName,e.companyName&&" (".concat(e.companyName,")")]},e.id))})]})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsx)(k.A,{fullWidth:!0,required:!0,label:"Start Date",type:"date",value:Le.startDate,onChange:e=>Te((0,a.A)((0,a.A)({},Le),{},{startDate:e.target.value})),InputLabelProps:{shrink:!0}})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsx)(k.A,{fullWidth:!0,required:!0,label:"End Date",type:"date",value:Le.endDate,onChange:e=>Te((0,a.A)((0,a.A)({},Le),{},{endDate:e.target.value})),InputLabelProps:{shrink:!0}})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsx)(k.A,{fullWidth:!0,required:!0,label:"Monthly Rent",type:"number",value:Le.monthlyRent,onChange:e=>Te((0,a.A)((0,a.A)({},Le),{},{monthlyRent:e.target.value})),InputProps:{startAdornment:(0,z.jsx)(P.A,{position:"start",children:"$"})}})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsx)(k.A,{fullWidth:!0,label:"Square Feet",type:"number",value:Le.squareFeet,onChange:e=>Te((0,a.A)((0,a.A)({},Le),{},{squareFeet:e.target.value}))})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,children:(0,z.jsxs)(w.A,{fullWidth:!0,children:[(0,z.jsx)(S.A,{children:"Status"}),(0,z.jsxs)(I.A,{value:Le.status,onChange:e=>Te((0,a.A)((0,a.A)({},Le),{},{status:e.target.value})),label:"Status",children:[(0,z.jsx)(C.A,{value:"pending",children:"Pending"}),(0,z.jsx)(C.A,{value:"active",children:"Active"}),(0,z.jsx)(C.A,{value:"expired",children:"Expired"}),(0,z.jsx)(C.A,{value:"terminated",children:"Terminated"})]})]})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,children:(0,z.jsx)(k.A,{fullWidth:!0,multiline:!0,rows:3,label:"Terms",value:Le.terms,onChange:e=>Te((0,a.A)((0,a.A)({},Le),{},{terms:e.target.value}))})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,children:(0,z.jsx)(k.A,{fullWidth:!0,multiline:!0,rows:2,label:"Options",value:Le.options,onChange:e=>Te((0,a.A)((0,a.A)({},Le),{},{options:e.target.value}))})})]})}),(0,z.jsxs)(D.A,{children:[(0,z.jsx)(d.A,{onClick:_e,children:"Cancel"}),(0,z.jsx)(d.A,{onClick:async()=>{const e=(()=>{const e=[];if(Le.tenantId||e.push("Tenant is required"),Le.startDate||e.push("Start date is required"),Le.endDate||e.push("End date is required"),Le.endDate&&Le.startDate){const r=new Date(Le.startDate);new Date(Le.endDate)<=r&&e.push("End date must be after start date")}const r=parseFloat(Le.monthlyRent);(!Le.monthlyRent||!Number.isFinite(r)||r<=0)&&e.push("Monthly rent must be a valid positive number");const t=parseFloat(Le.squareFeet);return Le.squareFeet&&(!Number.isFinite(t)||t<=0)&&e.push("Square feet must be a valid positive number"),e})();if(e.length>0)Fe({open:!0,message:e.join(". "),severity:"error"});else try{const e=(0,a.A)((0,a.A)({},Le),{},{propertyId:Q,monthlyRent:parseFloat(Le.monthlyRent),squareFeet:Le.squareFeet?parseInt(Le.squareFeet):null});Ce?(await Z.j.updateLease(Ce.id,e),Fe({open:!0,message:"Lease updated successfully",severity:"success"})):(await Z.j.createLease(e),Fe({open:!0,message:"Lease created successfully",severity:"success"})),_e(),Ne()}catch(ne){var r,t;Fe({open:!0,message:(null===(r=ne.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.error)||"Error saving lease",severity:"error"})}},variant:"contained",color:"primary",children:Ce?"Update":"Create"})]})]}),(0,z.jsxs)(b.A,{open:Se,onClose:Ve,maxWidth:"md",fullWidth:!0,children:[(0,z.jsx)(v.A,{children:Pe?"Edit Debt":"Add New Debt"}),(0,z.jsx)(f.A,{children:(0,z.jsxs)(i.Ay,{container:!0,spacing:2,sx:{mt:1},children:[(0,z.jsx)(i.Ay,{item:!0,xs:12,children:(0,z.jsxs)(w.A,{fullWidth:!0,required:!0,children:[(0,z.jsx)(S.A,{children:"Lender"}),(0,z.jsx)(I.A,{value:Ee.lenderId,onChange:e=>qe((0,a.A)((0,a.A)({},Ee),{},{lenderId:e.target.value})),label:"Lender",children:pe.map(e=>(0,z.jsx)(C.A,{value:e.id,children:e.name},e.id))})]})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsx)(k.A,{fullWidth:!0,required:!0,label:"Amount",type:"number",value:Ee.amount,onChange:e=>qe((0,a.A)((0,a.A)({},Ee),{},{amount:e.target.value})),InputProps:{startAdornment:(0,z.jsx)(P.A,{position:"start",children:"$"})}})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsx)(k.A,{fullWidth:!0,required:!0,label:"Interest Rate",type:"number",value:Ee.interestRate,onChange:e=>qe((0,a.A)((0,a.A)({},Ee),{},{interestRate:e.target.value})),InputProps:{endAdornment:(0,z.jsx)(P.A,{position:"end",children:"%"})}})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsx)(k.A,{fullWidth:!0,required:!0,label:"Maturity Date",type:"date",value:Ee.maturityDate,onChange:e=>qe((0,a.A)((0,a.A)({},Ee),{},{maturityDate:e.target.value})),InputLabelProps:{shrink:!0}})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,sm:6,children:(0,z.jsx)(k.A,{fullWidth:!0,label:"DSCR",type:"number",value:Ee.dscr,onChange:e=>qe((0,a.A)((0,a.A)({},Ee),{},{dscr:e.target.value})),helperText:"Debt Service Coverage Ratio"})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,children:(0,z.jsxs)(w.A,{fullWidth:!0,required:!0,children:[(0,z.jsx)(S.A,{children:"Loan Type"}),(0,z.jsxs)(I.A,{value:Ee.loanType,onChange:e=>qe((0,a.A)((0,a.A)({},Ee),{},{loanType:e.target.value})),label:"Loan Type",children:[(0,z.jsx)(C.A,{value:"mortgage",children:"Mortgage"}),(0,z.jsx)(C.A,{value:"bridge",children:"Bridge"}),(0,z.jsx)(C.A,{value:"mezzanine",children:"Mezzanine"}),(0,z.jsx)(C.A,{value:"construction",children:"Construction"}),(0,z.jsx)(C.A,{value:"other",children:"Other"})]})]})}),(0,z.jsx)(i.Ay,{item:!0,xs:12,children:(0,z.jsx)(k.A,{fullWidth:!0,multiline:!0,rows:3,label:"Notes",value:Ee.notes,onChange:e=>qe((0,a.A)((0,a.A)({},Ee),{},{notes:e.target.value}))})})]})}),(0,z.jsxs)(D.A,{children:[(0,z.jsx)(d.A,{onClick:Ve,children:"Cancel"}),(0,z.jsx)(d.A,{onClick:async()=>{const e=(()=>{const e=[];Ee.lenderId||e.push("Lender is required");const r=parseFloat(Ee.amount);(!Ee.amount||!Number.isFinite(r)||r<=0)&&e.push("Amount must be a valid positive number");const t=parseFloat(Ee.interestRate);(!Ee.interestRate||!Number.isFinite(t)||t<0||t>100)&&e.push("Interest rate must be a valid number between 0 and 100"),Ee.maturityDate||e.push("Maturity date is required"),Ee.loanType||e.push("Loan type is required");const a=parseFloat(Ee.dscr);return Ee.dscr&&(!Number.isFinite(a)||a<=0)&&e.push("DSCR must be a valid positive number"),e})();if(e.length>0)Fe({open:!0,message:e.join(". "),severity:"error"});else try{const e=(0,a.A)((0,a.A)({},Ee),{},{propertyId:Q,amount:parseFloat(Ee.amount),interestRate:parseFloat(Ee.interestRate),dscr:Ee.dscr?parseFloat(Ee.dscr):null});Pe?(await $.m.updateDebt(Pe.id,e),Fe({open:!0,message:"Debt updated successfully",severity:"success"})):(await $.m.createDebt(e),Fe({open:!0,message:"Debt created successfully",severity:"success"})),Ve(),Me()}catch(ne){var r,t;Fe({open:!0,message:(null===(r=ne.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.error)||"Error saving debt",severity:"error"})}},variant:"contained",color:"primary",children:Pe?"Update":"Create"})]})]}),(0,z.jsx)(R.A,{open:Re.open,autoHideDuration:6e3,onClose:()=>Fe((0,a.A)((0,a.A)({},Re),{},{open:!1})),anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,z.jsx)(h.A,{onClose:()=>Fe((0,a.A)((0,a.A)({},Re),{},{open:!1})),severity:Re.severity,sx:{width:"100%"},children:Re.message})})]});var Ge}}}]);
//# sourceMappingURL=2083.49b28e85.chunk.js.map