"use strict";(self.webpackChunkcre_crm_client=self.webpackChunkcre_crm_client||[]).push([[1893],{2081:(e,s,t)=>{t.d(s,{A:()=>l});var n=t(66734),a=t(70579);const l=(0,n.A)((0,a.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew")},2780:(e,s,t)=>{t.d(s,{A:()=>l});var n=t(66734),a=t(70579);const l=(0,n.A)((0,a.jsx)("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27M12 17.5 6.5 12H10v-2h4v2h3.5zM5.12 5l.81-1h12l.94 1z"}),"Archive")},23851:(e,s,t)=>{t.d(s,{A:()=>p});var n=t(98587),a=t(58168),l=t(65043),r=t(58387),i=t(98610),c=t(51347),o=t(34535),d=t(98206),x=t(92532),h=t(72372);function u(e){return(0,h.Ay)("MuiListItemAvatar",e)}(0,x.A)("MuiListItemAvatar",["root","alignItemsFlexStart"]);var m=t(70579);const j=["className"],A=(0,o.Ay)("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:t}=e;return[s.root,"flex-start"===t.alignItems&&s.alignItemsFlexStart]}})(e=>{let{ownerState:s}=e;return(0,a.A)({minWidth:56,flexShrink:0},"flex-start"===s.alignItems&&{marginTop:8})}),p=l.forwardRef(function(e,s){const t=(0,d.b)({props:e,name:"MuiListItemAvatar"}),{className:o}=t,x=(0,n.A)(t,j),h=l.useContext(c.A),p=(0,a.A)({},t,{alignItems:h.alignItems}),y=(e=>{const{alignItems:s,classes:t}=e,n={root:["root","flex-start"===s&&"alignItemsFlexStart"]};return(0,i.A)(n,u,t)})(p);return(0,m.jsx)(A,(0,a.A)({className:(0,r.A)(y.root,o),ownerState:p,ref:s},x))})},31893:(e,s,t)=>{t.r(s),t.d(s,{default:()=>_e});var n=t(65043),a=t(96446),l=t(85865),r=t(11906),i=t(68903),c=t(12110),o=t(26494),d=t(81045),x=t(43845),h=t(17392),u=t(81637),m=t(67254),j=t(63336),A=t(67784),p=t(51787),y=t(32143),g=t(29013),v=t(24056),b=t(72437),f=t(2050),C=t(48734),S=t(48262),w=t(69974),I=t(66734),T=t(70579);const k=(0,I.A)((0,T.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M9 11H7V9h2zm4 0h-2V9h2zm4 0h-2V9h2z"}),"Sms"),M=(0,I.A)((0,T.jsx)("path",{d:"M16.75 13.96c.25.13.41.2.46.3.06.11.04.61-.21 1.18-.2.56-1.24 1.1-1.7 1.12-.46.02-.47.36-2.96-.73-2.49-1.09-3.99-3.75-4.11-3.92-.12-.17-.96-1.38-.92-2.61.05-1.22.69-1.8.95-2.04.24-.26.51-.29.68-.26h.47c.15 0 .36-.06.55.45l.69 1.87c.06.13.1.28.01.44l-.27.41-.39.42c-.12.12-.26.25-.12.5.12.26.62 1.09 1.32 1.78.91.88 1.71 1.17 1.95 1.3.24.14.39.12.54-.04l.81-.94c.19-.25.35-.19.58-.11l1.67.88M12 2a10 10 0 0 1 10 10 10 10 0 0 1-10 10c-1.97 0-3.8-.57-5.35-1.55L2 22l1.55-4.65A9.969 9.969 0 0 1 2 12 10 10 0 0 1 12 2m0 2a8 8 0 0 0-8 8c0 1.72.54 3.31 1.46 4.61L4.5 19.5l2.89-.96A7.95 7.95 0 0 0 12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8z"}),"WhatsApp");var W=t(80889),E=t(98606);const z=(0,I.A)((0,T.jsx)("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11"}),"Reply");var P=t(17548),D=t(69131),L=t(70141),H=t(58558);const F=(0,I.A)((0,T.jsx)("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99"}),"Call");var N=t(42796),O=t(79484),R=t(34190),V=t(35721),_=t(24628),B=t(23851),U=t(39336),q=t(47805),K=t(41209);const G=(0,I.A)((0,T.jsx)("path",{d:"M12 8V4l8 8-8 8v-4H4V8z"}),"Forward"),J=(0,I.A)((0,T.jsx)("path",{d:"M18.83 7h-2.6L10.5 4 4 7.4V17c-1.1 0-2-.9-2-2V7.17c0-.53.32-1.09.8-1.34L10.5 2l7.54 3.83c.43.23.73.7.79 1.17M20 8H7c-1.1 0-2 .9-2 2v9c0 1.1.9 2 2 2h13c1.1 0 2-.9 2-2v-9c0-1.1-.9-2-2-2m0 3.67L13.5 15 7 11.67V10l6.5 3.33L20 10z"}),"MarkAsUnread");var Q=t(2780),Y=t(51387),Z=t(89379);const $={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:3001/api";const X=new class{async getCommunications(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),s=await fetch("".concat($,"/communications?").concat(e));if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return s.json()}async getCommunication(e){const s=await fetch("".concat($,"/communications/").concat(e));if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return s.json()}async createCommunication(e){const s=await fetch("".concat($,"/communications"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return s.json()}async updateCommunication(e,s){const t=await fetch("".concat($,"/communications/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));return t.json()}async deleteCommunication(e){const s=await fetch("".concat($,"/communications/").concat(e),{method:"DELETE"});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return s.json()}async getEmailTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const s=e?"?category=".concat(e):"",t=await fetch("".concat($,"/communications/templates/email").concat(s));if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));return t.json()}async createEmailTemplate(e){const s=await fetch("".concat($,"/communications/templates/email"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return s.json()}async getSmsTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const s=e?"?category=".concat(e):"",t=await fetch("".concat($,"/communications/templates/sms").concat(s));if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));return t.json()}async sendEmail(e){const s=await fetch("".concat($,"/communications/send/email"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return s.json()}async sendSms(e){const s=await fetch("".concat($,"/communications/send/sms"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return s.json()}async sendWhatsApp(e){const s=await fetch("".concat($,"/communications/send/whatsapp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return s.json()}async getCommunicationAnalytics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"7d";const s=await fetch("".concat($,"/communications/analytics/overview?timeframe=").concat(e));if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));return s.json()}async getCommunicationsByContact(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getCommunications((0,Z.A)({contactId:e},s))}async getCommunicationsByType(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getCommunications((0,Z.A)({type:e},s))}async getRecentCommunications(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return this.getCommunications({limit:e,offset:0})}},ee=e=>{let{communications:s,onRefresh:t}=e;const[i,c]=(0,n.useState)(""),[o,u]=(0,n.useState)("all"),[m,g]=(0,n.useState)(null),[v,I]=(0,n.useState)(null),W=(0,n.useMemo)(()=>{const e={};return s.forEach(s=>{const t=new Date(s.timestamp).toDateString();e[t]||(e[t]=[]),e[t].push(s)}),Object.keys(e).forEach(s=>{e[s].sort((e,s)=>new Date(s.timestamp)-new Date(e.timestamp))}),e},[s]),E=((0,n.useMemo)(()=>s.filter(e=>{const s=!i||e.subject.toLowerCase().includes(i.toLowerCase())||e.content.toLowerCase().includes(i.toLowerCase()),t="all"===o||e.type===o;return s&&t}),[s,i,o]),e=>{switch(e){case"email":default:return(0,T.jsx)(S.A,{});case"call":return(0,T.jsx)(w.A,{});case"sms":return(0,T.jsx)(k,{});case"whatsapp":return(0,T.jsx)(M,{})}}),P=(e,s)=>{if("inbound"===s)switch(e){case"email":case"whatsapp":return"success";case"call":return"info";case"sms":return"warning";default:return"primary"}else switch(e){case"email":default:return"primary";case"call":return"info";case"sms":return"warning";case"whatsapp":return"success"}},D=e=>{switch(e){case"sent":case"replied":return"success";case"delivered":return"info";case"read":return"primary";case"failed":return"error";case"pending":return"warning";default:return"default"}},L=e=>{const s=new Date(e),t=new Date,n=new Date(t);return n.setDate(n.getDate()-1),s.toDateString()===t.toDateString()?"Today":s.toDateString()===n.toDateString()?"Yesterday":s.toLocaleDateString()},N=()=>{I(null),g(null)},R=async e=>{if(m)try{switch(e){case"reply":case"forward":default:break;case"archive":await X.updateCommunication(m.id,{status:"archived"}),t();break;case"delete":await X.deleteCommunication(m.id),t();break;case"mark_unread":await X.updateCommunication(m.id,{status:"unread"}),t()}}catch(s){console.error("Error performing action:",s)}finally{N()}},Z={total:s.length,email:s.filter(e=>"email"===e.type).length,call:s.filter(e=>"call"===e.type).length,sms:s.filter(e=>"sms"===e.type).length,whatsapp:s.filter(e=>"whatsapp"===e.type).length,inbound:s.filter(e=>"inbound"===e.direction).length,outbound:s.filter(e=>"outbound"===e.direction).length};return(0,T.jsxs)(a.A,{children:[(0,T.jsxs)(j.A,{elevation:1,sx:{p:2,mb:3},children:[(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,T.jsx)(l.A,{variant:"h6",children:"Communication Timeline"}),(0,T.jsx)(r.A,{variant:"outlined",startIcon:(0,T.jsx)(q.A,{}),onClick:t,size:"small",children:"Refresh"})]}),(0,T.jsxs)(a.A,{sx:{display:"flex",gap:2,mb:2,flexWrap:"wrap"},children:[(0,T.jsx)(x.A,{icon:(0,T.jsx)(S.A,{}),label:"".concat(Z.email," Emails"),color:"primary",variant:"outlined"}),(0,T.jsx)(x.A,{icon:(0,T.jsx)(w.A,{}),label:"".concat(Z.call," Calls"),color:"info",variant:"outlined"}),(0,T.jsx)(x.A,{icon:(0,T.jsx)(k,{}),label:"".concat(Z.sms," SMS"),color:"warning",variant:"outlined"}),(0,T.jsx)(x.A,{icon:(0,T.jsx)(M,{}),label:"".concat(Z.whatsapp," WhatsApp"),color:"success",variant:"outlined"})]}),(0,T.jsxs)(a.A,{sx:{display:"flex",gap:2,alignItems:"center"},children:[(0,T.jsx)(A.A,{placeholder:"Search communications...",value:i,onChange:e=>c(e.target.value),size:"small",InputProps:{startAdornment:(0,T.jsx)(p.A,{position:"start",children:(0,T.jsx)(O.A,{})})},sx:{flexGrow:1}}),(0,T.jsxs)(A.A,{select:!0,label:"Type",value:o,onChange:e=>u(e.target.value),size:"small",sx:{minWidth:120},children:[(0,T.jsx)(y.A,{value:"all",children:"All Types"}),(0,T.jsx)(y.A,{value:"email",children:"Email"}),(0,T.jsx)(y.A,{value:"call",children:"Call"}),(0,T.jsx)(y.A,{value:"sms",children:"SMS"}),(0,T.jsx)(y.A,{value:"whatsapp",children:"WhatsApp"})]})]})]}),(0,T.jsx)(V.A,{children:Object.entries(W).sort((e,s)=>{let[t]=e,[n]=s;return new Date(n)-new Date(t)}).map(e=>{let[s,t]=e;return(0,T.jsxs)(n.Fragment,{children:[(0,T.jsxs)(_.Ay,{children:[(0,T.jsx)(B.A,{children:(0,T.jsx)(d.A,{sx:{bgcolor:"primary.main"},children:(0,T.jsx)(K.A,{})})}),(0,T.jsx)(C.A,{primary:(0,T.jsx)(l.A,{variant:"h6",children:L(t[0].timestamp)}),secondary:(0,T.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:[t.length," communication",1!==t.length?"s":""]})})]}),t.map(e=>{return(0,T.jsxs)(_.Ay,{sx:{pl:4},children:[(0,T.jsx)(B.A,{children:(0,T.jsx)(d.A,{sx:{bgcolor:"success"===P(e.type,e.direction)?"success.main":"info"===P(e.type,e.direction)?"info.main":"warning"===P(e.type,e.direction)?"warning.main":"primary.main"},children:E(e.type)})}),(0,T.jsx)(C.A,{primary:(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,T.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:e.subject}),(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,T.jsx)(x.A,{label:e.status,color:D(e.status),size:"small"}),(0,T.jsx)(h.A,{size:"small",onClick:s=>{return t=e,I(s.currentTarget),void g(t);var t},children:(0,T.jsx)(H.A,{})})]})]}),secondary:(0,T.jsxs)(a.A,{children:[(0,T.jsxs)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["inbound"===e.direction?"From":"To"," Contact \u2022 ",(s=e.timestamp,new Date(s).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))]}),(0,T.jsx)(l.A,{variant:"body2",sx:{mb:1},children:e.content.length>200?"".concat(e.content.substring(0,200),"..."):e.content}),e.metadata&&(0,T.jsxs)(a.A,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:[e.metadata.opened&&(0,T.jsx)(x.A,{label:"Opened",size:"small",color:"info"}),e.metadata.clicked&&(0,T.jsx)(x.A,{label:"Clicked",size:"small",color:"success"}),e.metadata.replied&&(0,T.jsx)(x.A,{label:"Replied",size:"small",color:"success"}),e.metadata.duration&&(0,T.jsx)(x.A,{label:"".concat(e.metadata.duration," min"),size:"small",color:"info"}),e.metadata.recordingUrl&&(0,T.jsx)(x.A,{icon:(0,T.jsx)(F,{}),label:"Recording",size:"small",color:"primary",clickable:!0})]})]})})]},e.id);var s}),(0,T.jsx)(U.A,{sx:{my:2}})]},s)})}),(0,T.jsxs)(b.A,{anchorEl:v,open:Boolean(v),onClose:N,children:[(0,T.jsxs)(y.A,{onClick:()=>R("reply"),children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(z,{})}),(0,T.jsx)(C.A,{children:"Reply"})]}),(0,T.jsxs)(y.A,{onClick:()=>R("forward"),children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(G,{})}),(0,T.jsx)(C.A,{children:"Forward"})]}),(0,T.jsxs)(y.A,{onClick:()=>R("mark_unread"),children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(J,{})}),(0,T.jsx)(C.A,{children:"Mark as Unread"})]}),(0,T.jsxs)(y.A,{onClick:()=>R("archive"),children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(Q.A,{})}),(0,T.jsx)(C.A,{children:"Archive"})]}),(0,T.jsx)(U.A,{}),(0,T.jsxs)(y.A,{onClick:()=>R("delete"),sx:{color:"error.main"},children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(Y.A,{color:"error"})}),(0,T.jsx)(C.A,{children:"Delete"})]})]})]})};var se=t(83462),te=t(26600),ne=t(35316),ae=t(53193),le=t(18356),re=t(72221),ie=t(29347),ce=t(33438);const oe=(0,I.A)((0,T.jsx)("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6z"}),"AttachFile");var de=t(37141);const xe=(0,I.A)((0,T.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Preview");var he=t(95874);const ue=e=>{let{open:s,onClose:t,onSend:d,contactId:j=null}=e;const[p,g]=(0,n.useState)({to:"",cc:"",bcc:"",subject:"",content:"",templateId:"",contactId:j||""}),[v,b]=(0,n.useState)([]),[f,C]=(0,n.useState)(!1),[w,I]=(0,n.useState)(!1),[k,M]=(0,n.useState)(null),[W,E]=(0,n.useState)(null),[z,P]=(0,n.useState)(!1),[D,L]=(0,n.useState)([]),[H,F]=(0,n.useState)({});(0,n.useEffect)(()=>{s&&N()},[s]);const N=async()=>{try{const e=await X.getEmailTemplates();b(e.data)}catch(k){console.error("Error loading templates:",k)}},O=(e,s)=>{g(t=>(0,Z.A)((0,Z.A)({},t),{},{[e]:s}))},R=(e,s)=>{let t=e;return Object.entries(s).forEach(e=>{let[s,n]=e;const a=new RegExp("{{".concat(s,"}}"),"g");t=t.replace(a,n||"{{".concat(s,"}}"))}),t},V=()=>{g({to:"",cc:"",bcc:"",subject:"",content:"",templateId:"",contactId:j||""}),F({}),L([]),M(null),E(null),P(!1)},_=()=>{V(),t()};return(0,T.jsxs)(se.A,{open:s,onClose:_,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"90vh"}},children:[(0,T.jsx)(te.A,{children:(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,T.jsx)(S.A,{color:"primary"}),(0,T.jsx)(l.A,{variant:"h6",children:"Compose Email"})]}),(0,T.jsx)(h.A,{onClick:_,children:(0,T.jsx)(ce.A,{})})]})}),(0,T.jsxs)(ne.A,{dividers:!0,children:[k&&(0,T.jsx)(m.A,{severity:"error",sx:{mb:2},onClose:()=>M(null),children:k}),W&&(0,T.jsx)(m.A,{severity:"success",sx:{mb:2},onClose:()=>E(null),children:W}),(0,T.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsxs)(ae.A,{fullWidth:!0,children:[(0,T.jsx)(le.A,{children:"Email Template"}),(0,T.jsxs)(re.A,{value:p.templateId,onChange:e=>(e=>{const s=v.find(s=>s.id===e);if(s){g(t=>(0,Z.A)((0,Z.A)({},t),{},{templateId:e,subject:s.subject,content:s.content}));const t={};s.variables.forEach(e=>{t[e]=""}),F(t)}})(e.target.value),label:"Email Template",children:[(0,T.jsx)(y.A,{value:"",children:(0,T.jsx)("em",{children:"No Template"})}),v.map(e=>(0,T.jsx)(y.A,{value:e.id,children:(0,T.jsxs)(a.A,{children:[(0,T.jsx)(l.A,{variant:"body1",children:e.name}),(0,T.jsx)(l.A,{variant:"caption",color:"text.secondary",children:e.category})]})},e.id))]})]})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"To *",value:p.to,onChange:e=>O("to",e.target.value),placeholder:"recipient@example.com",required:!0})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Contact ID",value:p.contactId,onChange:e=>O("contactId",e.target.value),placeholder:"contact_123"})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"CC",value:p.cc,onChange:e=>O("cc",e.target.value),placeholder:"cc@example.com"})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"BCC",value:p.bcc,onChange:e=>O("bcc",e.target.value),placeholder:"bcc@example.com"})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Subject *",value:p.subject,onChange:e=>O("subject",e.target.value),placeholder:"Email subject",required:!0})}),Object.keys(H).length>0&&(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(c.A,{variant:"outlined",children:(0,T.jsxs)(o.A,{children:[(0,T.jsx)(l.A,{variant:"subtitle2",gutterBottom:!0,children:"Template Variables"}),(0,T.jsx)(i.Ay,{container:!0,spacing:2,children:Object.entries(H).map(e=>{let[s,t]=e;return(0,T.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,T.jsx)(A.A,{fullWidth:!0,label:s.replace(/([A-Z])/g," $1").replace(/^./,e=>e.toUpperCase()),value:t,onChange:e=>((e,s)=>{F(t=>(0,Z.A)((0,Z.A)({},t),{},{[e]:s}))})(s,e.target.value),size:"small"})},s)})})]})})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Message *",value:p.content,onChange:e=>O("content",e.target.value),multiline:!0,rows:8,placeholder:"Type your message here...",required:!0})}),(0,T.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,T.jsx)(l.A,{variant:"subtitle2",children:"Attachments"}),(0,T.jsx)("input",{accept:"*/*",style:{display:"none"},id:"attachment-input",type:"file",multiple:!0,onChange:e=>{const s=Array.from(e.target.files);L(e=>[...e,...s])}}),(0,T.jsx)("label",{htmlFor:"attachment-input",children:(0,T.jsx)(h.A,{component:"span",size:"small",children:(0,T.jsx)(oe,{})})})]}),D.length>0&&(0,T.jsx)(a.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:D.map((e,s)=>(0,T.jsx)(x.A,{label:e.name,onDelete:()=>(e=>{L(s=>s.filter((s,t)=>t!==e))})(s),size:"small"},s))})]})]})]}),(0,T.jsxs)(ie.A,{sx:{p:2,gap:1},children:[(0,T.jsx)(r.A,{onClick:async()=>{I(!0);try{E("Draft saved successfully!")}catch(k){M("Failed to save draft")}finally{I(!1)}},disabled:w,startIcon:w?(0,T.jsx)(u.A,{size:16}):(0,T.jsx)(de.A,{}),children:"Save Draft"}),(0,T.jsx)(r.A,{onClick:()=>P(!z),startIcon:(0,T.jsx)(xe,{}),children:z?"Hide Preview":"Preview"}),(0,T.jsx)(a.A,{sx:{flexGrow:1}}),(0,T.jsx)(r.A,{onClick:_,children:"Cancel"}),(0,T.jsx)(r.A,{onClick:async()=>{if(p.to&&p.subject&&p.content){C(!0),M(null);try{const e=(0,Z.A)((0,Z.A)({},p),{},{content:R(p.content,H),subject:R(p.subject,H),metadata:{templateId:p.templateId,variables:H,attachments:D.length}});await X.sendEmail(e),E("Email sent successfully!"),setTimeout(()=>{d(),t(),V()},1500)}catch(k){M("Failed to send email. Please try again."),console.error("Error sending email:",k)}finally{C(!1)}}else M("Please fill in all required fields")},variant:"contained",disabled:f,startIcon:f?(0,T.jsx)(u.A,{size:16}):(0,T.jsx)(he.A,{}),children:f?"Sending...":"Send"})]}),z&&(0,T.jsxs)(se.A,{open:z,onClose:()=>P(!1),maxWidth:"sm",fullWidth:!0,children:[(0,T.jsx)(te.A,{children:"Email Preview"}),(0,T.jsx)(ne.A,{children:(0,T.jsxs)(a.A,{sx:{p:2,border:1,borderColor:"divider",borderRadius:1},children:[(0,T.jsxs)(l.A,{variant:"subtitle2",gutterBottom:!0,children:["To: ",p.to]}),(0,T.jsxs)(l.A,{variant:"subtitle2",gutterBottom:!0,children:["Subject: ",R(p.subject,H)]}),(0,T.jsx)(U.A,{sx:{my:2}}),(0,T.jsx)(l.A,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:R(p.content,H)})]})}),(0,T.jsx)(ie.A,{children:(0,T.jsx)(r.A,{onClick:()=>P(!1),children:"Close"})})]})]})},me=(0,I.A)((0,T.jsx)("path",{d:"M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m7 18H5V4h2v3h10V4h2z"}),"ContentPaste"),je=e=>{let{open:s,onClose:t,onSend:d,contactId:j=null}=e;const[p,y]=(0,n.useState)({to:"",content:"",templateId:"",contactId:j||"",scheduledTime:""}),[g,v]=(0,n.useState)([]),[b,S]=(0,n.useState)(!1),[w,I]=(0,n.useState)(null),[M,E]=(0,n.useState)(null),[z,P]=(0,n.useState)(0),[D,L]=(0,n.useState)(!1),H=160,F=1600;(0,n.useEffect)(()=>{s&&N()},[s]);const N=async()=>{try{var e;const s=await X.getSmsTemplates();v((null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.data)||[])}catch(w){console.error("Error loading SMS templates:",w)}},O=(e,s)=>{y(t=>(0,Z.A)((0,Z.A)({},t),{},{[e]:s})),"content"===e&&P(s.length)},R=()=>z<=H?1:Math.ceil(z/H),B=()=>{y({to:"",content:"",templateId:"",contactId:j||"",scheduledTime:""}),P(0),I(null),E(null),L(!1)},U=()=>{B(),t()};return(0,T.jsxs)(se.A,{open:s,onClose:U,maxWidth:"sm",fullWidth:!0,children:[(0,T.jsx)(te.A,{children:(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,T.jsx)(k,{color:"primary"}),(0,T.jsx)(l.A,{variant:"h6",children:"Send SMS"})]}),(0,T.jsx)(h.A,{onClick:U,children:(0,T.jsx)(ce.A,{})})]})}),(0,T.jsxs)(ne.A,{dividers:!0,children:[w&&(0,T.jsx)(m.A,{severity:"error",sx:{mb:2},onClose:()=>I(null),children:w}),M&&(0,T.jsx)(m.A,{severity:"success",sx:{mb:2},onClose:()=>E(null),children:M}),(0,T.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Phone Number *",value:p.to,onChange:e=>O("to",e.target.value),placeholder:"+1234567890",required:!0,helperText:"Include country code (e.g., +1 for US)"})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Contact ID",value:p.contactId,onChange:e=>O("contactId",e.target.value),placeholder:"contact_123"})}),(0,T.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,T.jsx)(l.A,{variant:"subtitle2",children:"Message Template"}),(0,T.jsx)(r.A,{size:"small",startIcon:(0,T.jsx)(me,{}),onClick:()=>L(!D),children:D?"Hide Templates":"Use Template"})]}),D&&(0,T.jsx)(c.A,{variant:"outlined",sx:{mb:2},children:(0,T.jsxs)(o.A,{sx:{p:1},children:[(0,T.jsx)(l.A,{variant:"subtitle2",gutterBottom:!0,children:"Quick Templates"}),(0,T.jsx)(V.A,{dense:!0,children:g.map(e=>(0,T.jsxs)(_.Ay,{button:!0,onClick:()=>(e=>{y(s=>(0,Z.A)((0,Z.A)({},s),{},{templateId:e.id,content:e.body||""})),P((e.body||"").length),L(!1)})(e),sx:{borderRadius:1,mb:.5},children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(W.A,{})}),(0,T.jsx)(C.A,{primary:e.body||"",secondary:e.name||""})]},e.id))})]})})]}),(0,T.jsxs)(i.Ay,{item:!0,xs:12,children:[(0,T.jsx)(A.A,{fullWidth:!0,label:"Message *",value:p.content,onChange:e=>O("content",e.target.value),multiline:!0,rows:4,placeholder:"Type your SMS message here...",required:!0,helperText:"".concat(z," characters \u2022 ").concat(R()," SMS").concat(R()>1?"es":""),error:z>F}),(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:1},children:[(0,T.jsx)(x.A,{label:"".concat(z,"/").concat(F),color:z<=H?"success":z<=F?"warning":"error",size:"small",variant:"outlined"}),z>H&&(0,T.jsx)(x.A,{label:"".concat(R()," SMS").concat(R()>1?"es":""),color:"warning",size:"small"})]})]}),(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Schedule (Optional)",type:"datetime-local",value:p.scheduledTime,onChange:e=>O("scheduledTime",e.target.value),InputLabelProps:{shrink:!0},helperText:"Leave empty to send immediately"})})]})]}),(0,T.jsxs)(ie.A,{sx:{p:2,gap:1},children:[(0,T.jsx)(a.A,{sx:{flexGrow:1}}),(0,T.jsx)(r.A,{onClick:U,children:"Cancel"}),p.scheduledTime?(0,T.jsx)(r.A,{onClick:async()=>{if(p.scheduledTime){S(!0),I(null);try{E("SMS scheduled successfully!"),setTimeout(()=>{d(),t(),B()},1500)}catch(w){I("Failed to schedule SMS. Please try again.")}finally{S(!1)}}else I("Please select a scheduled time")},variant:"outlined",disabled:b,startIcon:b?(0,T.jsx)(u.A,{size:16}):(0,T.jsx)(K.A,{}),children:b?"Scheduling...":"Schedule SMS"}):(0,T.jsx)(r.A,{onClick:async()=>{if(p.to&&p.content)if(z>F)I("Message is too long. Maximum 1600 characters allowed.");else{S(!0),I(null);try{const e=(0,Z.A)((0,Z.A)({},p),{},{metadata:{templateId:p.templateId,characterCount:z,smsCount:R()}});await X.sendSms(e),E("SMS sent successfully!"),setTimeout(()=>{d(),t(),B()},1500)}catch(w){I("Failed to send SMS. Please try again."),console.error("Error sending SMS:",w)}finally{S(!1)}}else I("Please fill in all required fields")},variant:"contained",disabled:b||z>F,startIcon:b?(0,T.jsx)(u.A,{size:16}):(0,T.jsx)(he.A,{}),children:b?"Sending...":"Send SMS"})]})]})};var Ae=t(79650),pe=t(71806),ye=t(84882),ge=t(28076),ve=t(10039),be=t(73460),fe=t(84593),Ce=t(47968);const Se=e=>{let{open:s,onClose:t,onSchedule:c,contactId:o=null}=e;const[d,p]=(0,n.useState)(0),[b,f]=(0,n.useState)({contactId:o||"",phoneNumber:"",callType:"outbound",purpose:"",scheduledTime:"",duration:30,notes:""}),[C,S]=(0,n.useState)([]),[I,k]=(0,n.useState)(!1),[M,W]=(0,n.useState)(null),[E,z]=(0,n.useState)(null),[P,D]=(0,n.useState)(!1),[L,H]=(0,n.useState)(0),N=[{id:"call_1",contactId:"contact_1",phoneNumber:"+1234567890",type:"outbound",status:"completed",duration:15,timestamp:new Date(Date.now()-72e5).toISOString(),purpose:"Property inquiry follow-up",notes:"Client interested in downtown office space",recordingUrl:"/recordings/call_1.mp3",transcription:"Client called to discuss property requirements..."},{id:"call_2",contactId:"contact_2",phoneNumber:"+1987654321",type:"inbound",status:"completed",duration:8,timestamp:new Date(Date.now()-144e5).toISOString(),purpose:"General inquiry",notes:"Quick question about lease terms",recordingUrl:null,transcription:null}];(0,n.useEffect)(()=>{s&&O()},[s]);const O=async()=>{try{S(N)}catch(M){console.error("Error loading call history:",M)}},R=(e,s)=>{f(t=>(0,Z.A)((0,Z.A)({},t),{},{[e]:s}))},V=e=>{const s=Math.floor(e/60),t=e%60;return"".concat(s.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))},_=e=>{switch(e){case"completed":return"success";case"missed":return"error";case"scheduled":return"info";case"in-progress":return"warning";default:return"default"}},B=()=>{f({contactId:o||"",phoneNumber:"",callType:"outbound",purpose:"",scheduledTime:"",duration:30,notes:""}),W(null),z(null),D(!1),H(0)},U=()=>{B(),t()},q=[{label:"Make Call",component:(0,T.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Phone Number *",value:b.phoneNumber,onChange:e=>R("phoneNumber",e.target.value),placeholder:"+1234567890",required:!0})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Contact ID",value:b.contactId,onChange:e=>R("contactId",e.target.value),placeholder:"contact_123"})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,T.jsxs)(ae.A,{fullWidth:!0,children:[(0,T.jsx)(le.A,{children:"Call Type"}),(0,T.jsxs)(re.A,{value:b.callType,onChange:e=>R("callType",e.target.value),label:"Call Type",children:[(0,T.jsx)(y.A,{value:"outbound",children:"Outbound"}),(0,T.jsx)(y.A,{value:"inbound",children:"Inbound"})]})]})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Purpose",value:b.purpose,onChange:e=>R("purpose",e.target.value),placeholder:"e.g., Property inquiry follow-up"})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Notes",value:b.notes,onChange:e=>R("notes",e.target.value),multiline:!0,rows:3,placeholder:"Add any notes about this call..."})})]})},{label:"Schedule Call",component:(0,T.jsxs)(i.Ay,{container:!0,spacing:2,children:[(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Phone Number *",value:b.phoneNumber,onChange:e=>R("phoneNumber",e.target.value),placeholder:"+1234567890",required:!0})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Contact ID",value:b.contactId,onChange:e=>R("contactId",e.target.value),placeholder:"contact_123"})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Scheduled Time *",type:"datetime-local",value:b.scheduledTime,onChange:e=>R("scheduledTime",e.target.value),InputLabelProps:{shrink:!0},required:!0})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Expected Duration (minutes)",type:"number",value:b.duration,onChange:e=>R("duration",parseInt(e.target.value)),inputProps:{min:5,max:120}})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Purpose",value:b.purpose,onChange:e=>R("purpose",e.target.value),placeholder:"e.g., Property viewing discussion"})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(A.A,{fullWidth:!0,label:"Notes",value:b.notes,onChange:e=>R("notes",e.target.value),multiline:!0,rows:3,placeholder:"Add any notes about this scheduled call..."})})]})},{label:"Call History",component:(0,T.jsx)(a.A,{children:(0,T.jsx)(Ae.A,{component:j.A,variant:"outlined",children:(0,T.jsxs)(pe.A,{children:[(0,T.jsx)(ye.A,{children:(0,T.jsxs)(ge.A,{children:[(0,T.jsx)(ve.A,{children:"Type"}),(0,T.jsx)(ve.A,{children:"Phone Number"}),(0,T.jsx)(ve.A,{children:"Duration"}),(0,T.jsx)(ve.A,{children:"Status"}),(0,T.jsx)(ve.A,{children:"Date/Time"}),(0,T.jsx)(ve.A,{children:"Actions"})]})}),(0,T.jsx)(be.A,{children:C.map(e=>{return(0,T.jsxs)(ge.A,{children:[(0,T.jsx)(ve.A,{children:(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(e.type,(0,T.jsx)(w.A,{})),(0,T.jsx)(l.A,{variant:"body2",sx:{textTransform:"capitalize"},children:e.type})]})}),(0,T.jsx)(ve.A,{children:e.phoneNumber}),(0,T.jsx)(ve.A,{children:V(60*e.duration)}),(0,T.jsx)(ve.A,{children:(0,T.jsx)(x.A,{label:e.status,color:_(e.status),size:"small"})}),(0,T.jsx)(ve.A,{children:(s=e.timestamp,new Date(s).toLocaleString())}),(0,T.jsx)(ve.A,{children:(0,T.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[e.recordingUrl&&(0,T.jsx)(h.A,{size:"small",color:"primary",children:(0,T.jsx)(fe.A,{})}),e.recordingUrl&&(0,T.jsx)(h.A,{size:"small",color:"primary",children:(0,T.jsx)(Ce.A,{})}),(0,T.jsx)(h.A,{size:"small",color:"error",children:(0,T.jsx)(Y.A,{})})]})})]},e.id);var s})})]})})})}];return(0,T.jsxs)(se.A,{open:s,onClose:U,maxWidth:"md",fullWidth:!0,children:[(0,T.jsx)(te.A,{children:(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,T.jsx)(w.A,{color:"primary"}),(0,T.jsx)(l.A,{variant:"h6",children:"Call Manager"})]}),(0,T.jsx)(h.A,{onClick:U,children:(0,T.jsx)(ce.A,{})})]})}),(0,T.jsxs)(ne.A,{dividers:!0,children:[M&&(0,T.jsx)(m.A,{severity:"error",sx:{mb:2},onClose:()=>W(null),children:M}),E&&(0,T.jsx)(m.A,{severity:"success",sx:{mb:2},onClose:()=>z(null),children:E}),(0,T.jsx)(a.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,T.jsx)(g.A,{value:d,onChange:(e,s)=>{p(s)},children:q.map((e,s)=>(0,T.jsx)(v.A,{label:e.label},s))})}),q[d].component]}),(0,T.jsxs)(ie.A,{sx:{p:2,gap:1},children:[(0,T.jsx)(a.A,{sx:{flexGrow:1}}),(0,T.jsx)(r.A,{onClick:U,children:"Cancel"}),0===d&&(0,T.jsx)(r.A,{onClick:async()=>{if(b.phoneNumber){k(!0),W(null);try{console.log("Starting call to:",b.phoneNumber),z("Call initiated!"),setTimeout(()=>{c(),t(),B()},1500)}catch(M){W("Failed to start call. Please try again."),console.error("Error starting call:",M)}finally{k(!1)}}else W("Please enter a phone number")},variant:"contained",disabled:I,startIcon:I?(0,T.jsx)(u.A,{size:16}):(0,T.jsx)(F,{}),children:I?"Starting...":"Start Call"}),1===d&&(0,T.jsx)(r.A,{onClick:async()=>{if(b.phoneNumber&&b.scheduledTime){k(!0),W(null);try{const e=(0,Z.A)((0,Z.A)({},b),{},{status:"scheduled",metadata:{callType:b.callType,purpose:b.purpose,duration:b.duration}});console.log("Scheduling call:",e),z("Call scheduled successfully!"),setTimeout(()=>{c(),t(),B()},1500)}catch(M){W("Failed to schedule call. Please try again."),console.error("Error scheduling call:",M)}finally{k(!1)}}else W("Please fill in phone number and scheduled time")},variant:"contained",disabled:I,startIcon:I?(0,T.jsx)(u.A,{size:16}):(0,T.jsx)(K.A,{}),children:I?"Scheduling...":"Schedule Call"})]})]})};var we=t(10611),Ie=t(2081),Te=t(94389),ke=t(50108),Me=t(75748),We=t(87734),Ee=t(52185),ze=t(6026),Pe=t(86150),De=t(21327),Le=t(90168),He=t(60163),Fe=t(4240),Ne=t(17869),Oe=t(82291),Re=t(38643);const Ve=e=>{let{analytics:s}=e;const[t,r]=(0,n.useState)(!1),[x,h]=(0,n.useState)(null),[m,j]=(0,n.useState)("7d"),A=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];if(!s)return(0,T.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"200px"},children:(0,T.jsx)(u.A,{})});const p=()=>{const{email:e}=s.responseRate;return 0===e.sent?0:(e.replied/e.sent*100).toFixed(1)},y=()=>Object.entries(s.byType).map(e=>{let[s,t]=e;return{name:s.charAt(0).toUpperCase()+s.slice(1),value:t,icon:"email"===s?(0,T.jsx)(S.A,{}):"call"===s?(0,T.jsx)(w.A,{}):"sms"===s?(0,T.jsx)(k,{}):(0,T.jsx)(M,{})}});return(0,T.jsxs)(a.A,{children:[(0,T.jsxs)(i.Ay,{container:!0,spacing:3,sx:{mb:3},children:[(0,T.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,T.jsx)(d.A,{sx:{bgcolor:"primary.main",mr:2},children:(0,T.jsx)(S.A,{})}),(0,T.jsx)(l.A,{variant:"h6",sx:{fontWeight:"bold"},children:(g=s.totalCommunications,g>=1e6?(g/1e6).toFixed(1)+"M":g>=1e3?(g/1e3).toFixed(1)+"K":g.toString())})]}),(0,T.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Total Communications"}),(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,T.jsx)(N.A,{color:"success",sx:{mr:1}}),(0,T.jsx)(l.A,{variant:"caption",color:"success.main",children:"+12% from last week"})]})]})})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,T.jsx)(d.A,{sx:{bgcolor:"success.main",mr:2},children:(0,T.jsx)(z,{})}),(0,T.jsxs)(l.A,{variant:"h6",sx:{fontWeight:"bold"},children:[p(),"%"]})]}),(0,T.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Email Response Rate"}),(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,T.jsx)(N.A,{color:"success",sx:{mr:1}}),(0,T.jsx)(l.A,{variant:"caption",color:"success.main",children:"+5% from last week"})]})]})})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,T.jsx)(d.A,{sx:{bgcolor:"info.main",mr:2},children:(0,T.jsx)(Ie.A,{})}),(0,T.jsx)(l.A,{variant:"h6",sx:{fontWeight:"bold"},children:s.responseRate.email.sent})]}),(0,T.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Emails Sent"}),(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,T.jsx)(N.A,{color:"success",sx:{mr:1}}),(0,T.jsx)(l.A,{variant:"caption",color:"success.main",children:"+8% from last week"})]})]})})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,T.jsx)(d.A,{sx:{bgcolor:"warning.main",mr:2},children:(0,T.jsx)(w.A,{})}),(0,T.jsx)(l.A,{variant:"h6",sx:{fontWeight:"bold"},children:s.byType.call})]}),(0,T.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Calls Made"}),(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,T.jsx)(Te.A,{color:"error",sx:{mr:1}}),(0,T.jsx)(l.A,{variant:"caption",color:"error.main",children:"-3% from last week"})]})]})})})]}),(0,T.jsxs)(i.Ay,{container:!0,spacing:3,children:[(0,T.jsx)(i.Ay,{item:!0,xs:12,md:8,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Daily Communication Activity"}),(0,T.jsx)(a.A,{sx:{height:300},children:(0,T.jsx)(ke.u,{width:"100%",height:"100%",children:(0,T.jsxs)(Me.b,{data:s.dailyActivity.map(e=>({date:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric"}),total:e.total,email:e.email,call:e.call,sms:e.sms,whatsapp:e.whatsapp})),children:[(0,T.jsx)(We.d,{strokeDasharray:"3 3"}),(0,T.jsx)(Ee.W,{dataKey:"date"}),(0,T.jsx)(ze.h,{}),(0,T.jsx)(Pe.m,{}),(0,T.jsx)(De.s,{}),(0,T.jsx)(Le.N,{type:"monotone",dataKey:"email",stroke:"#8884d8",strokeWidth:2}),(0,T.jsx)(Le.N,{type:"monotone",dataKey:"call",stroke:"#82ca9d",strokeWidth:2}),(0,T.jsx)(Le.N,{type:"monotone",dataKey:"sms",stroke:"#ffc658",strokeWidth:2}),(0,T.jsx)(Le.N,{type:"monotone",dataKey:"whatsapp",stroke:"#25D366",strokeWidth:2})]})})})]})})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Communication Types"}),(0,T.jsx)(a.A,{sx:{height:300},children:(0,T.jsx)(ke.u,{width:"100%",height:"100%",children:(0,T.jsxs)(He.r,{children:[(0,T.jsx)(Fe.F,{data:y(),cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:s,percent:t}=e;return"".concat(s," ").concat((100*t).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:y().map((e,s)=>(0,T.jsx)(Ne.f,{fill:A[s%A.length]},"cell-".concat(s)))}),(0,T.jsx)(Pe.m,{})]})})})]})})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Inbound vs Outbound"}),(0,T.jsx)(a.A,{sx:{height:250},children:(0,T.jsx)(ke.u,{width:"100%",height:"100%",children:(0,T.jsxs)(Oe.E,{data:[{name:"Inbound",value:s.byDirection.inbound,color:"#00C49F"},{name:"Outbound",value:s.byDirection.outbound,color:"#0088FE"}],children:[(0,T.jsx)(We.d,{strokeDasharray:"3 3"}),(0,T.jsx)(Ee.W,{dataKey:"name"}),(0,T.jsx)(ze.h,{}),(0,T.jsx)(Pe.m,{}),(0,T.jsx)(Re.y,{dataKey:"value",fill:"#8884d8"})]})})})]})})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:6,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Communication Breakdown"}),(0,T.jsx)(V.A,{children:y().map((e,t)=>(0,T.jsxs)(_.Ay,{children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(d.A,{sx:{bgcolor:A[t%A.length],width:32,height:32},children:e.icon})}),(0,T.jsx)(C.A,{primary:e.name,secondary:(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mt:1},children:[(0,T.jsx)(we.A,{variant:"determinate",value:e.value/s.totalCommunications*100,sx:{flexGrow:1,mr:2}}),(0,T.jsx)(l.A,{variant:"body2",color:"text.secondary",children:e.value})]})})]},t))})]})})})]}),(0,T.jsx)(i.Ay,{container:!0,spacing:3,sx:{mt:2},children:(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsx)(l.A,{variant:"h6",gutterBottom:!0,children:"Performance Metrics"}),(0,T.jsxs)(i.Ay,{container:!0,spacing:3,children:[(0,T.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,T.jsxs)(a.A,{sx:{textAlign:"center"},children:[(0,T.jsxs)(l.A,{variant:"h4",color:"primary",sx:{fontWeight:"bold"},children:[p(),"%"]}),(0,T.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Email Response Rate"}),(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mt:1},children:[(0,T.jsx)(E.A,{color:"success",sx:{mr:1}}),(0,T.jsx)(l.A,{variant:"caption",color:"success.main",children:"Above industry average"})]})]})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,T.jsxs)(a.A,{sx:{textAlign:"center"},children:[(0,T.jsx)(l.A,{variant:"h4",color:"info",sx:{fontWeight:"bold"},children:s.byDirection.inbound}),(0,T.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Inbound Communications"}),(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mt:1},children:[(0,T.jsx)(N.A,{color:"success",sx:{mr:1}}),(0,T.jsx)(l.A,{variant:"caption",color:"success.main",children:"+15% this week"})]})]})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,T.jsxs)(a.A,{sx:{textAlign:"center"},children:[(0,T.jsx)(l.A,{variant:"h4",color:"warning",sx:{fontWeight:"bold"},children:s.byDirection.outbound}),(0,T.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Outbound Communications"}),(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mt:1},children:[(0,T.jsx)(N.A,{color:"success",sx:{mr:1}}),(0,T.jsx)(l.A,{variant:"caption",color:"success.main",children:"+8% this week"})]})]})})]})]})})})})]});var g},_e=()=>{const[e,s]=(0,n.useState)(0),[t,I]=(0,n.useState)([]),[V,_]=(0,n.useState)(!0),[B,U]=(0,n.useState)(null),[q,K]=(0,n.useState)(""),[G,J]=(0,n.useState)("all"),[Q,Y]=(0,n.useState)("all"),[Z,$]=(0,n.useState)(null),[se,te]=(0,n.useState)(!1),[ne,ae]=(0,n.useState)("email"),[le,re]=(0,n.useState)(null),[ie,ce]=(0,n.useState)(null),oe=(0,n.useCallback)(async()=>{try{_(!0);const[e,s]=await Promise.all([X.getCommunications({limit:100}),X.getCommunicationAnalytics("7d")]);I(e.data),ce(s.data)}catch(e){U("Failed to load communications"),console.error("Error loading communications:",e)}finally{_(!1)}},[]);(0,n.useEffect)(()=>{oe()},[oe]);const de=t.filter(e=>{const s=!q||e.subject.toLowerCase().includes(q.toLowerCase())||e.content.toLowerCase().includes(q.toLowerCase()),t="all"===G||e.type===G,n="all"===Q||e.status===Q;return s&&t&&n}),xe=(de.reduce((e,s)=>(e[s.contactId]||(e[s.contactId]=[]),e[s.contactId].push(s),e),{}),e=>{ae(e),te(!0)}),he=()=>{te(!1),ae("email")},me=e=>{re(e.currentTarget)},Ae=()=>{re(null)},pe=e=>{switch(e){case"sent":case"replied":return"success";case"delivered":return"info";case"read":return"primary";case"failed":return"error";case"pending":return"warning";default:return"default"}},ye=e=>{switch(e){case"sent":case"delivered":case"read":return(0,T.jsx)(E.A,{});case"replied":return(0,T.jsx)(z,{});case"failed":return(0,T.jsx)(P.A,{});case"pending":return(0,T.jsx)(D.A,{});default:return null}},ge=e=>{const s=new Date(e),t=(new Date-s)/36e5;return t<1?"Just now":t<24?"".concat(Math.floor(t),"h ago"):t<168?"".concat(Math.floor(t/24),"d ago"):s.toLocaleDateString()},ve=[{label:"Timeline",icon:(0,T.jsx)(W.A,{}),component:(0,T.jsx)(ee,{communications:de,onRefresh:oe})},{label:"Email",icon:(0,T.jsx)(S.A,{}),component:(0,T.jsxs)(a.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,T.jsx)(l.A,{variant:"h6",children:"Email Communications"}),(0,T.jsx)(r.A,{variant:"contained",startIcon:(0,T.jsx)(L.A,{}),onClick:()=>xe("email"),children:"Compose Email"})]}),(0,T.jsx)(i.Ay,{container:!0,spacing:2,children:de.filter(e=>"email"===e.type).map(e=>(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,T.jsx)(d.A,{sx:{mr:2,bgcolor:"primary.main"},children:(0,T.jsx)(S.A,{})}),(0,T.jsxs)(a.A,{sx:{flexGrow:1},children:[(0,T.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:e.subject}),(0,T.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["inbound"===e.direction?"From":"To"," Contact \u2022 ",ge(e.timestamp)]})]}),(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,T.jsx)(x.A,{icon:ye(e.status),label:e.status,color:pe(e.status),size:"small"}),(0,T.jsx)(h.A,{size:"small",onClick:me,children:(0,T.jsx)(H.A,{})})]})]}),(0,T.jsx)(l.A,{variant:"body2",sx:{mb:2},children:e.content.length>200?"".concat(e.content.substring(0,200),"..."):e.content}),e.metadata&&(0,T.jsxs)(a.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.metadata.opened&&(0,T.jsx)(x.A,{label:"Opened",size:"small",color:"info"}),e.metadata.clicked&&(0,T.jsx)(x.A,{label:"Clicked",size:"small",color:"success"}),e.metadata.replied&&(0,T.jsx)(x.A,{label:"Replied",size:"small",color:"success"})]})]})})},e.id))})]})},{label:"Calls",icon:(0,T.jsx)(w.A,{}),component:(0,T.jsxs)(a.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,T.jsx)(l.A,{variant:"h6",children:"Call History"}),(0,T.jsx)(r.A,{variant:"contained",startIcon:(0,T.jsx)(w.A,{}),onClick:()=>xe("call"),children:"Schedule Call"})]}),(0,T.jsx)(i.Ay,{container:!0,spacing:2,children:de.filter(e=>"call"===e.type).map(e=>{var s,t,n;return(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,T.jsx)(d.A,{sx:{mr:2,bgcolor:"inbound"===e.direction?"success.main":"primary.main"},children:(0,T.jsx)(w.A,{})}),(0,T.jsxs)(a.A,{sx:{flexGrow:1},children:[(0,T.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"inbound"===e.direction?"Incoming Call":"Outgoing Call"}),(0,T.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:[ge(e.timestamp),(null===(s=e.metadata)||void 0===s?void 0:s.duration)&&" \u2022 ".concat(e.metadata.duration," min")]})]}),(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,T.jsx)(x.A,{icon:ye(e.status),label:e.status,color:pe(e.status),size:"small"}),(null===(t=e.metadata)||void 0===t?void 0:t.recordingUrl)&&(0,T.jsx)(h.A,{size:"small",color:"primary",children:(0,T.jsx)(F,{})})]})]}),(0,T.jsx)(l.A,{variant:"body2",sx:{mb:2},children:e.content}),(null===(n=e.metadata)||void 0===n?void 0:n.transcription)&&(0,T.jsxs)(a.A,{sx:{bgcolor:"grey.50",p:2,borderRadius:1},children:[(0,T.jsx)(l.A,{variant:"caption",color:"text.secondary",children:"Transcription:"}),(0,T.jsx)(l.A,{variant:"body2",children:e.metadata.transcription})]})]})})},e.id)})})]})},{label:"SMS",icon:(0,T.jsx)(k,{}),component:(0,T.jsxs)(a.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,T.jsx)(l.A,{variant:"h6",children:"SMS Messages"}),(0,T.jsx)(r.A,{variant:"contained",startIcon:(0,T.jsx)(k,{}),onClick:()=>xe("sms"),children:"Send SMS"})]}),(0,T.jsx)(i.Ay,{container:!0,spacing:2,children:de.filter(e=>"sms"===e.type).map(e=>(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,T.jsx)(d.A,{sx:{mr:2,bgcolor:"info.main"},children:(0,T.jsx)(k,{})}),(0,T.jsxs)(a.A,{sx:{flexGrow:1},children:[(0,T.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"SMS Message"}),(0,T.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["inbound"===e.direction?"From":"To"," Contact \u2022 ",ge(e.timestamp)]})]}),(0,T.jsx)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,T.jsx)(x.A,{icon:ye(e.status),label:e.status,color:pe(e.status),size:"small"})})]}),(0,T.jsx)(l.A,{variant:"body2",children:e.content})]})})},e.id))})]})},{label:"WhatsApp",icon:(0,T.jsx)(M,{}),component:(0,T.jsxs)(a.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,T.jsx)(l.A,{variant:"h6",children:"WhatsApp Messages"}),(0,T.jsx)(r.A,{variant:"contained",startIcon:(0,T.jsx)(M,{}),onClick:()=>xe("whatsapp"),sx:{bgcolor:"#25D366","&:hover":{bgcolor:"#128C7E"}},children:"Send WhatsApp"})]}),(0,T.jsx)(i.Ay,{container:!0,spacing:2,children:de.filter(e=>"whatsapp"===e.type).map(e=>(0,T.jsx)(i.Ay,{item:!0,xs:12,children:(0,T.jsx)(c.A,{children:(0,T.jsxs)(o.A,{children:[(0,T.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,T.jsx)(d.A,{sx:{mr:2,bgcolor:"#25D366"},children:(0,T.jsx)(M,{})}),(0,T.jsxs)(a.A,{sx:{flexGrow:1},children:[(0,T.jsx)(l.A,{variant:"subtitle1",sx:{fontWeight:"bold"},children:"WhatsApp Message"}),(0,T.jsxs)(l.A,{variant:"body2",color:"text.secondary",children:["inbound"===e.direction?"From":"To"," Contact \u2022 ",ge(e.timestamp)]})]}),(0,T.jsx)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:(0,T.jsx)(x.A,{icon:ye(e.status),label:e.status,color:pe(e.status),size:"small"})})]}),(0,T.jsx)(l.A,{variant:"body2",children:e.content})]})})},e.id))})]})},{label:"Analytics",icon:(0,T.jsx)(N.A,{}),component:(0,T.jsx)(Ve,{analytics:ie})}];return V?(0,T.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px"},children:(0,T.jsx)(u.A,{})}):B?(0,T.jsx)(m.A,{severity:"error",sx:{m:2},children:B}):(0,T.jsxs)(a.A,{sx:{p:3},children:[(0,T.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,T.jsx)(l.A,{variant:"h4",sx:{fontWeight:"bold"},children:"Communication Hub"}),(0,T.jsxs)(a.A,{sx:{display:"flex",gap:1},children:[(0,T.jsx)(r.A,{variant:"outlined",startIcon:(0,T.jsx)(L.A,{}),onClick:me,children:"New Message"}),(0,T.jsx)(h.A,{onClick:me,children:(0,T.jsx)(H.A,{})})]})]}),(0,T.jsx)(j.A,{elevation:1,sx:{p:2,mb:3},children:(0,T.jsxs)(i.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,T.jsx)(i.Ay,{item:!0,xs:12,md:4,children:(0,T.jsx)(A.A,{fullWidth:!0,placeholder:"Search communications...",value:q,onChange:e=>K(e.target.value),InputProps:{startAdornment:(0,T.jsx)(p.A,{position:"start",children:(0,T.jsx)(O.A,{})})}})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:3,children:(0,T.jsxs)(A.A,{fullWidth:!0,select:!0,label:"Type",value:G,onChange:e=>J(e.target.value),children:[(0,T.jsx)(y.A,{value:"all",children:"All Types"}),(0,T.jsx)(y.A,{value:"email",children:"Email"}),(0,T.jsx)(y.A,{value:"call",children:"Call"}),(0,T.jsx)(y.A,{value:"sms",children:"SMS"}),(0,T.jsx)(y.A,{value:"whatsapp",children:"WhatsApp"})]})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:3,children:(0,T.jsxs)(A.A,{fullWidth:!0,select:!0,label:"Status",value:Q,onChange:e=>Y(e.target.value),children:[(0,T.jsx)(y.A,{value:"all",children:"All Status"}),(0,T.jsx)(y.A,{value:"sent",children:"Sent"}),(0,T.jsx)(y.A,{value:"delivered",children:"Delivered"}),(0,T.jsx)(y.A,{value:"read",children:"Read"}),(0,T.jsx)(y.A,{value:"replied",children:"Replied"}),(0,T.jsx)(y.A,{value:"failed",children:"Failed"})]})}),(0,T.jsx)(i.Ay,{item:!0,xs:12,md:2,children:(0,T.jsx)(r.A,{fullWidth:!0,variant:"outlined",startIcon:(0,T.jsx)(R.A,{}),onClick:()=>{K(""),J("all"),Y("all")},children:"Clear Filters"})})]})}),(0,T.jsxs)(j.A,{elevation:1,children:[(0,T.jsx)(g.A,{value:e,onChange:(e,t)=>{s(t)},variant:"scrollable",scrollButtons:"auto",sx:{borderBottom:1,borderColor:"divider"},children:ve.map((e,s)=>(0,T.jsx)(v.A,{label:e.label,icon:e.icon,iconPosition:"start"},s))}),(0,T.jsx)(a.A,{sx:{p:3},children:ve[e].component})]}),se&&(0,T.jsxs)(T.Fragment,{children:["email"===ne&&(0,T.jsx)(ue,{open:se,onClose:he,onSend:oe}),"sms"===ne&&(0,T.jsx)(je,{open:se,onClose:he,onSend:oe}),"call"===ne&&(0,T.jsx)(Se,{open:se,onClose:he,onSchedule:oe})]}),(0,T.jsxs)(b.A,{anchorEl:le,open:Boolean(le),onClose:Ae,children:[(0,T.jsxs)(y.A,{onClick:()=>{xe("email"),Ae()},children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(S.A,{})}),(0,T.jsx)(C.A,{children:"Compose Email"})]}),(0,T.jsxs)(y.A,{onClick:()=>{xe("sms"),Ae()},children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(k,{})}),(0,T.jsx)(C.A,{children:"Send SMS"})]}),(0,T.jsxs)(y.A,{onClick:()=>{xe("whatsapp"),Ae()},children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(M,{})}),(0,T.jsx)(C.A,{children:"Send WhatsApp"})]}),(0,T.jsxs)(y.A,{onClick:()=>{xe("call"),Ae()},children:[(0,T.jsx)(f.A,{children:(0,T.jsx)(w.A,{})}),(0,T.jsx)(C.A,{children:"Schedule Call"})]})]})]})}},34190:(e,s,t)=>{t.d(s,{A:()=>l});var n=t(66734),a=t(70579);const l=(0,n.A)((0,a.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList")},41209:(e,s,t)=>{t.d(s,{A:()=>l});var n=t(66734),a=t(70579);const l=(0,n.A)([(0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,a.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"Schedule")},42796:(e,s,t)=>{t.d(s,{A:()=>l});var n=t(66734),a=t(70579);const l=(0,n.A)((0,a.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp")},51387:(e,s,t)=>{t.d(s,{A:()=>l});var n=t(66734),a=t(70579);const l=(0,n.A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},58558:(e,s,t)=>{t.d(s,{A:()=>l});var n=t(66734),a=t(70579);const l=(0,n.A)((0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},69131:(e,s,t)=>{t.d(s,{A:()=>l});var n=t(66734),a=t(70579);const l=(0,n.A)([(0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,a.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime")},79484:(e,s,t)=>{t.d(s,{A:()=>l});var n=t(66734),a=t(70579);const l=(0,n.A)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")},84593:(e,s,t)=>{t.d(s,{A:()=>l});var n=t(66734),a=t(70579);const l=(0,n.A)((0,a.jsx)("path",{d:"M8 5v14l11-7z"}),"PlayArrow")},94389:(e,s,t)=>{t.d(s,{A:()=>l});var n=t(66734),a=t(70579);const l=(0,n.A)((0,a.jsx)("path",{d:"m16 18 2.29-2.29-4.88-4.88-4 4L2 7.41 3.41 6l6 6 4-4 6.3 6.29L22 12v6z"}),"TrendingDown")}}]);
//# sourceMappingURL=1893.18dc4701.chunk.js.map